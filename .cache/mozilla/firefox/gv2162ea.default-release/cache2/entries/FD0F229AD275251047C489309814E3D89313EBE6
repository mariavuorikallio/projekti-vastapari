var $main_layout_attributes = $("#main_layout_attributes"),
    csrf_token = $main_layout_attributes.data("csrf_token"),
    attachment_extensions = $main_layout_attributes.data("attachment_extension"),
    global_i18n_object = $main_layout_attributes.data("global_i18n_object") || {},
    backToShoppingCartButton = $main_layout_attributes.data('back_to_shopping_cart_button'),
    googleMapsApiKey = $main_layout_attributes.data("google_maps_api_key"),
    lang = $('body').attr('lang'),
    loadedScripts = [];
    window.cachedImages = new Set();

const CURRENT_USER_ID = $('body').data('user-id');

    global_i18n_object['no_data_found_i18n'] = $main_layout_attributes.data('no_data_found_i18n');
    global_i18n_object['confirm_close_heading_i18n'] = $main_layout_attributes.data('confirm_close_heading_i18n');
    global_i18n_object['confirm_close_description_i18n'] = $main_layout_attributes.data('confirm_close_description_i18n');
    global_i18n_object['confirm_close_submit_i18n'] = $main_layout_attributes.data('confirm_close_submit_i18n');
    global_i18n_object['cancel_i18n'] = $main_layout_attributes.data('cancel_i18n');
    global_i18n_object['yes_i18n'] = $main_layout_attributes.data('yes_i18n');
    global_i18n_object['file_has_changed'] = $main_layout_attributes.data('file_has_changed_i18n');
    global_i18n_object['profile_image_has_changed'] = $main_layout_attributes.data('profile_image_has_changed_i18n');
    global_i18n_object['cloud_storage_issue'] = $main_layout_attributes.data('cloud_storage_issue_i18n');
    global_i18n_object['forbidden_password_i18n'] = $main_layout_attributes.data('forbidden_password_i18n');
    global_i18n_object['password_and_confirm_no_match_i18n'] = $main_layout_attributes.data('password_and_confirm_no_match_i18n');
    global_i18n_object['wordIsACommonPassword'] = $main_layout_attributes.data('forbidden_password_i18n');
    global_i18n_object['user_name_password_i18n'] = $main_layout_attributes.data('user_name_password_i18n');
    global_i18n_object['wordMinLength'] = $main_layout_attributes.data('word_min_length_i18n');
    global_i18n_object['errorList'] = $main_layout_attributes.data('error_list_i18n');
    global_i18n_object['veryWeak'] = $main_layout_attributes.data('very_weak_i18n');
    global_i18n_object['weak'] = $main_layout_attributes.data('weak_i18n');
    global_i18n_object['normal'] = $main_layout_attributes.data('normal_i18n');
    global_i18n_object['medium'] = $main_layout_attributes.data('medium_i18n');
    global_i18n_object['strong'] = $main_layout_attributes.data('strong_i18n');
    global_i18n_object['veryStrong'] = $main_layout_attributes.data('very_strong_i18n');

const svgIconsCache = {};

const tooltipSelectors = [
    {
        tooltip: '.tooltip',
        parent: '.has-tooltip',
    },
    {
        tooltip: '.tooltip-small',
        parent: '.has-tooltip-small',
    },
    {
        tooltip: '.info-box',
        parent: '.has-info-box',
    },
    {
        tooltip: '.info-box',
        parent: '.info-button-icon',
    },
];

$.ajaxSetup({
    beforeSend: function (xhr, settings) {
        if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
            xhr.setRequestHeader("X-CSRFToken", csrf_token);
        }
    }
});

var notificationId = 1;
var notificationTimeouts = [];

function getNumberFormatter(options) {
    return new Intl.NumberFormat(lang, options)
}

function jqEscape(str) { return str.replace(/[#;&,\.\+\*~':"!\^\$\[\]\(\)=>|\/\\]/g, '\\$&'); }

function notification(text, duration) {
    if (_.isEmpty(text)) {
        console.warn("notification text can't be undefined or null.");
        return;
    }
    var id = notificationId,
        time;

    if (!duration) {
        duration = 'fast';
    }

    if (duration === 'fast') {
        time = 4000;
    } else if (duration === 'slow') {
        time = 8000;
    } else if (duration === 'none') {
        time = 0;
    } else {
        time = 0;
    }

    if ($('.notification-text:contains(' + jqEscape(text) + ')')) {
        $('.notification-text:contains(' + jqEscape(text) + ')')
            .parents('.system-notification')
            .remove();
        // Don't duplicate the same notification: remove last one --> create new one
    }

    $(`<div class="system-notification" id="system-notification-${id}" data-time="${time}">\
        <div class="system-notification-inner">
            <span class="notification-text">
                <span class="notification-text-value">${text}</span>
            </span>
            <a class="close-notification">x</a>
        </div>
    </div>`)
        .appendTo('#system-notifications')
        .hide()
        .fadeIn();

    if (time > 0) {
        notificationTimeouts.push(
            setTimeout(function () {
                $('#system-notification-' + id).fadeOut(function () {
                    $(this).remove();
                });
            }, time),
        );
    }

    notificationId++;
}

function info_notification(text, duration) {
    var id = notificationId,
        time;

    const durations = {
        slow: 10000,
        fast: 5000,
        none: 0,
    }

    time = durations[duration];
    time = time || 0;

    var $notification = $(".notification-text:contains(" + jqEscape(text) + ")");

    if ($notification) {
        $notification.parents(".system-notification").remove();
        // Don't duplicate the same notification: remove last one --> create new one
    }

    $('<div class="system-notification info-system-notification" id="system-notification-' + id + '" data-time="' + time + '" style="margin-top: -500px">\
        <div class="system-notification-inner">\
            <span class="notification-text">\
                <div class="info-icon-wrapper">\
                    <div class="info-icon">\
                        <img src="static/images/info-icon.svg" />\
                    </div>\
                </div>\
                <span class="notification-text-value">' + text + '</span>\
            </span>\
            <a class="close-notification"><div class="cancel-mark"></div></a>\
            ' + (time ? '<span class="time-indicator ' + duration + '"></span>' : '') + '\
        </div>\
    </div>').appendTo("#system-notifications").hide().fadeIn().animate({marginTop:"0"},350);

    if (time > 0) {
        notificationTimeouts.push(setTimeout(function () {
            $("#system-notification-" + id).animate({marginTop: '-500px'}, 100).fadeOut(function () {
                $(this).remove();
            });
        }, time));
    }

    notificationId++;
}

function infoBox(info_message) {
    return '<span class="info-button-icon icon-svg-question-circle">' +
        '<span class="info-box">' + info_message + '</span>' +
        '</span>';
}

function sanitizeTheHtml(text) {
    return DOMPurify.sanitize(text);
}

function btoaUTF16(sString) {
    // Original:
    // https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding
    // Solution #3

    var aUTF16CodeUnits = new Uint16Array(sString.length);
    Array.prototype.forEach.call(aUTF16CodeUnits, function (el, idx, arr) {
        arr[idx] = sString.charCodeAt(idx);
    });
    var s = String.fromCharCode.apply(null, new Uint8Array(aUTF16CodeUnits.buffer));
    return btoa(s).replace(/[/]/g, '_').replace(/[+]/g, '-');
}

function escapeRegEx(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
}

function deepClone(object) {
    return JSON.parse(JSON.stringify(object));
}

function notificationMouseout($this) {
    $(".time-indicator").removeClass("paused");

    $(".system-notification").each(function () {
        var timePassed = $(this).find(".time-indicator").width(),
            percentageLeft = 1 - (timePassed / 400),
            time = $(this).data("time"),
            remainingTime = time * percentageLeft,
            $notification = $(this);

        if (time > 0) {
            notificationTimeouts.push(setTimeout(function () {
                $notification.fadeOut(function () {
                    $notification.remove();
                });
            }, remainingTime));
        }
    });
}

function global_i18n(key) {
    var value = global_i18n_object[key];
    if (!value) {
        console.warn('No i18n value found for key ' + key);
        return key
    }
    return value
}

function expandDropdown() {
    $('#profile-dropdown .dropdown-toggle').attr("aria-expanded", "true");
    $('#profile-dropdown').addClass('open');
}

let waitElementsIndex = 0;
function waitElements(params) {
    waitElementsIndex++;
    const waitElementsId = waitElementsIndex;
    var parent = params.parent || document;

    new MutationObserver(function () {
        var elements = parent.querySelectorAll(params.selector);

        elements.forEach(function (el) {
            var $el = $(el);
            if (!$el.hasClass(`waitElements-${waitElementsId}-done`)) {
                if (!params.excludeDoneClass) {
                    $el.addClass(`waitElements-${waitElementsId}-done`);
                }
                params.done(el);
            }
        });
    }).observe(parent, {
        subtree: !!params.recursive,
        childList: true,
    });
}

const fetchSvgIcon = (function () {
    const svgRequests = {};
    const svgCacheKey = 'svgIconsCache';
    const maxIcons = 300; // Limit to 300 to prevent the session storage full capacity
    let svgCache = JSON.parse(sessionStorage.getItem(svgCacheKey)) || {};

    // Function to check if the cached SVG is expired
    function isExpired(timestamp) {
        const expiryDuration = 24 * 60 * 60 * 1000; // one day in milliseconds
        return (Date.now() - timestamp) > expiryDuration;
    }

    // Function to prune the cache if it exceeds the max limit
    function pruneCache() {
        const entries = Object.entries(svgCache);
        if (entries.length > maxIcons) {
            entries.sort((a, b) => a[1].timestamp - b[1].timestamp); // sort by oldest timestamp
            const itemsToRemove = entries.length - maxIcons;
            for (let i = 0; i < itemsToRemove; i++) {
                delete svgCache[entries[i][0]];
            }
        }
    }

    // Clean up expired SVGs
    Object.keys(svgCache).forEach((svgFileName) => {
        if (isExpired(svgCache[svgFileName].timestamp)) {
            delete svgCache[svgFileName];
        }
    });
    pruneCache();
    sessionStorage.setItem(svgCacheKey, JSON.stringify(svgCache));

    return function (svgFileName, callback) {
        const cachedSvg = svgCache[svgFileName];
        if (cachedSvg && !isExpired(cachedSvg.timestamp)) {
            callback(cachedSvg.content);
            return;
        }

        if (svgRequests[svgFileName]) {
            svgRequests[svgFileName].then(callback);
            return;
        }

        const svgFile = `/static/icons/svg/${svgFileName}.svg`;
        const xhr = new XMLHttpRequest();
        xhr.open('GET', svgFile, true);
        xhr.responseType = 'blob';

        svgRequests[svgFileName] = new Promise((resolve, reject) => {
            xhr.onload = function () {
                if (this.status === 200) {
                    const blob = this.response;
                    const reader = new FileReader();
                    reader.onload = function (event) {
                        const result = event.target.result;
                        svgCache[svgFileName] = {
                            content: result,
                            timestamp: Date.now()
                        };
                        pruneCache();
                        sessionStorage.setItem(svgCacheKey, JSON.stringify(svgCache));
                        delete svgRequests[svgFileName];
                        resolve(result);
                        callback(result);
                    };
                    reader.readAsText(blob);
                } else {
                    reject(`Failed to fetch SVG: ${svgFileName}`);
                }
            };
            xhr.onerror = function () {
                reject(`Failed to fetch SVG: ${svgFileName}`);
            };
        });

        xhr.send();
    };
})();

// Main function to process icons
waitElements({
    selector: '[class*="icon-svg-"]',
    parent: document.body,
    recursive: true,
    done: (icon) => {
        const svgFileNamePrefix = 'icon-svg-';
        let svgFileName;
        icon.classList.forEach((iconClass) => {
            if (iconClass.startsWith(svgFileNamePrefix)) {
                svgFileName = iconClass.split(svgFileNamePrefix)[1];
            }
        });
        if (!svgFileName) {
            return;
        }
        if (icon.querySelector('svg, .svg-placeholder')) {
            icon.querySelector('svg, .svg-placeholder').remove();
        }

        if (icon.dataset.cssProp) {
            const element = document.createElement('div');
            element.className = 'svg-placeholder';
            element.style[icon.dataset.cssProp] = `url(/static/icons/svg/${svgFileName}.svg)`;
            icon.append(element);
            return;
        }

        fetchSvgIcon(svgFileName, (svgContent) => {
            icon.innerHTML += svgContent;
        });
    }
});

function visibleToViewport(params = {}) {
    const parent = params.parent || document;
    const intersectionObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                observer.unobserve(entry.target);
                if (params.callback) {
                    params.callback(entry.target);
                }
            }
        });
    });

    const elements = params.element ? [params.element] : parent.querySelectorAll(params.selector);
    elements.forEach(function (el) {
        intersectionObserver.observe(el);
    });
}

function onChildChange(params) {
    new MutationObserver(function (mutations) {
        mutations.forEach(function (mutation) {
            if (mutation.type === 'childList') {
                params.done(params.parent);
            }
        });
    }).observe(params.parent, {
        childList: true,
        subtree: true
    });
}

function onVisible(params) {
    // Note that this doesn't work in case the element has position: fixed. (See offsetParent for more details on how it works)
    const visibleClass = 'ta-onVisible-visible';
    const invisibleClass = 'ta-onVisible-invisible';

    function checkVisibility(elements) {
        elements.forEach(function (el) {
            var $el = $(el)
            if (el.offsetParent) {
                if (!$el.hasClass(visibleClass)) {
                    params.done(el);
                }
                $el.removeClass(invisibleClass).addClass(visibleClass);
            } else {
                if (!$el.hasClass(invisibleClass) && params.onInvisible) {
                    params.onInvisible(el);
                }
                $el.removeClass(visibleClass).addClass(invisibleClass);
            }

            $el.data('onVisible-id', params.id);
        });
    }

    checkVisibility(document.querySelectorAll(params.selector));

    new MutationObserver(function (mutationsList) {
        mutationsList.forEach(function (mutation) {
            var elements = mutation.target.querySelectorAll(params.selector);

            if (!elements.length && $(mutation.target).data('onVisible-id') === params.id) {
                elements = [mutation.target];
            }

            if (mutation.attributeName === 'style' || mutation.attributeName === 'class' && elements.length) {
                checkVisibility(elements);
            }
        });
    }).observe(document, {
        subtree: true,
        childList: true,
        attributes: true
    });
}

function onStyleChange(params) {
    new MutationObserver(function (mutationsList) {
        mutationsList.forEach(function (mutation) {
            if (mutation.attributeName === 'style') {
                params.done(params.element);
            }
        });
    }).observe(params.element, {
        attributes: true
    });
}

function objectToQueryString(obj) {
    return new URLSearchParams(obj).toString();
}

function stickyElements() {
    var $container = $('.sticky-element-container');

    if ($container.length) {
        var $element = $container.find('.sticky-element'),
            scrollTop = $(window).scrollTop(),
            containerTop = $container.offset().top,
            headerHeight = $('#header').height();

        if ((scrollTop + headerHeight) > containerTop) {
            $element.css('top', (scrollTop - containerTop) + headerHeight);
        } else {
            $element.css('top', 'auto');
        }
    }
}

function getInitial(name) {
    return name && String(name).toUpperCase().charAt(0);
}

function generateColorGradient(char1, char2) {
    if (!char1 || char1.length !== 1) {
        return null;
    }
    const secondChar = char2 && char2.length === 1 ? char2 : char1;
    const colorHue = (char1.charCodeAt(0) + secondChar.charCodeAt(0)) * 33;
    const colorStart = `hsl(${colorHue}, 50%, 40%)`;
    const colorEnd = `hsl(${colorHue - 50}, 50%, 65%)`;
    return `linear-gradient(45deg, ${colorStart}, ${colorEnd})`;
}

function getInitialsHtml(firstName, lastName, extraImgAttributes) {
    let firstNameInitial = getInitial(firstName || ' ');
    const lastNameInitial = getInitial(lastName || ' ');
    if (firstNameInitial === ' ' && lastNameInitial === ' ') {
        firstNameInitial = '?';
    }
    const colorGradient = generateColorGradient(firstNameInitial, lastNameInitial);
    return `<div class="img" style="background: ${colorGradient};" ${extraImgAttributes}>${
        firstNameInitial + lastNameInitial
    }</div>`;
}

function getPortraitHtml(photourl, firstName, lastName, options = {}) {
    const tooltipClass = options.tooltipClass || 'tooltip-small';
    const tooltip = options.tooltip || '';
    const extraClasses = options.extraClasses || '';
    const extraAttributes = options.extraAttributes || '';
    const extraImgAttributes = options.extraImgAttributes || '';
    let html = `<div class="navbar-portrait ${extraClasses} ${tooltip ? `has-${tooltipClass}` : ''}" ${extraAttributes}>`;
    if (photourl) {
        // Images are not cached, in order to prevent loa image on every render (in react)\
        // this will not fetch image on every render
        if (window.cachedImages.has(photourl)) {
            html += `<div class="img" style="background-image: url(${photourl})" ${extraImgAttributes}></div>`;
        } else {
            html += `<div class="img skeleton-box" data-src="${photourl}" ${extraImgAttributes}>
            </div>`;
        }
    } else {
        html += getInitialsHtml(firstName, lastName, extraImgAttributes);
    }
    if (tooltip) {
        let tooltipRegex = new RegExp(`class=.${tooltipClass}`);
        if (tooltipRegex.test(tooltip)) {
            html += sanitizeTheHtml(tooltip);
        } else {
            html += `<span class="${tooltipClass}">${sanitizeTheHtml(tooltip)}</span>`;
        }
    }
    html += '</div>';
    return html;
}

function chopString(text, length) {
    if (!text) {
        return text;
    }
    if (text.length <= length) {
        return text;
    }
    text = text.substring(0, length);
    const last = text.lastIndexOf(" ");
    text = text.substring(0, last);
    return text + "...";
}

function makeTitle(slug) {
    let words = slug.split('_');
    for (let i = 0; i < words.length; i++) {
        const word = words[i];
        words[i] = word.charAt(0).toUpperCase() + word.slice(1);
    }
    return words.join(' ');
}

function downloadFileFromAPI(url, apiOptions, fileCb, noFileCb) {
    var request = new XMLHttpRequest();
    var apiData = objectToQueryString(apiOptions.data);
    request.open(apiOptions.method, url, true);
    request.setRequestHeader("X-CSRFToken", csrf_token);
    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
    request.responseType = 'blob';
    request.onload = function(e) {
        if (this.status === 200) {
            var blob = this.response;
            var fileName = request.getResponseHeader('content-disposition').split('filename=')[1].split(';')[0];
            var link = document.createElement('a');
            var contentTypeHeader = request.getResponseHeader("Content-Type");
            var downloadUrl = window.URL.createObjectURL(new Blob([blob], { type: contentTypeHeader }));
            link.download = fileName;
            if (!link.download) {
                window.location.href = downloadUrl;
            } else {
                link.href = downloadUrl;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }

            fileCb();
        } else if (this.status === 210) {
            noFileCb();
        }
    };
    request.send(apiData);
}

function adjustBox($box, $boxContainer) {
    var marginFixes,
        $window = $(window),
        maxBoxWidth = 400,
        opposite = { top: 'bottom', bottom: 'top', left: 'right', right: 'left' },
        $boxContainer = $boxContainer || $box.closest(".has-info-box, .has-tooltip, .has-tooltip-small, .info-button-icon"),
        checkOverflowParent = false;

    if (!$box.is(tooltipSelectors.map(tooltipSelector => tooltipSelector.tooltip).join(','))) {
        $box.parents().each(function(i, parent) {
            if (!$(parent).css('overflow').includes('visible')) {
                $window = $(parent);
                checkOverflowParent = true;
                return false;
            }
        });
    }

    marginFixes = {
        overflowParent: {
            top: function () {
                return $window.offset().top - $box.offset().top
            },
            bottom: function () {
                return $window.offset().top + $window.innerHeight() - ($box.offset().top + $box.innerHeight())
            },
            left: function () {
                return $window.offset().left - $box.offset().left
            },
            right: function () {
                return $window.offset().left + $window.innerWidth() - ($box.offset().left + $box.innerWidth())
            }
        },
        window: {
            top: function () {
                return $(window).scrollTop() - $box.offset().top
            },
            bottom: function () {
                return $(window).scrollTop() + $(window).height() - ($box.offset().top + $box.innerHeight())
            },
            left: function () {
                return $(window).scrollLeft() - $box.offset().left
            },
            right: function () {
                return $(window).scrollLeft() + $(window).width() - ($box.offset().left + $box.innerWidth())
            }
        }
    };

    $box.css("margin-top", "0")
        .css("margin-right", "0")
        .css("margin-bottom", "0")
        .css("margin-left", "0")
        .css("width", Math.min(maxBoxWidth, $window.width()) + "px");
    $box.addClass('visible');
    $boxContainer.removeClass("info-box-fixed fix-overflow-top");
    $box.removeClass("fix-overflow-top");

    function adjustWidth() {
        if ($box.width() > $window.width()) {
            $box.css({cssText: 'width: ' + $window.width() + 'px !important'});
        }
    }

    function overflow(side, marginFix) {
        return (side === "top" || side === "left") && marginFix[side]() > 0
            || (side === "bottom" || side === "right") && marginFix[side]() < 0;
    }

    function fixOverflow(side, marginFix) {
        if (overflow(side, marginFix)) {
            var fix = marginFix[side]();
            var oldFix = parseFloat($box.css("margin-" + side)) * -1;
            fix = fix + oldFix;
            if (side === "bottom" || side === "right") {
                fix = fix * -1;
            }
            $box.css("margin-" + side, fix + "px");
            if (overflow(side, marginFix)) {
                $box.css("margin-" + opposite[side], (-1 * fix) + "px");
            }
            $boxContainer.addClass("info-box-fixed");

            if (side === "top" && !$box.hasClass('fix-overflow-top')) {
                $box.addClass("fix-overflow-top");
                $boxContainer.addClass("fix-overflow-top");
                fixOverflow("bottom", marginFix);
            }

            return true
        }
        return false
    }

    function fixOverflows(marginFix) {
        fixOverflow("top", marginFix) || fixOverflow("bottom", marginFix);
        fixOverflow("left", marginFix) || fixOverflow("right", marginFix);
    }

    adjustWidth();
    if (checkOverflowParent) {
        fixOverflows(marginFixes.overflowParent);
    }
    fixOverflows(marginFixes.window);
}

function adjustHeader() {
    $(".navbar-link-title").toggleClass("navbar-link-tooltip reverse-tooltip", ($(window).width() > 1014));
}

function listingPageBodyScroll() {
    $(".listing-page__body").toggleClass('no-scroll', window.innerWidth < 768 );
    $(".table-buttons-bar").toggleClass('sticky', window.innerWidth < 768);
}

function toggleSideBar(setIsCollapsed) {
    const $toggleSidebarContainer = $(".toggle-sidebar-container");
    const $toggleSidebarBtn = $('#toggle-sidebar-btn');

    // Recalculate datatable, after sidebar show/hide. (in order to show or hide datatable responsive columns)
    if ($toggleSidebarContainer.length) {
        let localStoragePrefix = () => $toggleSidebarContainer.data('local_storage_prefix') ? `${$toggleSidebarContainer.data('local_storage_prefix')}_` : '';
        let toggleTimeout = null;

        const recalculateDataTable = () => {
            const $tables = $('table.dataTable');
            if (!$tables.length) return;
            if (toggleTimeout) clearTimeout(toggleTimeout);
            toggleTimeout = setTimeout(() => {
                $tables.each((i, table) => {
                    const $table = $(table);
                    if (typeof $table.DataTable === "function") {
                        $table.DataTable().responsive.recalc();
                    }
                })
            }, 650);
        }

        function setSidebarState(isCollapsed) {
            window.localStorage.setItem(`${localStoragePrefix()}search_sidebar_collapsed`, isCollapsed);
            $toggleSidebarBtn.toggleClass('active', isCollapsed);
            $toggleSidebarContainer.toggleClass('collapsed', isCollapsed);
            recalculateDataTable();
        }
 
        if (!$toggleSidebarContainer.data('init-toggle-sidebar')) {
            $toggleSidebarContainer.data('init-toggle-sidebar', true);

            $(document).on('click', '#toggle-sidebar-btn', function () {
                const isCollapsed = JSON.parse(window.localStorage.getItem(`${localStoragePrefix()}search_sidebar_collapsed`));
                setSidebarState(!isCollapsed);
            });
        }

        if (typeof setIsCollapsed !== 'undefined') {
            setSidebarState(setIsCollapsed);
        }
    }
}

function renderRecruitmentFlow(steps = [], $container, options) {
    if (!options) options = {};

    function handleFirstAndLastActiveSteps() {
        const $stepsContainer = $container.find('.filter-items');
        const $selectedStep = $stepsContainer.find('.active');
        $stepsContainer.toggleClass('first-active', $selectedStep.is(':first-child'));
        $stepsContainer.toggleClass('last-active', $selectedStep.is(':last-child'));
    }

    function changeStep(stepId, status) {
        handleFirstAndLastActiveSteps();
        if (options.stepChangeCallback) options.stepChangeCallback(stepId, status);
    }

    function selectStep(stepId) {
        $container.find('.applicant-status-bar a[data-step_id="' + stepId + '"]').click();
    }

    function getSelectedStep() {
        const $selectedStep = $container.find('.applicant-status-bar a.active');
        return $selectedStep.data();
    }

    function getAttributes(step) {
        var attributes,
            classes = '';

        if (step.selected) {
            classes += ' active';
            changeStep(step.step_id, step.status);
        }

        if (step.disabled) {
            classes += ' disabled';
        }

        attributes = 'data-status="' + step.status + '" data-step_id="' + step.step_id + '" class="' + classes + '"';

        return attributes;
    }

    let labelTextElement = options.labelText ? '<small>' + options.labelText + '</small>' : '';
    const mapSteps = (step) => `<a ${getAttributes(step)}><span class="name">${step.step_name}</span></a>`;
    var flow = `<div class="applicant-status-bar status-bar-no-spacing ${(options.labelText ? ' status-bar-with-label' : '')}">
                    <div class="applicant-status-bar-group-wrapper">
                        ${labelTextElement}
                        <div class="applicant-status-bar-filter applicant-status-bar-progress">
                            <div class="recruitment-filter">
                                <div class="filter-items">
                                    ${steps.map(mapSteps).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;

    $container.html(flow);

    handleFirstAndLastActiveSteps();

    $container.find('a').on('click', function () {
        var $this = $(this);

        if (!$this.hasClass('disabled') && !$this.hasClass('active')) {
            $this.addClass('active').siblings().removeClass('active');
            changeStep($this.data('step_id'), $this.data('status'));
        }
    });

    if (options.postRender) {
        options.postRender({
            selectStep: selectStep,
            get selectedStep() { return getSelectedStep() },
        });
    }
}

function ajaxFailNotification(data) {
    if (data.responseJSON && data.responseJSON.notification) {
        notification(data.responseJSON.notification);
    } else {
        notification(global_i18n('ajax_fail_notification'));
    }
}

function updateApplicationFormTemplate() {
    var currentTemplate = $(".job-ad-wrapper [class*=job-ad-]").data("template");

    $(".application-form").addClass("application-form-" + currentTemplate);
}

var overlayInitialState;
function closeOverlay($overlay, callback) {
    function animateOverlayClosing($overlay, callback) {
        $overlay.addClass('overlay-closing');
        setTimeout(() => {
            $overlay.hide();
            $overlay.removeClass('overlay-closing');
            if (callback) {
                callback();
            }
        }, 120);
    }

    if (!$overlay) {
        $overlay = $('.overlay-background:visible').last();
    }

    var overlayIsExcluded = $overlay.hasClass('overlay-close-no-confirmation'),
        currentState = overlayState($overlay),
        noChangesMade = _.isEqual(overlayInitialState, currentState),
        $inputs = $overlay.find('input:not([type="submit"]):not([type="hidden"]), select, textarea'),
        hasInputs;

    if ($inputs.is(':not([readonly])') && $inputs.is(':visible')) {
        hasInputs = true;
    }

    if (overlayIsExcluded || !hasInputs || noChangesMade) {
        animateOverlayClosing($overlay, callback);
    } else {
        show_confirmation_overlay(
            "confirm-close-overlay",
            global_i18n('confirm_close_heading_i18n'),
            global_i18n('confirm_close_description_i18n'),
            {
                'label': global_i18n('cancel_i18n')
            },
            {
                'label': global_i18n('confirm_close_submit_i18n'),
                'action': function () {
                    animateOverlayClosing($overlay, callback);
                    $overlay.removeClass('overlay-changes-made');
                }
            }
        );
    }
}

function overlayState($overlay, action) {
    var currentState = {};

    $overlay.find('input:not([type="submit"]):not([type="hidden"]), select, textarea').each(function (i, field) {
        var $field = $(field);

        if ($field.is(':visible')) {
            currentState[i] = $(field).val();
        }
    });

    if ($('#ckeditor-attributes').length) {
        for (var i in CKEDITOR.instances) {
            currentState['ckeditor-' + CKEDITOR.instances[i].name] = CKEDITOR.instances[i].getData();
        }
    }

    if (action === 'setInitial') {
        overlayInitialState = currentState;
    } else {
        return currentState;
    }
}

function setOverlayInitialStateListener() {
    function overlayObserverCallback(mutations) {
        mutations.forEach(function (mutation) {
            if (mutation.attributeName !== 'style') {
                return;
            }

            if (mutation.target.style.display !== 'none') {
                setTimeout(function () {
                    overlayState($(mutation.target), 'setInitial');
                }, 750);
            }
        });
    }

    var observer = new MutationObserver(overlayObserverCallback);

    $('.overlay-background').each(function (i, overlay) {
        var target = overlay,
            overlayIsExcluded = $(overlay).hasClass('overlay-close-no-confirmation');

        if (!overlayIsExcluded) {
            observer.observe(target, {
                attributes: true
            });
        }
    });
}

function setDatepickerDefaults(lang) {
    var old_fn = $.datepicker._updateDatepicker,
        clear_i18n = $('#main_layout_attributes').data('clear_i18n'),
        datepickerDefaults = {
            showButtonPanel: true,
            firstDay: 1
        };

    $.datepicker.setDefaults($.datepicker.regional[lang]);
    $.timepicker.setDefaults($.timepicker.regional[lang]);
    $.datepicker.setDefaults(datepickerDefaults);
    $.timepicker.setDefaults(datepickerDefaults);

    $.datepicker._updateDatepicker = function (inst) {
        old_fn.call(this, inst);

        var $buttonPane = $(this).datepicker('widget').find('.ui-datepicker-buttonpane'),
            $clearButton = $(this).datepicker('widget').find('.datepicker-clear');

        if (!$clearButton.length) {
            $('<button type="button" class="ui-datepicker-clean ui-state-default ui-priority-secondary ui-corner-all datepicker-clear">' + (Language.string('clear') || clear_i18n) + '</button>').appendTo($buttonPane).click(function () {
                $.datepicker._clearDate(inst.input);
                $.datepicker._hideDatepicker();
                $(inst.input).blur();
            });
        }
    }

    $.datepicker._gotoToday = function (id) {
        var date,
            target = $(id),
            inst = this._getInst(target[0]);

        if (this._get(inst, 'timepicker')) {
            var tp_inst = this._get(inst, 'timepicker');
            var tzoffset = $.timepicker.timezoneOffsetNumber(tp_inst.timezone);
            var now = new Date();
            now.setMinutes(now.getMinutes() + now.getTimezoneOffset() + parseInt(tzoffset, 10));
            this._setTime(inst, now);
            this._setDate(inst, now);
            tp_inst._onSelectHandler();
        } else if (this._get(inst, "gotoCurrent") && inst.currentDay) {
            inst.selectedDay = inst.currentDay;
            inst.drawMonth = inst.selectedMonth = inst.currentMonth;
            inst.drawYear = inst.selectedYear = inst.currentYear;
        } else {
            date = new Date();
            inst.selectedDay = date.getDate();
            inst.drawMonth = inst.selectedMonth = date.getMonth();
            inst.drawYear = inst.selectedYear = date.getFullYear();
            this._setDateDatepicker(target, date);
            this._selectDate(id, this._getDateDatepicker(target));
        }
        this._notifyChange(inst);
        this._adjustDate(target);
    }

    $.datepicker._selectDay = function (id, month, year, td) {
        var inst,
            target = $(id);

        if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {
            return;
        }

        inst = this._getInst(target[0]);
        inst.selectedDay = inst.currentDay = $("a", td).text(); // .html() --> .text() to prevent Google Translate from breaking the Day
        inst.selectedMonth = inst.currentMonth = month;
        inst.selectedYear = inst.currentYear = year;
        this._selectDate(id, this._formatDate(inst,
            inst.currentDay, inst.currentMonth, inst.currentYear));
    }
}

(function ($) {
    $.fn.goTo = function () {
        $('html, body').animate({
            scrollTop: $(this).offset().top + 'px'
        }, 'slow');
        return this;
    }
})(jQuery);

function dehtmlify(s) {
    // Returns text from given HTML.
    s = s.replace('\n', ' ')
        .replace(/<!--[\s\S]*?-->/g, '')
        .replace(/<style[\s\S]+?\/style>/g, '')
        .replace(/<\s*\/(?:p|blockquote|ul|ol)>/g, '\n')
        .replace(/<\s*br\s*[/]?>/g, '\n')
        .replace(/<\s*(?:p|div|img|br|blockquote|li)[\s\S]*?>/g, '\n')
        .replace(/<[^<]*?>/g, '');
    return $("<textarea/>").html(s).text().trim();
}

function escapeQuotes(string) {
    return string.replaceAll('"', '&quot;').replaceAll("'", "&apos;");
}

function unescapeQuotes(string) {
    return string.replaceAll('&quot;', '"').replaceAll("&apos;", "'");
}

function convertAlpacaValidators(alpacaForm) {
    function makeValidator(fields, checkFunc, message) {
        return function (cb) {
            var that = this;
            var values = _.map(fields, function (v) {
                return that.getParent().childrenByPropertyId[v].getValue()
            });
            if (checkFunc(values)) {
                cb({"status": true})
            } else {
                cb({
                    "status": false,
                    "message": message
                });
            }
        };
    }

    _.forEach(alpacaForm['options']['fields'] || {}, function (field, fieldName) {
        if (field.validator) {
            var command = field.validator.shift(),
                message = field.validator.shift(),
                args = _.clone(field.validator);
            switch (command) {
                case 'anyRequired':
                    field.validator = makeValidator(args, _.some, message);
                    break;
                case 'allRequired':
                    field.validator = makeValidator(args, _.every, message);
                    break;
            }
        }
        _.forEach(field.validator || [], function (validatorDescription) {
            }
        );
    });
    return alpacaForm;
}

var NewQRCode = (function () {
    var initDone = false;

    function init(callback) {
        $.getScript('/static/vendor/qrcode.min.js', function () {
            initDone = true;
            if (callback) {
                callback();
            }
        });
    }

    function renderQrCode(element, url, size, callback) {
        new QRCode(element, {
            text: url,
            width: size,
            height: size
        });

        if (callback) {
            setTimeout(function () {
                callback();
            }, 100);
        }
    }

    function render(element, url, size, callback) {
        if (!size) {
            size = 100;
        }

        if (initDone) {
            renderQrCode(element, url, size, callback);
        } else {
            init(function () {
                renderQrCode(element, url, size, callback);
            });
        }
    }

    return {
        render: render
    };
})();

var PhoneQRCode = (function () {
    var $phone = $('.qr-code-phone'),
        qrCodeText = $('#main_layout_attributes').data('qr_code_i18n'),
        renderingQrCode = false;

    function renderQrCode($this) {
        renderingQrCode = true;

        $this.addClass('has-info-box');

        $this.append('<span class="info-box">\
                ' + qrCodeText + '\
                <div class="qr-code"></div>\
            </span>');

        var element = $this.find('.qr-code')[0],
            phoneNumber = $this.attr('href');

        NewQRCode.render(element, phoneNumber, 100, function () {
            adjustBox($this.find('.info-box'));

            renderingQrCode = false;
        });
    }

    $phone.mouseover(function () {
        var $this = $(this),
            qrCodeExists = $this.find('.qr-code').length;

        if (!qrCodeExists && !renderingQrCode) {
            renderQrCode($this);
        }
    });
})();

var LoadingIndicator = (function () {
    var fadeDuration = 500;

    function setDuration($loader, duration) {
        $loader.css('-webkit-transition', 'opacity ' + fadeDuration + 'ms ease-in-out, -webkit-transform ' + duration + ' linear');
        $loader.css('transition', 'opacity ' + fadeDuration + 'ms ease-in-out, transform ' + duration + ' linear');
    }

    function setProgress($loader, progress, duration) {
        setDuration($loader, duration);
        $loader.css('-webkit-transform', 'translateX(' + progress + ')');
        $loader.css('transform', 'translateX(' + progress + ')');
    }

    function start($loader, progress, duration) {
        $loader.css('opacity', '0');
        setTimeout(function () {
            setProgress($loader, '-100%', '0s');
            setTimeout(function () {
                set($loader, progress, duration);
            }, 50); // Timeout (50ms) so that the "transform" resets even though it should reset instantly "0s"
        }, fadeDuration);
    }

    function reset($loader) {
        $loader.css('opacity', '0');
        setProgress($loader, '0%', fadeDuration / 2 + 'ms');
        setTimeout(function () {
            setProgress($loader, '-100%', '0s');
        }, fadeDuration);
    }

    function set($loader, progress, duration) {
        duration = ((progress === 1 || !duration) ? fadeDuration / 2 + 'ms' : duration);
        $loader.css('opacity', '1');
        setProgress($loader, (progress * 100 - 100) + '%', duration);
        if (progress === 1) {
            setTimeout(function () {
                reset($loader);
            }, duration);
        }
    }

    return {
        start: start,
        reset: reset,
        set: set
    }
})();

var Language = (function () {
    var langJson, currentLang, strings, alpaca_form;

    function getCurrentLang() {
        return currentLang || $('html').attr('lang');
    }

    function getString(key) {
        var text = "";
        if (strings) {
            text = strings[key];
        }
        return text;
    }

    function setLang(langId, params) {
        var $container = params.$container || $('html, body');

        $container.prop('lang', langId);
        currentLang = langId;
        strings = langJson[langId];

        $container.find('.ta-custom-string').each(function () {
            var $this = $(this),
                stringKey = $this.data('string'),
                stringHrefKey = $this.data('string_href'),
                string = strings[stringKey],
                stringHref = stringHrefKey ? strings[stringHrefKey] : '';

            if ($this.is(':input:not(button)')) {
                $this.val(string);
            } else {
                $this.html(string);
            }

            if (stringHref) {
                $this.prop('href', stringHref);
            }
        });

        if (params.$form) {
            var $form = params.$form,
                $applicantImage = $form.find('#applicant-image').appendTo('body').hide(),
                talent_image = $form.find('.talent-image-label').css('background-image'),
                $videoQuestions = $form.find('#video-questions').appendTo('body').hide(),
                $fileInputs = $form.find('input:file'),
                $hiddenFileInputContainers = $form.find('.alpaca-field.attachment_default_widget_class');

            var apiParams = _.merge({
                "language_id": langId,
                "filled_data": JSON.stringify($form.alpaca('get').getValue())
            }, params.apiParams);

            $.post(params.formLink, apiParams, function (data) {
                var form_json = $.parseJSON(data["form_json"]);
                var alpaca_form = new alpacaForm();
                alpaca_form.init(null, $form);
                alpaca_form.setLanguage(currentLang);
                alpaca_form.postRender = function () {
                    return function (control) {
                        alpaca_form.defaultPostRender(control);

                        $("<span class=\"info-button-icon icon-svg-question-circle\">" +
                            "<span class='info-box'>" + strings['talent_form_page_allow_filetype'] + "</span></span>").insertAfter(".attachment_header_field_class h2");
                        $(".alpaca-control.checkbox").each(function () {
                            $(this).find('input').attr('name', $(this).attr('name'));
                            $(this).find('input').attr('value', $(this).find('input').attr('data-checkbox-value'));
                        });
                        $(".slider_widget_with_labels_class input").parent().removeClass("col-sm-9").addClass("col-sm-12");
                        $('.alpaca-field-checkbox div:empty').remove();
                        $(".date_widget_class input").prop('readonly', true);
                        setDatepickerDefaults(currentLang);
                        if (talent_image && talent_image !== 'none') {
                            $(".talent-image-label").css("background-image", "url(" + talent_image + ")");
                            $(".talent-image-label").find("span").removeClass("show-span");
                            $(".talent-image-label").find("span").html(strings['talent_form_page_change_text']);
                            $('#lottie-player-camera-animation').remove();
                        }
                        $fileInputs.each(function (i, input) {
                            var $input = $(input),
                                id = $input.attr('id');

                            $form.find('#' + id).replaceWith($input);
                        });
                        $hiddenFileInputContainers.each(function (i, container) {
                            var $container = $(container),
                                containerId = $container.data('alpaca-field-id'),
                                $inputs = $container.find('input[type="hidden"]'),
                                $attachmentFile = $container.find('.attachmentFile'),
                                $newContainer = $form.find('.alpaca-field[data-alpaca-field-id="' + containerId + '"]');

                            $newContainer.find('.attachmentFile').replaceWith($attachmentFile);

                            if ($inputs.length) {
                                $inputs.each(function (i, input) {
                                    var $input = $(input),
                                        name = $input.attr('name');

                                    $newContainer.find('input[name="' + name + '"]').replaceWith($input);
                                });
                            } else {
                                $newContainer.find('input[type="hidden"]').remove();
                            }
                        });
                        if (params.postRender) params.postRender();
                    }
                };
                alpaca_form.updateJsonConfiguration(form_json);
            });
        }
    }

    function eventListeners(params) {
        $(document).on(params.langChanger.event, params.langChanger.elementSelector, function () {
            var langId = $(this).val() || $(this).data('language_id');

            setLang(langId, params);
        });
    }

    function init(json, lang, params) {
        langJson = json;
        currentLang = lang;
        strings = langJson[currentLang];
        if (!params) params = {};
        if (params.$container) params.$container.addClass('inner-lang-container');
        eventListeners(params);
    }

    return {
        init: init,
        string: getString,
        getCurrent: getCurrentLang
    };
})();

function getAllUrlParams(url) {
    var queryString = url ? url.split('?')[1] : window.location.search.slice(1);

    var obj = {};

    if (queryString) {

        queryString = queryString.split('#')[0];

        var arr = queryString.split('&');

        for (var i = 0; i < arr.length; i++) {
            var a = arr[i].split('=');

            var paramName = a[0];
            var paramValue = typeof (a[1]) === 'undefined' ? true : a[1];

            if (paramName.match(/\[(\d+)?\]$/)) {

                var key = paramName.replace(/\[(\d+)?\]/, '');
                if (!obj[key]) obj[key] = [];

                if (paramName.match(/\[\d+\]$/)) {
                    var index = /\[(\d+)\]/.exec(paramName)[1];
                    obj[key][index] = paramValue;
                } else {
                    obj[key].push(paramValue);
                }
            } else {
                if (!obj[paramName]) {
                    obj[paramName] = paramValue;
                } else if (obj[paramName] && typeof obj[paramName] === 'string') {
                    obj[paramName] = [obj[paramName]];
                    obj[paramName].push(paramValue);
                } else {
                    obj[paramName].push(paramValue);
                }
            }
        }
    }

    return obj;
}

function removeQueryParamsFromUrl(url) {
    return url.split('?')[0];
}

function createSearchUrl(searchObj) {
    var searchUrl = '';

    if (!$.isEmptyObject(searchObj)) {
        for (var param in searchObj) {
            searchUrl += '&' + param + '=' + searchObj[param];
        }

        searchUrl = searchUrl.replace('&', '?');
    }

    return searchUrl;
}

function initAlpacaTogglers() {
    $('.toggle-alpaca-items').each(function (index, toggler) {
        var $toggler = $(toggler),
            targetItemClass = $toggler.data('item_class');

        $toggler.removeClass('hidden');

        $('.alpaca-field.' + targetItemClass).parents('.alpaca-container-item').hide();
    });

    $('.toggle-alpaca-items').click(function () {
        var $toggler = $(this),
            targetItemClass = $toggler.data('item_class'),
            togglerText;

        $toggler.toggleClass('show-items');
        togglerText = $toggler.hasClass('show-items') ? $toggler.data('close_text') : $toggler.data('open_text');
        $toggler.text(togglerText);
        $('.alpaca-field.' + targetItemClass).parents('.alpaca-container-item').toggle();
    });
}

function logAppErrors(data) {
    $.ajax({
        url: '/errors',
        type: 'POST',
        contentType: 'application/json;charset=UTF-8',
        dataType: 'json',
        data: JSON.stringify(data),
        success: function (response) { },
        error: function (response, textStatus, errorThrown) { }
    });
}

function getBrowserInfo() {
    var nVer = navigator.appVersion;
    var nAgt = navigator.userAgent;
    var browserName = navigator.appName;
    var fullVersion = '' + parseFloat(navigator.appVersion);
    var majorVersion = parseInt(navigator.appVersion, 10);
    var nameOffset, verOffset, ix;

    // In Opera, the true version is after "Opera" or after "Version"
    if ((verOffset = nAgt.indexOf("Opera")) != -1) {
        browserName = "Opera";
        fullVersion = nAgt.substring(verOffset + 6);
        if ((verOffset = nAgt.indexOf("Version")) != -1)
            fullVersion = nAgt.substring(verOffset + 8);
    }
    // In MSIE, the true version is after "MSIE" in userAgent
    else if ((verOffset = nAgt.indexOf("MSIE")) != -1) {
        browserName = "Microsoft Internet Explorer";
        fullVersion = nAgt.substring(verOffset + 5);
    }
    // In Chrome, the true version is after "Chrome"
    else if ((verOffset = nAgt.indexOf("Chrome")) != -1) {
        browserName = "Chrome";
        fullVersion = nAgt.substring(verOffset + 7);
    }
    // In Safari, the true version is after "Safari" or after "Version"
    else if ((verOffset = nAgt.indexOf("Safari")) != -1) {
        browserName = "Safari";
        fullVersion = nAgt.substring(verOffset + 7);
        if ((verOffset = nAgt.indexOf("Version")) != -1)
            fullVersion = nAgt.substring(verOffset + 8);
    }
    // In Firefox, the true version is after "Firefox"
    else if ((verOffset = nAgt.indexOf("Firefox")) != -1) {
        browserName = "Firefox";
        fullVersion = nAgt.substring(verOffset + 8);
    }
    // In most other browsers, "name/version" is at the end of userAgent
    else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) <
        (verOffset = nAgt.lastIndexOf('/'))) {
        browserName = nAgt.substring(nameOffset, verOffset);
        fullVersion = nAgt.substring(verOffset + 1);
        if (browserName.toLowerCase() == browserName.toUpperCase()) {
            browserName = navigator.appName;
        }
    }
    // trim the fullVersion string at semicolon/space if present
    if ((ix = fullVersion.indexOf(";")) != -1)
        fullVersion = fullVersion.substring(0, ix);

    if ((ix = fullVersion.indexOf(" ")) != -1)
        fullVersion = fullVersion.substring(0, ix);

    majorVersion = parseInt('' + fullVersion, 10);

    if (isNaN(majorVersion)) {
        fullVersion = '' + parseFloat(navigator.appVersion);
        majorVersion = parseInt(navigator.appVersion, 10);
    }

    return {
        browserName: browserName,
        fullVersion: fullVersion,
        majorVersion: majorVersion,
        appName: navigator.appName,
        userAgent: navigator.userAgent
    }
}

function getAccordionHtml(id, title, body, isExpanded) {
    return `
        <div class="panel panel-default panel-ta-default">
            <div class="panel-heading pointer ${isExpanded ? '' : 'collapsed' }" role="tab" id="panel-heading-${id}" data-toggle="collapse" data-target="#panel-collapse-${id}">
                <h4 class="panel-title">
                    ${title}
                </h4>
                <span class="icon-svg-chevron-up toggle-icon"></span>
            </div>
            <div id="panel-collapse-${id}" class="panel-collapse collapse ${isExpanded ? 'in' : ''}" role="tabpanel" aria-labelledby="panel-heading-${id}">
                <div class="panel-body">
                    ${body}
                </div>
            </div>
        </div>
    `;
}

var CookieConsentPopup = (function() {
    var $cookieConsentContainer,
        $cookieConsentLink,
        $cookieConsentInputs,
        $langChanger,
        cookiePreferences,
        cookiePreferencesObj,
        allCookies,
        $publicAttributes,
        companyHash,
        cookieConsentLang,
        cookiesData,
        cookieConsentOptions,
        customCookiesData;

    function getDomainWithPrefix() {
        var hostname = location.hostname;
        if (hostname.includes('.')) {
            return hostname.substr(hostname.indexOf('.'));
        } else {
            return hostname;
        }
    }

    function removeUnacceptedCookies(preferences) {
        if (!preferences) preferences = {};
        cookiesData.forEach(function(cookie) {
            var cookieName = cookie.name;
            var cookieAttributes = cookie.attributes || {};
            var cookieType = cookie.cookie_type;

            if (!preferences[cookieType]) {
                Cookies.remove(cookieName, cookieAttributes);
            }
        });
    }

    function handleCookies(preferences) {
        removeUnacceptedCookies(preferences);

        $('.cookie-script').each(function() {
            var $this = $(this),
                cookieType = $this.data('cookie_type'),
                src = $this.data('src'),
                htmlTag = $this.data('htmlTag') || 'script',
                style = $this.attr('style'),
                innerHtml = $this.html();

            if (preferences[cookieType]) {
                $('<' + htmlTag +
                    (src ? ' src="' + src + '"' : '') +
                    (style ? ' style="' + style + '"' : '') + '>' + innerHtml + '</' + htmlTag + '>').insertAfter($this);
            }
        });
    }

    function eventListeners() {
        $cookieConsentContainer.on('click', '.actions a', function() {
            var $this = $(this),
                action = $this.data('action'),
                newCookiePreferences = {};

            if (action === 'edit') {
                $this.addClass('hidden');
                $cookieConsentContainer.find('.cookie-preferences').show();
                $cookieConsentContainer.find('.actions a[data-action="accept-selected"]').removeClass('hidden');
                return;
            } else if (action === 'accept-all') {
                $cookieConsentInputs.prop('checked', true);
            }

            $cookieConsentInputs.each(function(i, input) {
                var $input = $(input),
                    cookieType = $input.attr('name');

                newCookiePreferences[cookieType] = $input.is(':checked');
            });

            $cookieConsentContainer.hide();
            handleCookies(newCookiePreferences);
            Cookies.set('cookie_preferences', JSON.stringify(newCookiePreferences), { expires: 1 });
        });

        $cookieConsentLink.on('click', function() {
            $cookieConsentContainer.show();
            $cookieConsentContainer.removeClass('overlay-no-close');
        });
    }

    function init($container) {
        $cookieConsentContainer = $container;
        $cookieConsentLink = $cookieConsentContainer.find('.cookie-preferences-link');
        $cookieConsentInputs = $cookieConsentContainer.find('.cookie-preferences input');
        $langChanger = $cookieConsentContainer.find('.language-changer');
        cookiePreferences = Cookies.get('cookie_preferences');
        cookiePreferencesObj = cookiePreferences ? JSON.parse(cookiePreferences) : '';
        allCookies = Cookies.get();
        $publicAttributes = $('#public-view-attributes');
        companyHash = $publicAttributes.data('company_hash');
        cookieConsentLang = $cookieConsentContainer.attr('lang');
        cookiesData = [
            {
                name: '_ga',
                attributes: {
                    domain: getDomainWithPrefix()
                },
                cookie_type: 'service_development_cookies'
            },
            {
                name: '_gid',
                attributes: {
                    domain: getDomainWithPrefix()
                },
                cookie_type: 'service_development_cookies'
            },
            {
                name: '_gat_Tracker',
                attributes: {
                    domain: getDomainWithPrefix()
                },
                cookie_type: 'service_development_cookies'
            }
        ];
        cookieConsentOptions = $cookieConsentContainer.data('options') || {};
        customCookiesData = cookieConsentOptions.cookies_data || [];
        customCookiesData = customCookiesData.map(function (cookie) {
            if (cookie.attributes && cookie.attributes.domain && cookie.attributes.domain === 'getDomainWithPrefix()') {
                cookie.attributes.domain = getDomainWithPrefix();
            }
            return cookie;
        });
        cookiesData = cookiesData.concat(customCookiesData);

        eventListeners();

        $.get('/api/companies/' + companyHash + '/languages').done(function(data) {
            var langOptionsHtml = '';
            data.language_selection_options.forEach(function(lang) {
                langOptionsHtml += '<option value="' + lang.id + '"' + (lang.id === cookieConsentLang ? ' selected' : '') + '>' + lang.name + '</option>';
            });
            $langChanger.html(langOptionsHtml);

            Language.init(data.custom_strings_in_all_languages, cookieConsentLang, {
                $container: $cookieConsentContainer,
                langChanger: {
                    elementSelector: '#cookie-consent-overlay .language-changer',
                    event: 'change'
                }
            });
        });

        if (cookiePreferences) {
            handleCookies(cookiePreferencesObj);
            $cookieConsentInputs.each(function(i, input) {
                var $input = $(input),
                    isAccepted = cookiePreferencesObj[$input.attr('name')];

                $input.prop('checked', isAccepted);
            });
        } else {
            _.forIn(allCookies, function(value, key) {
                Cookies.remove(key);
            });
            removeUnacceptedCookies();

            $cookieConsentContainer.show();
        }

        $cookieConsentLink.appendTo('.public-view-footer-top-bar');
    }

    return {
        init: init
    }
})();

function formatAttachments(attachments) {
    return attachments ? [attachments] : [];
}

function addAttachmentFile(fileName, target, id) {
    $('<span class="icon-svg-paperclip"></span> ' + sanitizeHtml(fileName) + ' <span class="remove-filter" ' + (id ? 'id="' + id + '"' : '') + '></span>').appendTo(target);
}

function setHeightFromPostMessage(event) {
    $('.postmessage-height-container iframe').each(function(i, iframe) {
        if (event.source === iframe.contentWindow) {
            const postMessageHeight = event.data;
            if (!Number.isInteger(postMessageHeight)) {
                return;
            }
            const $container = $(iframe).closest('.postmessage-height-container');
            let postmessageHeightFix = $container.data('postmessage_height_fix') || 0;
            $container.height(postMessageHeight + postmessageHeightFix + 1); // +1 for subpixel issues
        }
    });
}
window.addEventListener("message", setHeightFromPostMessage, false);

const select2SimpleResultTemplate = (state) => {
    const { info, divider = false, class: classes = '' } = $(state.element).data() || {};
    if (divider) return $(`<div class="option-divider"></div>`);
    if (!state.id && !state.text) return null;
    let infoMessage = info
        ? `<span class="info-button-icon icon-svg-question-circle"><span class="info-box">${info}</span></span>`
        : '';
    return $(`<div class="select-custom-option ${classes}">${state.text} ${infoMessage}</div>`);
}

function getSliderValue($slider) {
    return $slider.slider('option', 'value');
}

function handleSelect2HasValue(select2Container) {
    if (!select2Container) {
        return;
    }
    const hasValue = select2Container.data().length > 0;
    select2Container.$selection.toggleClass('ta-select2-has-value', hasValue);
}

function setTabsCount() {
    $('.tabs a[data-tab_text][data-text][data-count]').each(function () {
        setTabCount(this);
    });
}

function setTabCount(tab) {
    const $tab = $(tab);

    if (!$tab.length) return;

    const text = $tab.data('text') || $tab.text();
    const count = parseInt($tab.data('count'));
    const addCount = window.innerWidth <= 1400 && count >= 0 && $tab.data('text');
    $tab.attr('data-tab_text', addCount ? `${text} (${count})` : text);
    $tab.html(addCount ? `${text} <span class="count">(${count})</span>` : text);
}

function getScoreHtml(dataObj) {
    const scoreMapping = {
        jobilla: {
            10: {
                text: "A+",
                className: "a",
            },
            20: {
                text: "A",
                className: "a",
            },
            30: {
                text: "B",
                className: "b",
            },
            40: {
                text: "C",
                className: "c",
            },
            50: {
                text: "?",
                className: "unknown",
            },
        },
    };
    const { data, type } = dataObj || {};
    if (!data || !type) {
        return '';
    }
    const scoreObj = scoreMapping[type];
    const { text, className } = scoreObj[data];
    return `<span class="box-label ${type}-score ${type}-score-${className}">${text}</span>`;
}

$(document).ready(function () {
    const browserInfo = getBrowserInfo();
    const browserName = browserInfo.browserName;
    const fullVersion = browserInfo.fullVersion;
    const userAgent = browserInfo.userAgent;
    const $html = $('html');
    const $body = $('body');
    const timeZone = new Date().getTimezoneOffset();
    const lang = $body.attr('lang');
    const user = $body.data('user-id');
    const is_ios = /iP(ad|od|hone)/i.test(userAgent);
    const is_safari = !!userAgent.match(/Version\/[\d\.]+.*Safari/);
    
    const select2ResultTemplates = {
        "simple": select2SimpleResultTemplate
    }
    
    if (is_ios) {
        $html.addClass('is-ios');
    }
    if (is_safari) {
        $html.addClass('is-safari');
    }
    if (is_ios && is_safari) {
        $html.addClass('is-ios-safari');
    }

    window.onerror = function (message, url, line, colno) {
        const error_log = {
            browser: browserName,
            colno: colno,
            lang: lang,
            line: line,
            message: message,
            page: window.location.href,
            time: new Date().toISOString(),
            tz: timeZone,
            url: url,
            user: user,
            userAgent: userAgent,
            version: fullVersion
        };

        logAppErrors(error_log);
    };

    // Ajax Error Logging
    $(document).ajaxError(function (event, jqxhr, settings, thrownError) {
        const error_log = {
            browser: browserName,
            data: settings.data,
            lang: lang,
            message: thrownError,
            page: window.location.href,
            time: new Date().toISOString(),
            type: settings.type,
            tz: timeZone,
            url: settings.url,
            user: user,
            userAgent: userAgent,
            version: fullVersion
        };
        settings.url !== '/errors' && logAppErrors(error_log);
    });

    // Some IE compatibility Javascript
    function isIE() {
        return $('html').hasClass('ie');
    }

    if (isIE()) {
        $.ajaxSetup({ cache: false });
    }

    $("#system-notifications").on("click", ".close-notification", function (e) {
        e.preventDefault();

        var $notification = $(this).parents(".system-notification");

        if ($(this).find('.cancel-mark').length) {
            $notification.animate({marginTop: '-500px'}, 500).fadeOut(function () {
                $(this).remove();
            });
        } else {
            $notification.fadeOut(function () {
                $(this).remove();
            });
        }

        notificationMouseout($notification);
    });

    $("#system-notifications").on("mouseover", ".system-notification", function () {
        $(".time-indicator").addClass("paused");

        for (var i = 0; i < notificationTimeouts.length; i++) {
            clearTimeout(notificationTimeouts[i]);
        }
    });

    $("#system-notifications").on("mouseout", ".system-notification", function () {
        notificationMouseout($(this));
    });

    $(document).keyup(function (e) {
        var $overlay = $('.overlay-background:visible').last();

        if ($overlay.hasClass('overlay-background-react')) {
            return;
        }

        if (e.keyCode == 27 && !$overlay.hasClass('overlay-no-close')) { // esc
            closeOverlay($overlay);
        }
    });

    $(document).on('click', '.overlay-cancel', function () {
        var $overlay = $(this).closest('.overlay-background');

        if ($overlay.hasClass('overlay-background-react')) {
            return;
        }

        closeOverlay($overlay);
    });

    $(".copy-link-container").click(function () {
        var $link = $(this).find(".copy-link-value"),
            $info = $(this).find(".copy-link-info");

        $link.select();
        document.execCommand("copy");
        $link.blur();

        $info.text($info.data("link-saved-text"));
    });

    tooltipSelectors.forEach((tooltipSelector) => {
        $(document).on('mouseenter taphold', tooltipSelector.parent, function () {
            const $parent = $(this);
            const $tooltip = $parent.find(tooltipSelector.tooltip);
            if ($parent.hasClass('no-adjust')) {
                return;
            }
            if (!$tooltip.hasClass('tooltip-small')) {
                adjustBox($tooltip, $parent);
                $tooltip.css('margin', '0');
            }

            let tooltipWidth = $tooltip.outerWidth();
            let tooltipHeight = $tooltip.outerHeight();
            let parentWidth = $parent.outerWidth();
            let parentHeight = $parent.outerHeight();
            let parentLocationY = $parent.offset().top;
            let parentLocationX = $parent.offset().left;
            let tooltipTopFix = tooltipSelector.tooltip === '.tooltip-small' ? 10 : 15;

            $tooltip.appendTo('body');
            $tooltip.show();
            $tooltip.offset({ top: parentLocationY - tooltipHeight - tooltipTopFix, left: parentLocationX + parentWidth / 2 - tooltipWidth / 2 });
            $tooltip.css('bottom', 'auto');
            $tooltip.css('right', 'auto');
            $parent.addClass('tooltip-state-hover');

            $parent.on('mouseleave', function () {
                if ($tooltip.hasClass('tooltip-always-visible')) {
                    return;
                }
                $tooltip.hide();
                $tooltip.appendTo($parent);
                $parent.removeClass('tooltip-state-hover');
            });

            $tooltip.on('mouseenter', function () {
                $tooltip.show();
                $tooltip.appendTo('body');
                $parent.addClass('tooltip-state-hover');
            });

            $tooltip.on('mouseleave', function (e) {
                if ($tooltip.hasClass('tooltip-always-visible')) {
                    return;
                }
                $tooltip.hide();
                $tooltip.appendTo($parent);
                $parent.removeClass('tooltip-state-hover');
            });

            if (!$tooltip.hasClass('tooltip-small')) {
                adjustBox($tooltip, $parent);
                if ($tooltip.hasClass('fix-overflow-top')) {
                    $tooltip.offset({ top: parentLocationY + parentHeight + tooltipTopFix });
                }
            }
        });
    });

    $(document).on('click', 'li.dropdown-submenu > a', function (e) {
        e.stopPropagation();
        e.preventDefault();
        $('.dropdown-backdrop').remove();
        $dropdown = $(this).parent('.dropdown-submenu');
        $dropdownMenu = $(this).next('.dropdown-menu');
        
        let dropdownLocationY = $dropdown.offset().top;
        let dropdownHeight = $dropdown.outerHeight();        
        let dropdownMenuHeight = $dropdownMenu.outerHeight();

        $dropdown.toggleClass('dropup',window.innerHeight < dropdownLocationY + dropdownMenuHeight + dropdownHeight);
        $dropdown.toggleClass('open', $dropdown.hasClass('open'));
    });

    $(document).on('show.bs.dropdown', '.dropdown', function () {
        const $dropdown = $(this);
        const $dropdownMenu = $dropdown.find('.dropdown-menu').first();

        $('.dropdown-backdrop').remove();

        function hideDropdown() {
            $dropdownMenu.appendTo($dropdown);
            $dropdownMenu.removeClass('dropdown-visible');
            $dropdownMenu.removeAttr('style');
            $dropdownMenu.find('.dropdown-menu').removeAttr('style');
        }

        if ($dropdownMenu.hasClass('dropdown-menu-header')) {
            return;
        }

        let dropdownLocationY = $dropdown.offset().top;
        let dropdownLocationX = $dropdown.offset().left;
        let dropdownWidth = $dropdown.outerWidth();
        let dropdownHeight = $dropdown.outerHeight();

        $dropdownMenu.css('min-width', dropdownWidth);

        let dropdownMenuWidth = $dropdownMenu.outerWidth();
        let dropdownMenuHeight = $dropdownMenu.outerHeight();
        
        let top = (window.innerHeight > dropdownLocationY + dropdownMenuHeight + dropdownHeight)
            ? dropdownLocationY + dropdownHeight
            : dropdownLocationY - dropdownMenuHeight;
        
        if (top - window.scrollY < 0) {
            top = dropdownLocationY + dropdownHeight
        }

        $dropdownMenu.appendTo('body');
        $dropdownMenu.addClass('dropdown-visible');
        $dropdownMenu.css('position', 'absolute');
        $dropdownMenu.css('display', 'block');
        $dropdownMenu.css('top', top);
        $dropdownMenu.css('right', 'auto');
        $dropdownMenu.css('z-index', '9999');

        if ($dropdownMenu.hasClass('dropdown-menu-right')) {
            $dropdownMenu.css('left', dropdownLocationX + dropdownWidth - dropdownMenuWidth);
        } else {
            $dropdownMenu.css('left', dropdownLocationX);
        }
        
        // prevent to clip from left side of screen
        if($dropdownMenu[0] && $dropdownMenu[0].getBoundingClientRect().x < 0) {
            $dropdownMenu.css('left', 0);
        }

        $dropdown.on('hidden.bs.dropdown', function () {
            hideDropdown();
        });

        $(document).on('click', function (e) {
            const target = e.target;
            if (target !== $dropdownMenu[0]) {
                hideDropdown();
            }
        });
    });

    $(document).on('mouseenter', '[data-overflow-title]', function () {
        var $this = $(this);
        if (this.offsetWidth < this.scrollWidth) {
            !$this.attr('title') && $this.attr('title', $this.data('overflow-title'));
        } else {
            $this.removeAttr('title');
        }
    });

    $(document).on('mouseenter', '[data-overflow-tooltip]', function () {
        var $this = $(this);
        if (this.offsetWidth < this.scrollWidth) {
            if (!$this.hasClass('has-tooltip-small')) {
                $this.addClass('has-tooltip-small');
                $this.append(`<span class="tooltip-small">${sanitizeTheHtml($this.data('overflow-tooltip'))}</span>`);
                $this.trigger('mouseenter')
            }
        } else {
            $this.removeClass('has-tooltip-small');
            $this.find('.tooltip-small').remove();
        }
    });

    waitElements({
        selector: '.overlay-background .overlay .overlay-header',
        parent: document.body,
        recursive: true,
        done: function (overlayHeader) {
            const $overlayHeader = $(overlayHeader);
            if ($overlayHeader.find('.overlay-cancel-mark').length || $overlayHeader.data('hide-close') === true) {
                return;
            }
            $('<div class="overlay-cancel-mark overlay-cancel"></div>').prependTo($overlayHeader);
        },
    });

    waitElements({
        selector: '.init-navbar-portrait',
        parent: document.body,
        recursive: true,
        done: function (navbarPortrait) {
            const $navbarPortrait = $(navbarPortrait);
            let userphoto = $navbarPortrait.data('userphoto');
            let firstName = $navbarPortrait.data('first_name');
            let lastName = $navbarPortrait.data('last_name');
            let options = $navbarPortrait.data('options');

            userphoto = userphoto && userphoto !== 'None' ? userphoto : '';

            $navbarPortrait.replaceWith(getPortraitHtml(userphoto, firstName, lastName, options));
        },
    });

    waitElements({
        selector: '.init-get-score-html',
        parent: document.body,
        recursive: true,
        done: function (element) {
            const $element = $(element);
            const data = $element.data('score');
            $element.replaceWith(getScoreHtml(data));
        },
    });

    waitElements({
        selector: '.navbar-portrait .img[data-src]:not([data-src=""])',
        parent: document.body,
        recursive: true,
        done: function (navbarPortrait) {
            if (_.isEmpty($(navbarPortrait).data('src'))) return;
            visibleToViewport({
                element: navbarPortrait,
                callback: (element) => {
                    const $navbarPortrait = $(element);
                    const url = $navbarPortrait.data('src');
                    if (!url) {
                        $navbarPortrait.removeClass('skeleton-box');
                        return
                    };
                    window.cachedImages.add(url);
                    $('<img/>')
                        .attr('src', url)
                        .on('load', function () {
                            $navbarPortrait.addClass('fadeIn');
                            $navbarPortrait.css('background-image', `url(${url})`);
                            $navbarPortrait.removeAttr('data-src');
                            $navbarPortrait.removeClass('skeleton-box');
                            $(this).remove();
                            setTimeout(() => $navbarPortrait.removeClass('fadeIn'), 800);
                        });
                },
            });
        },
    });

    waitElements({
        selector: '.info-box, .tooltip, .tooltip-small',
        parent: document.body,
        recursive: true,
        done: function (infobox) {
            onChildChange({
                parent: infobox,
                done: function (infobox) {
                    adjustBox($(infobox));
                }
            });
        }
    });

    waitElements({
        selector: '.tabs a',
        parent: document.body,
        recursive: true,
        done: function (tab) {
            setTabCount(tab);
        },
    });

    waitElements({
        selector: '.init-datetimepicker',
        parent: document.body,
        recursive: true,
        done: function (input) {
            const $input = $(input);
            const customOptions = $input.data('datepicker_options');

            if (!$input.hasClass('hasDatepicker')) {
                let datetimepickerOptions = {
                    dateFormat: "yy-mm-dd",
                    timeFormat: "HH:mm",
                    controlType: 'select',
                    oneLine: true
                };

                if (customOptions) {
                    datetimepickerOptions = _.merge(datetimepickerOptions, customOptions);
                }

                $input.datetimepicker(datetimepickerOptions);
            }
        }
    });

    waitElements({
        selector: '.overlay-background',
        parent: document.body,
        recursive: true,
        done: function (overlay) {
            const $overlay = $(overlay);
            if (!$overlay.hasClass('Modal') && !$overlay.hasClass('overlay-background-react')) {
                $overlay.appendTo('body');
            }
        }
    });

    let overlayIdSuffix = 1;
    waitElements({
        selector: '[data-popup]',
        parent: document.body,
        recursive: true,
        done: function (link) {
            // This function makes sure that the overlays have a unique ID which is difficult to achieve especially in Alpaca forms.
            const $link = $(link);
            const overlayId = $link.data('popup');
            const newOverlayId = `${overlayId}-${overlayIdSuffix}`;
            overlayIdSuffix++;
            $link.data('popup', newOverlayId);
            $link.attr('data-popup', newOverlayId);
            $(`.overlay-background#${overlayId}`).attr('id', newOverlayId);
        }
    });

    waitElements({
        selector: '.hide-overflow',
        parent: document.body,
        recursive: true,
        done: function (element) {
            const $element = $(element);
            let text = $element.text().trim();
            $element.attr('title', text);
        }
    });

    waitElements({
        selector: '.icon-custom-sparkles',
        parent: document.body,
        recursive: true,
        done: function (icon) {
            const $icon = $(icon);
            $icon.html(`
                <svg viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6.657 1.247C6.767 0.917 7.233 0.917 7.343 1.247L7.988 3.184C8.12997 3.6098 8.36917 3.99668 8.68664 4.31398C9.00411 4.63127 9.39112 4.87026 9.817 5.012L11.753 5.657C12.083 5.767 12.083 6.233 11.753 6.343L9.816 6.988C9.3902 7.12997 9.00332 7.36917 8.68602 7.68664C8.36873 8.00411 8.12974 8.39112 7.988 8.817L7.343 10.753C7.31929 10.8253 7.27335 10.8882 7.21176 10.9328C7.15016 10.9774 7.07605 11.0014 7 11.0014C6.92395 11.0014 6.84984 10.9774 6.78824 10.9328C6.72665 10.8882 6.68072 10.8253 6.657 10.753L6.012 8.816C5.87013 8.39031 5.63108 8.00349 5.31379 7.68621C4.99651 7.36892 4.60969 7.12987 4.184 6.988L2.247 6.343C2.17474 6.31928 2.11181 6.27335 2.0672 6.21176C2.02259 6.15016 1.99857 6.07605 1.99857 6C1.99857 5.92395 2.02259 5.84983 2.0672 5.78824C2.11181 5.72665 2.17474 5.68072 2.247 5.657L4.184 5.012C4.60969 4.87013 4.99651 4.63108 5.31379 4.31379C5.63108 3.99651 5.87013 3.60969 6.012 3.184L6.657 1.247Z" fill="currentColor" style="transform: none; transform-origin: 6.99954px 6.00045px;" transform-origin="6.999535083770752px 6.000449895858765px"></path>
                    <path d="M2.39415 8.03423C2.36334 8.05648 2.34032 8.08788 2.32838 8.12396L2.00596 9.09204C1.93505 9.30488 1.81554 9.49828 1.65691 9.65691C1.49828 9.81554 1.30488 9.93505 1.09204 10.006L0.123957 10.3284C0.0878781 10.3403 0.0564822 10.3633 0.0342297 10.3941C0.0119772 10.425 0 10.462 0 10.5C0 10.538 0.0119772 10.575 0.0342297 10.6059C0.0564822 10.6367 0.0878781 10.6597 0.123957 10.6716L1.09204 10.994C1.30488 11.0649 1.49828 11.1845 1.65691 11.3431C1.81554 11.5017 1.93505 11.6951 2.00596 11.908L2.32838 12.876C2.34032 12.9121 2.36334 12.9435 2.39415 12.9658C2.42496 12.988 2.46199 13 2.5 13C2.538 13 2.57504 12.988 2.60585 12.9658C2.63666 12.9435 2.65967 12.9121 2.67162 12.876L2.99404 11.908C3.06495 11.6951 3.18446 11.5017 3.34309 11.3431C3.50172 11.1845 3.69512 11.0649 3.90796 10.994L4.87604 10.6716C4.91212 10.6597 4.94352 10.6367 4.96577 10.6059C4.98802 10.575 5 10.538 5 10.5C5 10.462 4.98802 10.425 4.96577 10.3941C4.94352 10.3633 4.91212 10.3403 4.87604 10.3284L3.90796 10.006C3.47641 9.86183 3.13817 9.52359 2.99404 9.09204L2.67162 8.12396C2.65967 8.08788 2.63666 8.05648 2.60585 8.03423C2.57504 8.01198 2.538 8 2.5 8C2.46199 8 2.42496 8.01198 2.39415 8.03423Z" fill="currentColor" style="transform: none; transform-origin: 2.5px 10.5px;" transform-origin="2.5px 10.5px"></path>
                    <path d="M2.4365 0.0201631C2.41807 0.0332787 2.40418 0.0518105 2.39677 0.0731818L2.20383 0.654117C2.11749 0.913811 1.91404 1.11721 1.65428 1.20353L1.0732 1.39717C1.05182 1.40458 1.03329 1.41847 1.02017 1.4369C1.00705 1.45532 1 1.47738 1 1.5C1 1.52262 1.00705 1.54468 1.02017 1.5631C1.03329 1.58153 1.05182 1.59542 1.0732 1.60283L1.65353 1.79647C1.78154 1.83905 1.89786 1.91087 1.99326 2.00624C2.08865 2.10161 2.16049 2.2179 2.20308 2.34588L2.39677 2.92682C2.40418 2.94819 2.41807 2.96672 2.4365 2.97984C2.45494 2.99295 2.477 3 2.49962 3C2.52225 3 2.54431 2.99295 2.56275 2.97984C2.58118 2.96672 2.59507 2.94819 2.60248 2.92682L2.79617 2.34588C2.83876 2.2179 2.9106 2.10161 3.00599 2.00624C3.10139 1.91087 3.21771 1.83905 3.34572 1.79647L3.9268 1.60283C3.94818 1.59542 3.96671 1.58153 3.97983 1.5631C3.99295 1.54468 4 1.52262 4 1.5C4 1.47738 3.99295 1.45532 3.97983 1.4369C3.96671 1.41847 3.94818 1.40458 3.9268 1.39717L3.34572 1.20353C3.08596 1.11721 2.88251 0.913811 2.79617 0.654117L2.60248 0.0731818C2.59507 0.0518105 2.58118 0.0332787 2.56275 0.0201631C2.54431 0.00704757 2.52225 0 2.49962 0C2.477 0 2.45494 0.00704757 2.4365 0.0201631Z" fill="currentColor" style="transform: none; transform-origin: 2.5px 1.5px;" transform-origin="2.5px 1.5px"></path>
                </svg>
            `);
        }
    });

    function initAttachmentPopup($popup) {
        if ($popup.data('init-attachment-popup')) {
            return;
        }
        $popup.data('init-attachment-popup', true);
        const $attachmentViewPopup = $popup.find('.render-attachment-view-popup');
        let link = $attachmentViewPopup.data('link');
        let popup_view = getFilePopupView(link);
        $attachmentViewPopup.html(popup_view);
    }

    $(document).on('click', '.attachment-popup', function () {
        const $this = $(this);
        const popupId = $this.data('popup');
        const $popup = $(`#${popupId}`).show();
        initAttachmentPopup($popup);
    });

    $(document).on('click', '.overlay-navigation-link', function () {
        var $overlay = $(this).closest('.attachment-overlay'),
            currentIndex = $overlay.data('overlay_index'),
            navigationDirection = $(this).data('navigation_direction'),
            newIndex = currentIndex + navigationDirection;
        const $targetOverlay = $('.attachment-overlay[data-overlay_index="' + newIndex + '"]');
        $overlay.hide();
        $targetOverlay.show();
        initAttachmentPopup($targetOverlay);
    });

    waitElements({
        selector: '.toggle-sidebar-container',
        parent: document.body,
        recursive: true,
        done: () => {
            initCollapsibleSideBar();
            toggleSideBar();
        }
    });

    waitElements({
        selector: '.settings-photo-box-container',
        parent: document.body,
        recursive: true,
        done: function (settingsPhotoBoxContainer) {
            const $settingsPhotoBoxContainer = $(settingsPhotoBoxContainer);
            const $settingsPhotoBox = $settingsPhotoBoxContainer.find('.settings-photo-box');

            function settingsPhotoBoxHasPhoto() {
                return $settingsPhotoBox.css('background-image')
                    && $settingsPhotoBox.css('background-image') !== 'none'
                    && $settingsPhotoBox.css('background-image') !== 'url("")';
            }

            $settingsPhotoBox.toggleClass('settings-photo-box-has-photo', settingsPhotoBoxHasPhoto());

            onStyleChange({
                element: $settingsPhotoBox[0],
                done: function () {
                    $settingsPhotoBox.toggleClass('settings-photo-box-has-photo', settingsPhotoBoxHasPhoto());
                }
            });
        }
    });

    waitElements({
        selector: '.alert',
        parent: document.body,
        recursive: true,
        done: function (el) {
            const $alert = $(el);
            let alertHeadingText;
            let alertIconClass;

            if ($alert.hasClass('alert-success')) {
                alertHeadingText = global_i18n('success');
                alertIconClass = 'icon-svg-check-circle';
            } else if ($alert.hasClass('alert-info')) {
                alertHeadingText = global_i18n('info');
                alertIconClass = 'icon-svg-info-circle';
            } else if ($alert.hasClass('alert-warning')) {
                alertHeadingText = global_i18n('warning');
                alertIconClass = 'icon-svg-alert-circle';
            } else if ($alert.hasClass('alert-danger')) {
                alertHeadingText = global_i18n('error');
                alertIconClass = 'icon-svg-x-circle';
            }

            if (!$alert.find('h4').length) {
                $alert.prepend(`<h4 class="alert-heading">${alertHeadingText}</h4>`);
            }

            if (!$alert.find('.alert-icon').length) {
                $alert.prepend(`<span class="alert-icon ${alertIconClass} no-spacing"></span>`);
            }
        }
    });

    waitElements({
        selector: '.welcome-banner',
        parent: document.body,
        recursive: true,
        done: function (welcomeBanner) {
            const $welcomeBanner = $(welcomeBanner);
            const welcomeBannerId = $welcomeBanner.data('welcome_banner_id');
            let welcomeBannerState = JSON.parse(localStorage.getItem('welcome-banner-closed')) || {};
            if (!welcomeBannerState[welcomeBannerId]) {
                $welcomeBanner.addClass('welcome-banner-show');
            }
        }
    });

    // Lazy load iframe
    waitElements({
        selector: 'iframe[data-src]:not([data-src=""])',
        parent: document.body,
        recursive: true,
        done: function (iframeElement) {
            if (_.isEmpty($(iframeElement).data('src'))) return;
            visibleToViewport({
                element: iframeElement,
                callback: (element) => {
                    const $iframe = $(element);
                    const url = $iframe.data('src');
                    const maxTries = 2;
                    let loaded = false;
                    let tries = 0;

                    if (!url) return;

                    const updateSrc = () => {
                        !loaded && $iframe.attr('src', url).removeAttr('data-src');
                    };

                    updateSrc();

                    const interval = setInterval(() => {
                        // refetch the document if not loaded  (issue with google docs preview API)
                        if (tries >= maxTries && interval) {
                            clearInterval(interval);
                        } else {
                            updateSrc();
                            tries++;
                        }
                    }, 4000);

                    $iframe.on('load', function () {
                        loaded = true;
                        clearInterval(interval);
                    });

                    $iframe.on('error', function () {
                        clearInterval(interval);
                    });
                },
            });
        },
    });

    $(document).on('click', 'a.close-icon', function (e) {
        e.preventDefault();
        $(this).closest('.settings-photo-box').css('background-image', 'none');
    });

    $(document).on('click', '.welcome-banner-close', function () {
        const $this = $(this);
        const $welcomeBanner = $this.closest('.welcome-banner');
        const welcomeBannerId = $welcomeBanner.data('welcome_banner_id');
        let welcomeBannerState = JSON.parse(localStorage.getItem('welcome-banner-closed')) || {};
        $welcomeBanner.removeClass('welcome-banner-show');
        welcomeBannerState[welcomeBannerId] = true;
        localStorage.setItem('welcome-banner-closed', JSON.stringify(welcomeBannerState));
    });

    $(document).on('dragover', '[data-drag_and_drop="true"]', function() {
        $(this).addClass('dragging-over');
    })
    $(document).on('dragend drop dragexit dragleave', '[data-drag_and_drop="true"]', function() {
        $(this).removeClass('dragging-over');
    });

    waitElements({
        selector: '.ui-slider',
        parent: document.body,
        recursive: true,
        done: (uiSlider) => {
            const $slider = $(uiSlider);
            const $sliderHandle = $slider.find('.ui-slider-handle');
            let fillWidth = $sliderHandle.prop('style').left;
            const $sliderFill = $(`<div class="ui-slider-fill job-custom-bg-color" style="width: ${fillWidth};"></div>`).prependTo($slider);
            const $sliderBadge = $(`<span class="badge ui-slider-badge">${getSliderValue($slider)}</span>`).prependTo($sliderHandle);

            onStyleChange({
                element: $sliderHandle[0],
                done: function (sliderHandle) {
                    const $slider = $(sliderHandle).closest('.ui-slider');
                    let fillWidth = $(sliderHandle).prop('style').left;
                    $sliderBadge.text(getSliderValue($slider));
                    $sliderFill.css('width', fillWidth);
                }
            });
        }
    });

    waitElements({
        selector: '.select2-hidden-accessible',
        parent: document.body,
        recursive: true,
        excludeDoneClass: true,
        done: function (select) {
            const select2Container = $(select).data('select2');
            handleSelect2HasValue(select2Container);
        }
    });

    $(document).on('change.select2', function (e) {
        const select2Container = $(e.target).data('select2');
        handleSelect2HasValue(select2Container);
    });

    $("form").each(function (index, value) {
        if (!$(this).find("input[name='csrf_token']").length && !$(this).hasClass("no-csrf")) {
            $(this).append("<input name=csrf_token type=hidden value=\"" + csrf_token + "\">");
        }
    });

    $('.ta-qr-code').each(function (index, container) {
        var url = $(container).data('url'),
            size = $(container).data('size') || 100;

        NewQRCode.render(container, url, size);
    });

    $('.select2-init').each(function (index, select) {
        var $select = $(select),
            placeholder = $select.attr('placeholder'),
            allowClear = $select.data('select2-allow-clear'),
            template = $select.data('template');
        const config = {
            width: '100%',
            placeholder: placeholder,
            allowClear: allowClear
        }
        if(select2ResultTemplates[template]) {
            config['templateResult'] = select2ResultTemplates[template]
        }
        $select.select2(config);
    });
    
    $(document).on('click', '.select2-button-container > a', function () {
        if ($(this).next('select').select2) {
            $(this).next('select').select2('open');
        }
    });

    $('.alpaca-form-render').each(function (index, form) {
        var $form = $(form),
            json = $form.data('json');
        var alpaca_form = new alpacaForm();
        alpaca_form.init(null, $form);
        alpaca_form.updateJsonConfiguration(json);
    });

    $(document).on("change", "input.alpaca-control:file:not(.crop-image-input)", function () {
        const defaultFileOptions = {
            maxFileSize: 10485760
        };
        const $fieldContainer = $(this).closest('.alpaca-container-item');
        let alpacaOptions = $fieldContainer.length ? $fieldContainer.alpaca('get').options : {};
        let maxFileSize = alpacaOptions.maxFileSize || defaultFileOptions.maxFileSize;
        var target = $(this).next(".attachmentFile");
        $(target).empty();

        if (this.files.length) {
            if (this.files[0].size <= maxFileSize) {
                var extension = this.files[0].name.split('.').pop().toLowerCase();
                var isTrue = check_file_extension(extension, attachment_extensions);
                var $outerDiv = $(this).parent().parent();
                if (isTrue) {
                    addAttachmentFile(this.files[0].name, target);
                    if ($outerDiv.hasClass("alpaca-required")) {
                        $outerDiv.removeClass("has-error alpaca-invalid");
                        $outerDiv.find(".alpaca-message").remove();
                    }
                } else {
                    notification(global_i18n("file_not_allowed_try_instead_message"), 'none');
                    this.value = "";
                }
            } else {
                notification(global_i18n("file_too_large_message").replace('10', `${maxFileSize / (1024 * 1024)}`), 'none');
                this.value = "";
            }
        }
    });

    $(document).on("change", "input.crop-image-input:file", function () {
        const target = $(this).next(".attachmentFile");
        $(target).empty();
        const name = $(this).attr('name');
        const validator = attachmentValidatorFactory(name);
        if (this.files.length) {
           validator.validate(this.files[0], target, this);
        }
    });


    $(document).on("click", ".attachmentFile .remove-filter", function () {
        var deleteHiddenInputs = $(this).attr("id");
        $("." + deleteHiddenInputs).remove();
        $(this).parent().prev("input.alpaca-control:file").val("");
        $(this).parent().empty();
    });

    $(document).on('keydown', '.prevent-enter-submit input:not([type="submit"]), .prevent-enter-submit select', function (e) {
        if (e.key === 'Enter') {
            e.preventDefault();
        }
    });

    $(document).on('click', '#ui_lang', function (e) {
        $(this).toggleClass("ui_lang-hover", !$(this).hasClass("ui_lang-hover") && !$(e.target).hasClass('language-selection'));
    });

    $(document).on('select2:open', function(e) {
        // Overwrites Select2's "feature" when it prevents scrolling on the page when Select2 overlay is shown.
        const evt = 'scroll.select2';
        $(e.target).parents().off(evt);
        $(window).off(evt);
    });

    onVisible({
        id: 0,
        selector: '.select2-hidden-accessible',
        done: function (el) {
            var $el = $(el);
            var options = $el.data('select2').options.options;
            $el.select2(options);
        }
    });

    onVisible({
        id: 1,
        selector: 'label[for="talent_image"] .show-span, label[for="applicant_image"] .show-span',
        done: function (el) {
            placeAnimation({
                animation_name: 'camera-animation',
                anchor: 'label[for="talent_image"], label[for="applicant_image"]',
                id: "camera-animation",
                size: 70,
                offset: ['0', '70px']
            });
        },
        onInvisible: function (el) {
            const $el = $(el);
            if (!$el.hasClass('show-span') ||
                !$el.closest('label').is(':visible')) {
                $('#lottie-player-camera-animation').remove();
            }
        }
    })

    onVisible({
        id: 2,
        selector: '.dataTables_wrapper table',
        done: function (table) {
            $(table).DataTable().responsive.recalc();
        }
    })

    var $cookieConsentContainer = $('#cookie-consent-overlay');
    if ($cookieConsentContainer.length) {
        CookieConsentPopup.init($cookieConsentContainer);
    }

    if (getAllUrlParams().show) {
        $('#' + getAllUrlParams().show).show();
    }

    $(document).on('mouseenter', '.panel-heading .btn', function () {
        // This makes it so that clicking on a button inside the panel heading doesn't collapse the panel unintentionally
        $(this).closest('.panel-heading').attr('data-toggle', '');
    }).on('mouseleave', '.panel-heading .btn', function () {
        $(this).closest('.panel-heading').attr('data-toggle', 'collapse');
    });

    $('.applicant-name, .applicant-email, .applicant-phone').each(function() {
        var $container = $(this);
        var html = $container.html();
        var newHtml = html.replace(/(+)/g, '<span class="a-dots">$1</span>');
        $container.html(newHtml);
    });
    adjustHeader();
    stickyElements();
    setOverlayInitialStateListener();
    setDatepickerDefaults(lang);

});

$(window).scroll(function () {
    stickyElements();
    $('.info-box, .tooltip').each(function (i, infobox) {
        var $infobox = $(infobox);
        if ($infobox.is(':visible')) {
            adjustBox($(infobox));
        }
    })
});

$(window).resize(function () {
    adjustHeader();
    stickyElements();
    listingPageBodyScroll();
    setTabsCount();
});

$(window).on('load', function () {
    $('body').addClass('window-loaded');
    adjustHeader();
    listingPageBodyScroll();
    $('.listing-page__body').on('scroll', function(e) {
        $(this).find('table.table-sticky-header').toggleClass('table-header-shadow', $(this)[0].scrollTop > 100);
    })
});

window.onbeforeunload = function () {
    var $unsavedContent = $('.unsaved-content'),
        unsavedContent = $unsavedContent.length > 0,
        warningMessage = $unsavedContent.data('unsaved-warning-message');

    if (unsavedContent) {
        if (warningMessage) {
            return warningMessage;
        } else {
            return true;
        }
    }
};

(function () {
    var $savingIndicator = $('#global-saving-indicator');
    var $savingIndicatorMessage = $savingIndicator.find('.saving-indicator-message');
    var savesInProgress = 0;
    var hideTimeout = null;

    // Shows a saving indicator
    // Returns a function, that when called, should hide
    // the indicator if there's no more saves in progress
    window.showSavingIndicator = function () {
        clearTimeout(hideTimeout);
        $savingIndicator.addClass('visible').removeClass('saved');
        savesInProgress++;

        return function () {
            savesInProgress = Math.max(0, savesInProgress - 1);
            if (savesInProgress < 1) {
                $savingIndicator.addClass('saved');
                hideTimeout = setTimeout(function () {
                    $savingIndicator.removeClass('visible')
                }, 2000)
            }
        }
    }

    window.hideSavingIndicator = function () {
        if (savesInProgress) {
            $savingIndicator.removeClass('visible');
            savesInProgress--;
        }
    }
})();

function getUser(callback) {
    $.ajax({
        url: '/api/users-dev/me',
        type: 'GET',
        headers: {'Accept': 'application/vnd.talentadore.v2+json'},
        dataType: 'json',
    }).done(function (data) {
        let user = {
            first_name: data.first_name ? data.first_name.toLowerCase() : '',
            last_name: data.last_name ? data.last_name.toLowerCase() : ''
        }
        callback(user);
    })
}

function getValidatedPasswordPair(password, passwordConfirm) {
    let matched = password === passwordConfirm;
    if (matched && password.length >= 12) {
        return {"password": password, "confirm": passwordConfirm}
    }
    return {"matched": matched}
}

function pwStrengthOptions($passInput, $confirmInput, $button) {
    let firstName, lastName,
        $bothInputs = $passInput.add($confirmInput),
        badPasswords = [9081961707115,
            70749688034794,
            11149980691919,
            22842987119764,
            74898544888388,
            10912611028632,
            77906422832350,
            25953086908438,
            77514086242607,
            16754068037679];

    $button.prop('disabled', true);

    function hash(string) {
        const H = 38,
            mx = 90071992547409;
        let total = 0;
        for (var i = 0; i < string.length; i++) {
            total = (H * total % mx + string.charCodeAt(i)) % mx;
        }
        return total
    }

    function wordInPassword(word, password) {
        return (word && word.length > 4) ? password.toLowerCase().search(word) !== -1 : false
    }

    function addPasswordError($whereAfter, errorMsg) {
        $whereAfter.after(`<span class="password-error password-verdict">${errorMsg}</span>`);
    }

    function clearPasswordErrors() {
        $(".password-error").remove();
    }

    $bothInputs.on('input', function () {
        let password = $passInput.val(),
            passwordConfirm = $confirmInput.val(),
            passwordPair = getValidatedPasswordPair(password, passwordConfirm),
            namesInPassword = wordInPassword(lastName, password) || wordInPassword(firstName, password),
            inBad = badPasswords.indexOf(hash(password.toLowerCase())) !== -1,
            passwordMatchOk = passwordPair["password"];
        clearPasswordErrors();
        if (passwordMatchOk && !namesInPassword && !inBad) {
            $button.prop('disabled', false);
            return
        }
        $button.prop('disabled', true);
        if (namesInPassword) {
            addPasswordError($(".error-list"), global_i18n('user_name_password_i18n'));
        } else if (inBad) {
            addPasswordError($(".error-list"), global_i18n('forbidden_password_i18n'));
        }
        if (!passwordMatchOk && !passwordPair["matched"] && passwordConfirm.length >= 1) {
            addPasswordError($confirmInput, global_i18n('password_and_confirm_no_match_i18n'));
        }
    });

    getUser(function (user) {
        firstName = user.first_name;
        lastName = user.last_name;
    });

    let options = {
        common: {
            minChar: 12,
            maxChar: 128,
        },
        rules: {
            activated: {
                wordNotEmail: false,
                wordMinLength: true,
                wordMaxLength: true,
                wordInvalidChar: false,
                wordSimilarToUsername: true,
                wordSequences: true,
                wordTwoCharacterClasses: false,
                wordRepetitions: true,
                wordLowercase: false,
                wordUppercase: false,
                wordOneNumber: false,
                wordThreeNumbers: false,
                wordOneSpecialChar: false,
                wordTwoSpecialChar: false,
                wordUpperLowerCombo: false,
                wordLetterNumberCombo: false,
                wordLetterNumberCharCombo: false,
                wordIsACommonPassword: false
            }
        },
        ui: {
            bootstrap3: true,
            showErrors: true,
            progressBarMinWidth: 20,
            spanError: function (options, key) {
                var text = options.i18n.t(key);
                if (!text) {
                    return '';
                }
                return '<span style="color: #2f2f2f">' + text + '</span>';
            },
        }
    };
    options.i18n = {
        t: function (key) {
            var result = global_i18n(key);
            return result === key ? '' : result;
        }
    };
    return options;
}

var CropImage = (function() {
    let img2crop, cropper, $imageCropOverlay, config;

    const aspectRatios = {
        1: 3 / 1,   // Classic
        4: 16 / 9,  // Elegant
        5: 16 / 9,  // Simple
        6: 3 / 1,   // Light
        7: 3 / 1,   // Dark
        8: 3 / 1,   // Chic
    };
    const aspectRatiosText = {
        1: '3:1',   // Classic
        4: '16:9',  // Elegant
        5: '16:9',  // Simple
        6: '3:1',   // Light
        7: '3:1',   // Dark
        8: '3:1',   // Chic
    };

    const baseConfig = {
                minCropBoxWidth: 200,
                autoCropArea: 1,
                preview: $(".crop-preview"),
                viewMode: 2,
                aspectRatio: getAspectRatio()
    }

    const croppedCanvasConfig = {
                minWidth: 640,
                minHeight: 480,
                maxWidth: 4096,
                maxHeight: 4096,
                fillColor: "#fff",
                imageSmoothingEnabled: true,
                imageSmoothingQuality: "high"
    }
    function getSelectedTemplate() {
        let $template = $('[name="new_job-template"]:checked');
        return $template.val();
    }

    function getAspectRatio() {
        return aspectRatios[getSelectedTemplate()];
    }

    function init(callback) {
        $imageCropOverlay = $('#image-crop-overlay');

        $imageCropOverlay.on('click', ".button-rotate-image", function () {
            cropper.rotate(90);
        });
        $imageCropOverlay.on('click', ".button-zoom-in", function () {
            cropper.zoom(0.1);
        });
        $imageCropOverlay.on('click', ".button-zoom-out", function () {
            cropper.zoom(-0.1);
        });
        $imageCropOverlay.on('click', ".button-aspect-ratio-default", function () {
            cropper.setAspectRatio(getAspectRatio());
        });
        $imageCropOverlay.on('click', ".button-aspect-ratio-free", function () {
            cropper.setAspectRatio(NaN);
        });

        $imageCropOverlay.on('click', ".submit-cropped-image", function () {
            cropper.getCroppedCanvas(config.croppedCanvas || croppedCanvasConfig).toBlob(function (blob) {
                if (callback) callback(blob, {
                    fieldName: cropper.fieldname,
                    fileName: img2crop.name
                });
            },"image/jpeg", 0.8);

            $imageCropOverlay.hide();
        });
    }

    function showCropper(that) {
        const image = $("#crop-image")[0];
        config = attachmentValidatorFactory($(that).attr('name')).getCropperConfig()

        img2crop = that.files[0];
        const baseOptions = config.cropper || baseConfig;
        $(that).val('');
        image.src = URL.createObjectURL(img2crop);
        if (cropper) cropper.destroy();
        cropper = new Cropper(image, baseOptions);
        cropper.fieldname = $(this).attr('name')
        const $buttonAspectRatioDefault = $imageCropOverlay.find('.button-aspect-ratio-default');
        let buttonAspectRatioDefaultText = $buttonAspectRatioDefault.data('text').replace('{}', aspectRatiosText[getSelectedTemplate()]);
        $buttonAspectRatioDefault.text(buttonAspectRatioDefaultText);

        $imageCropOverlay.show();
    }

    return {
        init: init,
        showCropper: showCropper
    };
})();


var CropOikotieImage = (function() {
    let img2crop, cropper, $imageCropOverlay, config;

    function init(callback) {
        $imageCropOverlay = $('#oikotie-image-crop-overlay');

        $imageCropOverlay.on('click', ".submit-cropped-image", function () {
            cropper.getCroppedCanvas(config.croppedCanvas).toBlob(function (blob) {
                if (callback) callback(blob, {
                    fieldName: cropper.fieldname,
                    fileName: img2crop.name
                });
            },"image/jpeg", 0.8);

            $imageCropOverlay.hide();
        });

        $imageCropOverlay.on('click', ".overlay-cancel", function () {
            const target = $(`#${cropper.fieldname}`).next('.attachmentFile');
            target.empty();
        });
    }

    function showCropper (that) {
            let image = $("#crop-oikotie-image")[0];
            config = attachmentValidatorFactory($(that).attr('name')).getCropperConfig();
            img2crop = that.files[0];

            const baseOptions = config.cropper;
            $(that).val('');
            image.src = URL.createObjectURL(img2crop);
            if (cropper) cropper.destroy();
            cropper = new Cropper(image, baseOptions);
            cropper.fieldname = $(that).attr('name')
            $imageCropOverlay.show();
    }

    return {
        init: init,
        showCropper: showCropper
    };
})();


class AttachmentValidator {

    constructor(name) {
        this.name = name;
    }

    validate(file, target, that) {
        const allowedExtensions = this.allowedExtensions();
        const allowedFileSize = this.allowedFileSize();
        const cropper = this.getCropper();

        if (file.size < allowedFileSize) {
            let img2crop = file;
            const image = new Image();
            image.src = URL.createObjectURL(img2crop);
            const extension = img2crop.name.split('.').pop().toLowerCase();
            const isValid = check_file_extension(extension, allowedExtensions);
            const $outerDiv = $(that).parent().parent();
            if (isValid) {
                addAttachmentFile(img2crop.name, target);
                if ($outerDiv.hasClass("alpaca-required")) {
                    $outerDiv.removeClass("has-error alpaca-invalid");
                    $outerDiv.find(".alpaca-message").remove();
                }
                if (cropper.showCropper && typeof CropOikotieImage.showCropper === 'function') {
                    cropper.showCropper(that);
                }
            } else {
                notification(global_i18n("image_not_allowed_try_instead_message").replace('{imagetypes}', allowedExtensions.join(', ')));
                that.value = "";
            }
        } else {
            const formatter = getNumberFormatter({ style: 'unit', unit: 'megabyte' })
            notification(global_i18n("image_too_large_message").replace('{size}', `${formatter.format(allowedFileSize / (1024 * 1024))}`), 'none');
            that.value = "";
        }
    }

    allowedExtensions() {
        return attachment_extensions
    }

    allowedFileSize() {
        return 10 * 1024 * 1024; // in bytes (10MB)
    }

    getCropperConfig() { return {} }

    getCropper() {
        return CropImage;
    }
}

class OikotieImageHeaderValidator extends AttachmentValidator {
    constructor(name) {
        super();
        this.name = name;
        this.dimensions = {
            width: 810, // in pixels,
            height: 540. // in pixels
        }
    }

    validator(validationObject) {
        const errors = [];
        const { extension, allowedExtensions, imgWidth, imgHeight, dimensions } = validationObject;
        if(!check_file_extension(extension, allowedExtensions)) {
            errors.push(
                global_i18n("image_not_allowed_try_instead_message").replace('{imagetypes}', allowedExtensions.join(', '))
            )
        }

        if(imgWidth < dimensions.width || imgHeight < dimensions.height) {
            errors.push(
                global_i18n("image_dimensions_incorrect").replace('{dimensions}', `${dimensions.width} x ${dimensions.height}`)
            )
        }

        return errors;
    }

    validate(file, target, that) {
        const allowedExtensions = this.allowedExtensions();
        const allowedFileSize = this.allowedFileSize();
        const dimensions = this.dimensions;
        const cropper = this.getCropper();
        const validator = this.validator;

        if (file.size < this.allowedFileSize()) {
            let img2crop = file;
            const image = new Image();
            image.src = URL.createObjectURL(img2crop);
            image.onload = function () {
                const imgWidth = this.naturalWidth;
                const imgHeight = this.naturalHeight;
                const extension = img2crop.name.split('.').pop().toLowerCase();
                const errors = validator({
                    extension,
                    allowedExtensions,
                    imgWidth,
                    imgHeight,
                    dimensions
                })

                if (!errors.length) {
                    const $outerDiv = $(that).parent().parent();
                    addAttachmentFile(img2crop.name, target);
                    if ($outerDiv.hasClass("alpaca-required")) {
                        $outerDiv.removeClass("has-error alpaca-invalid");
                        $outerDiv.find(".alpaca-message").remove();
                    }
                    if (CropOikotieImage.showCropper && typeof CropOikotieImage.showCropper === 'function') {
                        cropper.showCropper(that);
                    }
                } else {
                    notification(errors.join('<br>'));
                    that.value = "";
                }
            }

        } else {
            const formatter = getNumberFormatter({ style: 'unit', unit: 'megabyte' })
            notification(global_i18n("image_too_large_message").replace('{size}', `${formatter.format(allowedFileSize / (1024 * 1024))}`), 'none');
            that.value = "";
        }
    }

    allowedExtensions() {
        return ['jpeg', 'jpg', 'png'];
    }

    allowedFileSize() {
        return 2 * 1024 * 1024; // in bytes (2MB)
    }

    setBlob(blob, options) {
        const { fileName } = options
        const inputElement = document.getElementById(this.name);

        if(!inputElement) return;

        const file = new File([blob], fileName);

        const dataTransfer = new DataTransfer();
        dataTransfer.items.add(file);

        inputElement.files = dataTransfer.files;
        inputElement.dispatchEvent(new Event('input'));
    }

    getCropper() {
        return CropOikotieImage;
    }

     getCropperConfig() {
        const { width, height } = this.dimensions;

        return {
            'cropper': {
                minCropBoxWidth: width,
                autoCropArea: 1,
                preview: $(".crop-preview"),
                viewMode: 1,
                aspectRatio: width / height,
                responsive: true,
                zoomable: false,
                zoomOnTouch: false,
                zoomOnWheel: false,
                scalable: false,
                rotatable: true,
            },
            'croppedCanvas': {
                minWidth: width,
                maxWidth: width,
                maxHeight: height,
                imageSmoothingEnabled: true,
                imageSmoothingQuality: "high"
            }
        }
    }
}

function attachmentValidatorFactory(name)  {
    if (name === "oikotie_header_image") {
        return new OikotieImageHeaderValidator(name);
    }
    return new AttachmentValidator(name);
}

function nextStep(currentStep) {
    let $activeStep = $('.content-wrapper[data-step="' + currentStep + '"]');
    let $nextStep = $('.content-wrapper[data-step="' + (currentStep + 1) + '"]');
    $activeStep.removeClass("animate-out-right animate-in-right animate-in-left").addClass("animate-out-left");

    setTimeout(function () {
        $activeStep.removeClass("active");
        $nextStep.addClass("active animate-in-right");
    }, 600);
}

function prevStep(currentStep) {
    let $activeStep = $('.content-wrapper[data-step="' + currentStep + '"]');
    let $prevStep = $('.content-wrapper[data-step="' + (currentStep + -1) + '"]')
    $activeStep.removeClass("animate-out-left animate-in-right animate-in-left").addClass("animate-out-right");

    setTimeout(function () {
        $activeStep.removeClass("active")
        $prevStep.addClass("active animate-in-left");
    }, 600);
}

function goToStep(step) {
    $('.content-wrapper').removeClass().addClass("panel content-wrapper");
    $('.content-wrapper[data-step="'+ step +'"]').addClass("active");
}

function goToLink(url) {
    window.location.href = url;
}

function getLabelsForSelect2Values(url, value, $field) {
    if (url && value && value.length > 0) {
        $.get(url, {"values[]": value}, function (result) {
            if (result["results"]) {
                $field.val(null);
                result["results"].forEach(function (item) {
                    var option = new Option(item.text, item.id, true, true);
                    $field.append(option).trigger('change');
                    $field.trigger({
                        type: 'select2:select'
                    });
                });
            }
        })
    }
}

function placeAnimation (animation) {
    if (animation.id) {
        $("#lottie-player-" + animation.id).remove();
    }
    const size = animation.size ? animation.size : 150;
    const sizeWidth = animation.position === 'static' ? 'auto' : `${size}px`;
    const player =  `<lottie-player
                        ${animation.id ? `id="lottie-player-${animation.id}"` : ''}
                        class="lottie-player-${animation.position}"
                        src="/static/animations/${animation.animation_name}.json"
                        background="transparent"
                        speed="1"
                        style="width:${sizeWidth}; height:${size}px;"
                        ${animation.loop ? "loop" : ""}
                        ${animation.autoplay || animation.autoplay === undefined ? "autoplay" : ""}>
                    </lottie-player>`;
    const $anchor = $(animation.anchor);

    if (animation.position === 'static') {
        $(player).appendTo($anchor);
    } else {
        const $player = $(player).appendTo(document.body);

        function positionAnimation() {
            const anchorOffset = $anchor.offset();
            $player.css('transform', 'none');
            $player.offset({ top: anchorOffset.top - size / 2, left: anchorOffset.left + $anchor.outerWidth(true) / 2 - size / 2 });
            animation.offset ? $player.css('transform', `translate(${animation.offset[0]}, ${animation.offset[1]})`) : null;
        }

        positionAnimation();
        const resizeObserver = new ResizeObserver(() => positionAnimation());
        resizeObserver.observe(document.body);
    }
}

function getFilterIds(plan, filters = []) {
    const recursiveFind = (plan) => {
        if (plan.items) {
            return plan.items.map(recursiveFind).flat();
        }
        if (filters.indexOf(plan.filter) !== -1) return plan.id;
    };
    const ids = recursiveFind(plan);
    if (ids) return ids.filter((id) => id);
    return [];
}

function excludeFiltersFromPlan(searchPlan, filters = []) {
    const excludeIds = window.getFilterIds(searchPlan.plan, filters);
    const updatedValues = _.pickBy(
        searchPlan.values,
        (value, id) => excludeIds.indexOf(+id) === -1,
    );
    return {
        ...searchPlan,
        values: {
            ...updatedValues,
        },
    };
}

        < x      20241209150345-8l 89BE   https://ats.talentadore.com/static/layout_main.js?v=4.6.0hm26-2964e10      n var $main_layout_attributes = $("#main_layout_attributes"),
    csrf_token = $main_layout_attributes.data("csrf_token"),
    attachment_extensions = $main_layout_attributes.data("attachment_extension"),
    global_i18n_object = $main_layout_attributes.data("global_i18n_object") || {},
    backToShoppingCartButton = $main_layout_attributes.data('back_to_shopping_cart_button'),
    googleMapsApiKey = $main_layout_attributes.data("google_maps_api_key"),
    lang = $('body').attr('lang'),
    loadedScripts = [];
    window.cachedImages = new Set();

const CURRENT_USER_ID = $('body').data('user-id');

    global_i18n_object['no_data_found_i18n'] = $main_layout_attributes.data('no_data_found_i18n');
    global_i18n_object['confirm_close_heading_i18n'] = $main_layout_attributes.data('confirm_close_heading_i18n');
    global_i18n_object['confirm_close_description_i18n'] = $main_layout_attributes.data('confirm_close_description_i18n');
    global_i18n_object['confirm_close_submit_i18n'] = $main_layout_attributes.data('confirm_close_submit_i18n');
    global_i18n_object['cancel_i18n'] = $main_layout_attributes.data('cancel_i18n');
    global_i18n_object['yes_i18n'] = $main_layout_attributes.data('yes_i18n');
    global_i18n_object['file_has_changed'] = $main_layout_attributes.data('file_has_changed_i18n');
    global_i18n_object['profile_image_has_changed'] = $main_layout_attributes.data('profile_image_has_changed_i18n');
    global_i18n_object['cloud_storage_issue'] = $main_layout_attributes.data('cloud_storage_issue_i18n');
    global_i18n_object['forbidden_password_i18n'] = $main_layout_attributes.data('forbidden_password_i18n');
    global_i18n_object['password_and_confirm_no_match_i18n'] = $main_layout_attributes.data('password_and_confirm_no_match_i18n');
    global_i18n_object['wordIsACommonPassword'] = $main_layout_attributes.data('forbidden_password_i18n');
    global_i18n_object['user_name_password_i18n'] = $main_layout_attributes.data('user_name_password_i18n');
    global_i18n_object['wordMinLength'] = $main_layout_attributes.data('word_min_length_i18n');
    global_i18n_object['errorList'] = $main_layout_attributes.data('error_list_i18n');
    global_i18n_object['veryWeak'] = $main_layout_attributes.data('very_weak_i18n');
    global_i18n_object['weak'] = $main_layout_attributes.data('weak_i18n');
    global_i18n_object['normal'] = $main_layout_attributes.data('normal_i18n');
    global_i18n_object['medium'] = $main_layout_attributes.data('medium_i18n');
    global_i18n_object['strong'] = $main_layout_attributes.data('strong_i18n');
    global_i18n_object['veryStrong'] = $main_layout_attributes.data('very_strong_i18n');

const svgIconsCache = {};

const tooltipSelectors = [
    {
        tooltip: '.tooltip',
        parent: '.has-tooltip',
    },
    {
        tooltip: '.tooltip-small',
        parent: '.has-tooltip-small',
    },
    {
        tooltip: '.info-box',
        parent: '.has-info-box',
    },
    {
        tooltip: '.info-box',
        parent: '.info-button-icon',
    },
];

$.ajaxSetup({
    beforeSend: function (xhr, settings) {
        if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
            xhr.setRequestHeader("X-CSRFToken", csrf_token);
        }
    }
});

var notificationId = 1;
var notificationTimeouts = [];

function getNumberFormatter(options) {
    return new Intl.NumberFormat(lang, options)
}

function jqEscape(str) { return str.replace(/[#;&,\.\+\*~':"!\^\$\[\]\(\)=>|\/\\]/g, '\\$&'); }

function notification(text, duration) {
    if (_.isEmpty(text)) {
        console.warn("notification text can't be undefined or null.");
        return;
    }
    var id = notificationId,
        time;

    if (!duration) {
        duration = 'fast';
    }

    if (duration === 'fast') {
        time = 4000;
    } else if (duration === 'slow') {
        time = 8000;
    } else if (duration === 'none') {
        time = 0;
    } else {
        time = 0;
    }

    if ($('.notification-text:contains(' + jqEscape(text) + ')')) {
        $('.notification-text:contains(' + jqEscape(text) + ')')
            .parents('.system-notification')
            .remove();
        // Don't duplicate the same notification: remove last one --> create new one
    }

    $(`<div class="system-notification" id="system-notification-${id}" data-time="${time}">\
        <div class="system-notification-inner">
            <span class="notification-text">
                <span class="notification-text-value">${text}</span>
            </span>
            <a class="close-notification">x</a>
        </div>
    </div>`)
        .appendTo('#system-notifications')
        .hide()
        .fadeIn();

    if (time > 0) {
        notificationTimeouts.push(
            setTimeout(function () {
                $('#system-notification-' + id).fadeOut(function () {
                    $(this).remove();
                });
            }, time),
        );
    }

    notificationId++;
}

function info_notification(text, duration) {
    var id = notificationId,
        time;

    const durations = {
        slow: 10000,
        fast: 5000,
        none: 0,
    }

    time = durations[duration];
    time = time || 0;

    var $notification = $(".notification-text:contains(" + jqEscape(text) + ")");

    if ($notification) {
        $notification.parents(".system-notification").remove();
        // Don't duplicate the same notification: remove last one --> create new one
    }

    $('<div class="system-notification info-system-notification" id="system-notification-' + id + '" data-time="' + time + '" style="margin-top: -500px">\
        <div class="system-notification-inner">\
            <span class="notification-text">\
                <div class="info-icon-wrapper">\
                    <div class="info-icon">\
                        <img src="static/images/info-icon.svg" />\
                    </div>\
                </div>\
                <span class="notification-text-value">' + text + '</span>\
            </span>\
            <a class="close-notification"><div class="cancel-mark"></div></a>\
            ' + (time ? '<span class="time-indicator ' + duration + '"></span>' : '') + '\
        </div>\
    </div>').appendTo("#system-notifications").hide().fadeIn().animate({marginTop:"0"},350);

    if (time > 0) {
        notificationTimeouts.push(setTimeout(function () {
            $("#system-notification-" + id).animate({marginTop: '-500px'}, 100).fadeOut(function () {
                $(this).remove();
            });
        }, time));
    }

    notificationId++;
}

function infoBox(info_message) {
    return '<span class="info-button-icon icon-svg-question-circle">' +
        '<span class="info-box">' + info_message + '</span>' +
        '</span>';
}

function sanitizeTheHtml(text) {
    return DOMPurify.sanitize(text);
}

function btoaUTF16(sString) {
    // Original:
    // https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding
    // Solution #3

    var aUTF16CodeUnits = new Uint16Array(sString.length);
    Array.prototype.forEach.call(aUTF16CodeUnits, function (el, idx, arr) {
        arr[idx] = sString.charCodeAt(idx);
    });
    var s = String.fromCharCode.apply(null, new Uint8Array(aUTF16CodeUnits.buffer));
    return btoa(s).replace(/[/]/g, '_').replace(/[+]/g, '-');
}

function escapeRegEx(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
}

function deepClone(object) {
    return JSON.parse(JSON.stringify(object));
}

function notificationMouseout($this) {
    $(".time-indicator").removeClass("paused");

    $(".system-notification").each(function () {
        var timePassed = $(this).find(".time-indicator").width(),
            percentageLeft = 1 - (timePassed / 400),
            time = $(this).data("time"),
            remainingTime = time * percentageLeft,
            $notification = $(this);

        if (time > 0) {
            notificationTimeouts.push(setTimeout(function () {
                $notification.fadeOut(function () {
                    $notification.remove();
                });
            }, remainingTime));
        }
    });
}

function global_i18n(key) {
    var value = global_i18n_object[key];
    if (!value) {
        console.warn('No i18n value found for key ' + key);
        return key
    }
    return value
}

function expandDropdown() {
    $('#profile-dropdown .dropdown-toggle').attr("aria-expanded", "true");
    $('#profile-dropdown').addClass('open');
}

let waitElementsIndex = 0;
function waitElements(params) {
    waitElementsIndex++;
    const waitElementsId = waitElementsIndex;
    var parent = params.parent || document;

    new MutationObserver(function () {
        var elements = parent.querySelectorAll(params.selector);

        elements.forEach(function (el) {
            var $el = $(el);
            if (!$el.hasClass(`waitElements-${waitElementsId}-done`)) {
                if (!params.excludeDoneClass) {
                    $el.addClass(`waitElements-${waitElementsId}-done`);
                }
                params.done(el);
            }
        });
    }).observe(parent, {
        subtree: !!params.recursive,
        childList: true,
    });
}

const fetchSvgIcon = (function () {
    const svgRequests = {};
    const svgCacheKey = 'svgIconsCache';
    const maxIcons = 300; // Limit to 300 to prevent the session storage full capacity
    let svgCache = JSON.parse(sessionStorage.getItem(svgCacheKey)) || {};

    // Function to check if the cached SVG is expired
    function isExpired(timestamp) {
        const expiryDuration = 24 * 60 * 60 * 1000; // one day in milliseconds
        return (Date.now() - timestamp) > expiryDuration;
    }

    // Function to prune the cache if it exceeds the max limit
    function pruneCache() {
        const entries = Object.entries(svgCache);
        if (entries.length > maxIcons) {
            entries.sort((a, b) => a[1].timestamp - b[1].timestamp); // sort by oldest timestamp
            const itemsToRemove = entries.length - maxIcons;
            for (let i = 0; i < itemsToRemove; i++) {
                delete svgCache[entries[i][0]];
            }
        }
    }

    // Clean up expired SVGs
    Object.keys(svgCache).forEach((svgFileName) => {
        if (isExpired(svgCache[svgFileName].timestamp)) {
            delete svgCache[svgFileName];
        }
    });
    pruneCache();
    sessionStorage.setItem(svgCacheKey, JSON.stringify(svgCache));

    return function (svgFileName, callback) {
        const cachedSvg = svgCache[svgFileName];
        if (cachedSvg && !isExpired(cachedSvg.timestamp)) {
            callback(cachedSvg.content);
            return;
        }

        if (svgRequests[svgFileName]) {
            svgRequests[svgFileName].then(callback);
            return;
        }

        const svgFile = `/static/icons/svg/${svgFileName}.svg`;
        const xhr = new XMLHttpRequest();
        xhr.open('GET', svgFile, true);
        xhr.responseType = 'blob';

        svgRequests[svgFileName] = new Promise((resolve, reject) => {
            xhr.onload = function () {
                if (this.status === 200) {
                    const blob = this.response;
                    const reader = new FileReader();
                    reader.onload = function (event) {
                        const result = event.target.result;
                        svgCache[svgFileName] = {
                            content: result,
                            timestamp: Date.now()
                        };
                        pruneCache();
                        sessionStorage.setItem(svgCacheKey, JSON.stringify(svgCache));
                        delete svgRequests[svgFileName];
                        resolve(result);
                        callback(result);
                    };
                    reader.readAsText(blob);
                } else {
                    reject(`Failed to fetch SVG: ${svgFileName}`);
                }
            };
            xhr.onerror = function () {
                reject(`Failed to fetch SVG: ${svgFileName}`);
            };
        });

        xhr.send();
    };
})();

// Main function to process icons
waitElements({
    selector: '[class*="icon-svg-"]',
    parent: document.body,
    recursive: true,
    done: (icon) => {
        const svgFileNamePrefix = 'icon-svg-';
        let svgFileName;
        icon.classList.forEach((iconClass) => {
            if (iconClass.startsWith(svgFileNamePrefix)) {
                svgFileName = iconClass.split(svgFileNamePrefix)[1];
            }
        });
        if (!svgFileName) {
            return;
        }
        if (icon.querySelector('svg, .svg-placeholder')) {
            icon.querySelector('svg, .svg-placeholder').remove();
        }

        if (icon.dataset.cssProp) {
            const element = document.createElement('div');
            element.className = 'svg-placeholder';
            element.style[icon.dataset.cssProp] = `url(/static/icons/svg/${svgFileName}.svg)`;
            icon.append(element);
            return;
        }

        fetchSvgIcon(svgFileName, (svgContent) => {
            icon.innerHTML += svgContent;
        });
    }
});

function visibleToViewport(params = {}) {
    const parent = params.parent || document;
    const intersectionObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                observer.unobserve(entry.target);
                if (params.callback) {
                    params.callback(entry.target);
                }
            }
        });
    });

    const elements = params.element ? [params.element] : parent.querySelectorAll(params.selector);
    elements.forEach(function (el) {
        intersectionObserver.observe(el);
    });
}

function onChildChange(params) {
    new MutationObserver(function (mutations) {
        mutations.forEach(function (mutation) {
            if (mutation.type === 'childList') {
                params.done(params.parent);
            }
        });
    }).observe(params.parent, {
        childList: true,
        subtree: true
    });
}

function onVisible(params) {
    // Note that this doesn't work in case the element has position: fixed. (See offsetParent for more details on how it works)
    const visibleClass = 'ta-onVisible-visible';
    const invisibleClass = 'ta-onVisible-invisible';

    function checkVisibility(elements) {
        elements.forEach(function (el) {
            var $el = $(el)
            if (el.offsetParent) {
                if (!$el.hasClass(visibleClass)) {
                    params.done(el);
                }
                $el.removeClass(invisibleClass).addClass(visibleClass);
            } else {
                if (!$el.hasClass(invisibleClass) && params.onInvisible) {
                    params.onInvisible(el);
                }
                $el.removeClass(visibleClass).addClass(invisibleClass);
            }

            $el.data('onVisible-id', params.id);
        });
    }

    checkVisibility(document.querySelectorAll(params.selector));

    new MutationObserver(function (mutationsList) {
        mutationsList.forEach(function (mutation) {
            var elements = mutation.target.querySelectorAll(params.selector);

            if (!elements.length && $(mutation.target).data('onVisible-id') === params.id) {
                elements = [mutation.target];
            }

            if (mutation.attributeName === 'style' || mutation.attributeName === 'class' && elements.length) {
                checkVisibility(elements);
            }
        });
    }).observe(document, {
        subtree: true,
        childList: true,
        attributes: true
    });
}

function onStyleChange(params) {
    new MutationObserver(function (mutationsList) {
        mutationsList.forEach(function (mutation) {
            if (mutation.attributeName === 'style') {
                params.done(params.element);
            }
        });
    }).observe(params.element, {
        attributes: true
    });
}

function objectToQueryString(obj) {
    return new URLSearchParams(obj).toString();
}

function stickyElements() {
    var $container = $('.sticky-element-container');

    if ($container.length) {
        var $element = $container.find('.sticky-element'),
            scrollTop = $(window).scrollTop(),
            containerTop = $container.offset().top,
            headerHeight = $('#header').height();

        if ((scrollTop + headerHeight) > containerTop) {
            $element.css('top', (scrollTop - containerTop) + headerHeight);
        } else {
            $element.css('top', 'auto');
        }
    }
}

function getInitial(name) {
    return name && String(name).toUpperCase().charAt(0);
}

function generateColorGradient(char1, char2) {
    if (!char1 || char1.length !== 1) {
        return null;
    }
    const secondChar = char2 && char2.length === 1 ? char2 : char1;
    const colorHue = (char1.charCodeAt(0) + secondChar.charCodeAt(0)) * 33;
    const colorStart = `hsl(${colorHue}, 50%, 40%)`;
    const colorEnd = `hsl(${colorHue - 50}, 50%, 65%)`;
    return `linear-gradient(45deg, ${colorStart}, ${colorEnd})`;
}

function getInitialsHtml(firstName, lastName, extraImgAttributes) {
    let firstNameInitial = getInitial(firstName || ' ');
    const lastNameInitial = getInitial(lastName || ' ');
    if (firstNameInitial === ' ' && lastNameInitial === ' ') {
        firstNameInitial = '?';
    }
    const colorGradient = generateColorGradient(firstNameInitial, lastNameInitial);
    return `<div class="img" style="background: ${colorGradient};" ${extraImgAttributes}>${
        firstNameInitial + lastNameInitial
    }</div>`;
}

function getPortraitHtml(photourl, firstName, lastName, options = {}) {
    const tooltipClass = options.tooltipClass || 'tooltip-small';
    const tooltip = options.tooltip || '';
    const extraClasses = options.extraClasses || '';
    const extraAttributes = options.extraAttributes || '';
    const extraImgAttributes = options.extraImgAttributes || '';
    let html = `<div class="navbar-portrait ${extraClasses} ${tooltip ? `has-${tooltipClass}` : ''}" ${extraAttributes}>`;
    if (photourl) {
        // Images are not cached, in order to prevent loa image on every render (in react)\
        // this will not fetch image on every render
        if (window.cachedImages.has(photourl)) {
            html += `<div class="img" style="background-image: url(${photourl})" ${extraImgAttributes}></div>`;
        } else {
            html += `<div class="img skeleton-box" data-src="${photourl}" ${extraImgAttributes}>
            </div>`;
        }
    } else {
        html += getInitialsHtml(firstName, lastName, extraImgAttributes);
    }
    if (tooltip) {
        let tooltipRegex = new RegExp(`class=.${tooltipClass}`);
        if (tooltipRegex.test(tooltip)) {
            html += sanitizeTheHtml(tooltip);
        } else {
            html += `<span class="${tooltipClass}">${sanitizeTheHtml(tooltip)}</span>`;
        }
    }
    html += '</div>';
    return html;
}

function chopString(text, length) {
    if (!text) {
        return text;
    }
    if (text.length <= length) {
        return text;
    }
    text = text.substring(0, length);
    const last = text.lastIndexOf(" ");
    text = text.substring(0, last);
    return text + "...";
}

function makeTitle(slug) {
    let words = slug.split('_');
    for (let i = 0; i < words.length; i++) {
        const word = words[i];
        words[i] = word.charAt(0).toUpperCase() + word.slice(1);
    }
    return words.join(' ');
}

function downloadFileFromAPI(url, apiOptions, fileCb, noFileCb) {
    var request = new XMLHttpRequest();
    var apiData = objectToQueryString(apiOptions.data);
    request.open(apiOptions.method, url, true);
    request.setRequestHeader("X-CSRFToken", csrf_token);
    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
    request.responseType = 'blob';
    request.onload = function(e) {
        if (this.status === 200) {
            var blob = this.response;
            var fileName = request.getResponseHeader('content-disposition').split('filename=')[1].split(';')[0];
            var link = document.createElement('a');
            var contentTypeHeader = request.getResponseHeader("Content-Type");
            var downloadUrl = window.URL.createObjectURL(new Blob([blob], { type: contentTypeHeader }));
            link.download = fileName;
            if (!link.download) {
                window.location.href = downloadUrl;
            } else {
                link.href = downloadUrl;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }

            fileCb();
        } else if (this.status === 210) {
            noFileCb();
        }
    };
    request.send(apiData);
}

function adjustBox($box, $boxContainer) {
    var marginFixes,
        $window = $(window),
        maxBoxWidth = 400,
        opposite = { top: 'bottom', bottom: 'top', left: 'right', right: 'left' },
        $boxContainer = $boxContainer || $box.closest(".has-info-box, .has-tooltip, .has-tooltip-small, .info-button-icon"),
        checkOverflowParent = false;

    if (!$box.is(tooltipSelectors.map(tooltipSelector => tooltipSelector.tooltip).join(','))) {
        $box.parents().each(function(i, parent) {
            if (!$(parent).css('overflow').includes('visible')) {
                $window = $(parent);
                checkOverflowParent = true;
                return false;
            }
        });
    }

    marginFixes = {
        overflowParent: {
            top: function () {
                return $window.offset().top - $box.offset().top
            },
            bottom: function () {
                return $window.offset().top + $window.innerHeight() - ($box.offset().top + $box.innerHeight())
            },
            left: function () {
                return $window.offset().left - $box.offset().left
            },
            right: function () {
                return $window.offset().left + $window.innerWidth() - ($box.offset().left + $box.innerWidth())
            }
        },
        window: {
            top: function () {
                return $(window).scrollTop() - $box.offset().top
            },
            bottom: function () {
                return $(window).scrollTop() + $(window).height() - ($box.offset().top + $box.innerHeight())
            },
            left: function () {
                return $(window).scrollLeft() - $box.offset().left
            },
            right: function () {
                return $(window).scrollLeft() + $(window).width() - ($box.offset().left + $box.innerWidth())
            }
        }
    };

    $box.css("margin-top", "0")
        .css("margin-right", "0")
        .css("margin-bottom", "0")
        .css("margin-left", "0")
        .css("width", Math.min(maxBoxWidth, $window.width()) + "px");
    $box.addClass('visible');
    $boxContainer.removeClass("info-box-fixed fix-overflow-top");
    $box.removeClass("fix-overflow-top");

    function adjustWidth() {
        if ($box.width() > $window.width()) {
            $box.css({cssText: 'width: ' + $window.width() + 'px !important'});
        }
    }

    function overflow(side, marginFix) {
        return (side === "top" || side === "left") && marginFix[side]() > 0
            || (side === "bottom" || side === "right") && marginFix[side]() < 0;
    }

    function fixOverflow(side, marginFix) {
        if (overflow(side, marginFix)) {
            var fix = marginFix[side]();
            var oldFix = parseFloat($box.css("margin-" + side)) * -1;
            fix = fix + oldFix;
            if (side === "bottom" || side === "right") {
                fix = fix * -1;
            }
            $box.css("margin-" + side, fix + "px");
            if (overflow(side, marginFix)) {
                $box.css("margin-" + opposite[side], (-1 * fix) + "px");
            }
            $boxContainer.addClass("info-box-fixed");

            if (side === "top" && !$box.hasClass('fix-overflow-top')) {
                $box.addClass("fix-overflow-top");
                $boxContainer.addClass("fix-overflow-top");
                fixOverflow("bottom", marginFix);
            }

            return true
        }
        return false
    }

    function fixOverflows(marginFix) {
        fixOverflow("top", marginFix) || fixOverflow("bottom", marginFix);
        fixOverflow("left", marginFix) || fixOverflow("right", marginFix);
    }

    adjustWidth();
    if (checkOverflowParent) {
        fixOverflows(marginFixes.overflowParent);
    }
    fixOverflows(marginFixes.window);
}

function adjustHeader() {
    $(".navbar-link-title").toggleClass("navbar-link-tooltip reverse-tooltip", ($(window).width() > 1014));
}

function listingPageBodyScroll() {
    $(".listing-page__body").toggleClass('no-scroll', window.innerWidth < 768 );
    $(".table-buttons-bar").toggleClass('sticky', window.innerWidth < 768);
}

function toggleSideBar(setIsCollapsed) {
    const $toggleSidebarContainer = $(".toggle-sidebar-container");
    const $toggleSidebarBtn = $('#toggle-sidebar-btn');

    // Recalculate datatable, after sidebar show/hide. (in order to show or hide datatable responsive columns)
    if ($toggleSidebarContainer.length) {
        let localStoragePrefix = () => $toggleSidebarContainer.data('local_storage_prefix') ? `${$toggleSidebarContainer.data('local_storage_prefix')}_` : '';
        let toggleTimeout = null;

        const recalculateDataTable = () => {
            const $tables = $('table.dataTable');
            if (!$tables.length) return;
            if (toggleTimeout) clearTimeout(toggleTimeout);
            toggleTimeout = setTimeout(() => {
                $tables.each((i, table) => {
                    const $table = $(table);
                    if (typeof $table.DataTable === "function") {
                        $table.DataTable().responsive.recalc();
                    }
                })
            }, 650);
        }

        function setSidebarState(isCollapsed) {
            window.localStorage.setItem(`${localStoragePrefix()}search_sidebar_collapsed`, isCollapsed);
            $toggleSidebarBtn.toggleClass('active', isCollapsed);
            $toggleSidebarContainer.toggleClass('collapsed', isCollapsed);
            recalculateDataTable();
        }
 
        if (!$toggleSidebarContainer.data('init-toggle-sidebar')) {
            $toggleSidebarContainer.data('init-toggle-sidebar', true);

            $(document).on('click', '#toggle-sidebar-btn', function () {
                const isCollapsed = JSON.parse(window.localStorage.getItem(`${localStoragePrefix()}search_sidebar_collapsed`));
                setSidebarState(!isCollapsed);
            });
        }

        if (typeof setIsCollapsed !== 'undefined') {
            setSidebarState(setIsCollapsed);
        }
    }
}

function renderRecruitmentFlow(steps = [], $container, options) {
    if (!options) options = {};

    function handleFirstAndLastActiveSteps() {
        const $stepsContainer = $container.find('.filter-items');
        const $selectedStep = $stepsContainer.find('.active');
        $stepsContainer.toggleClass('first-active', $selectedStep.is(':first-child'));
        $stepsContainer.toggleClass('last-active', $selectedStep.is(':last-child'));
    }

    function changeStep(stepId, status) {
        handleFirstAndLastActiveSteps();
        if (options.stepChangeCallback) options.stepChangeCallback(stepId, status);
    }

    function selectStep(stepId) {
        $container.find('.applicant-status-bar a[data-step_id="' + stepId + '"]').click();
    }

    function getSelectedStep() {
        const $selectedStep = $container.find('.applicant-status-bar a.active');
        return $selectedStep.data();
    }

    function getAttributes(step) {
        var attributes,
            classes = '';

        if (step.selected) {
            classes += ' active';
            changeStep(step.step_id, step.status);
        }

        if (step.disabled) {
            classes += ' disabled';
        }

        attributes = 'data-status="' + step.status + '" data-step_id="' + step.step_id + '" class="' + classes + '"';

        return attributes;
    }

    let labelTextElement = options.labelText ? '<small>' + options.labelText + '</small>' : '';
    const mapSteps = (step) => `<a ${getAttributes(step)}><span class="name">${step.step_name}</span></a>`;
    var flow = `<div class="applicant-status-bar status-bar-no-spacing ${(options.labelText ? ' status-bar-with-label' : '')}">
                    <div class="applicant-status-bar-group-wrapper">
                        ${labelTextElement}
                        <div class="applicant-status-bar-filter applicant-status-bar-progress">
                            <div class="recruitment-filter">
                                <div class="filter-items">
                                    ${steps.map(mapSteps).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;

    $container.html(flow);

    handleFirstAndLastActiveSteps();

    $container.find('a').on('click', function () {
        var $this = $(this);

        if (!$this.hasClass('disabled') && !$this.hasClass('active')) {
            $this.addClass('active').siblings().removeClass('active');
            changeStep($this.data('step_id'), $this.data('status'));
        }
    });

    if (options.postRender) {
        options.postRender({
            selectStep: selectStep,
            get selectedStep() { return getSelectedStep() },
        });
    }
}

function ajaxFailNotification(data) {
    if (data.responseJSON && data.responseJSON.notification) {
        notification(data.responseJSON.notification);
    } else {
        notification(global_i18n('ajax_fail_notification'));
    }
}

function updateApplicationFormTemplate() {
    var currentTemplate = $(".job-ad-wrapper [class*=job-ad-]").data("template");

    $(".application-form").addClass("application-form-" + currentTemplate);
}

var overlayInitialState;
function closeOverlay($overlay, callback) {
    function animateOverlayClosing($overlay, callback) {
        $overlay.addClass('overlay-closing');
        setTimeout(() => {
            $overlay.hide();
            $overlay.removeClass('overlay-closing');
            if (callback) {
                callback();
            }
        }, 120);
    }

    if (!$overlay) {
        $overlay = $('.overlay-background:visible').last();
    }

    var overlayIsExcluded = $overlay.hasClass('overlay-close-no-confirmation'),
        currentState = overlayState($overlay),
        noChangesMade = _.isEqual(overlayInitialState, currentState),
        $inputs = $overlay.find('input:not([type="submit"]):not([type="hidden"]), select, textarea'),
        hasInputs;

    if ($inputs.is(':not([readonly])') && $inputs.is(':visible')) {
        hasInputs = true;
    }

    if (overlayIsExcluded || !hasInputs || noChangesMade) {
        animateOverlayClosing($overlay, callback);
    } else {
        show_confirmation_overlay(
            "confirm-close-overlay",
            global_i18n('confirm_close_heading_i18n'),
            global_i18n('confirm_close_description_i18n'),
            {
                'label': global_i18n('cancel_i18n')
            },
            {
                'label': global_i18n('confirm_close_submit_i18n'),
                'action': function () {
                    animateOverlayClosing($overlay, callback);
                    $overlay.removeClass('overlay-changes-made');
                }
            }
        );
    }
}

function overlayState($overlay, action) {
    var currentState = {};

    $overlay.find('input:not([type="submit"]):not([type="hidden"]), select, textarea').each(function (i, field) {
        var $field = $(field);

        if ($field.is(':visible')) {
            currentState[i] = $(field).val();
        }
    });

    if ($('#ckeditor-attributes').length) {
        for (var i in CKEDITOR.instances) {
            currentState['ckeditor-' + CKEDITOR.instances[i].name] = CKEDITOR.instances[i].getData();
        }
    }

    if (action === 'setInitial') {
        overlayInitialState = currentState;
    } else {
        return currentState;
    }
}

function setOverlayInitialStateListener() {
    function overlayObserverCallback(mutations) {
        mutations.forEach(function (mutation) {
            if (mutation.attributeName !== 'style') {
                return;
            }

            if (mutation.target.style.display !== 'none') {
                setTimeout(function () {
                    overlayState($(mutation.target), 'setInitial');
                }, 750);
            }
        });
    }

    var observer = new MutationObserver(overlayObserverCallback);

    $('.overlay-background').each(function (i, overlay) {
        var target = overlay,
            overlayIsExcluded = $(overlay).hasClass('overlay-close-no-confirmation');

        if (!overlayIsExcluded) {
            observer.observe(target, {
                attributes: true
            });
        }
    });
}

function setDatepickerDefaults(lang) {
    var old_fn = $.datepicker._updateDatepicker,
        clear_i18n = $('#main_layout_attributes').data('clear_i18n'),
        datepickerDefaults = {
            showButtonPanel: true,
            firstDay: 1
        };

    $.datepicker.setDefaults($.datepicker.regional[lang]);
    $.timepicker.setDefaults($.timepicker.regional[lang]);
    $.datepicker.setDefaults(datepickerDefaults);
    $.timepicker.setDefaults(datepickerDefaults);

    $.datepicker._updateDatepicker = function (inst) {
        old_fn.call(this, inst);

        var $buttonPane = $(this).datepicker('widget').find('.ui-datepicker-buttonpane'),
            $clearButton = $(this).datepicker('widget').find('.datepicker-clear');

        if (!$clearButton.length) {
            $('<button type="button" class="ui-datepicker-clean ui-state-default ui-priority-secondary ui-corner-all datepicker-clear">' + (Language.string('clear') || clear_i18n) + '</button>').appendTo($buttonPane).click(function () {
                $.datepicker._clearDate(inst.input);
                $.datepicker._hideDatepicker();
                $(inst.input).blur();
            });
        }
    }

    $.datepicker._gotoToday = function (id) {
        var date,
            target = $(id),
            inst = this._getInst(target[0]);

        if (this._get(inst, 'timepicker')) {
            var tp_inst = this._get(inst, 'timepicker');
            var tzoffset = $.timepicker.timezoneOffsetNumber(tp_inst.timezone);
            var now = new Date();
            now.setMinutes(now.getMinutes() + now.getTimezoneOffset() + parseInt(tzoffset, 10));
            this._setTime(inst, now);
            this._setDate(inst, now);
            tp_inst._onSelectHandler();
        } else if (this._get(inst, "gotoCurrent") && inst.currentDay) {
            inst.selectedDay = inst.currentDay;
            inst.drawMonth = inst.selectedMonth = inst.currentMonth;
            inst.drawYear = inst.selectedYear = inst.currentYear;
        } else {
            date = new Date();
            inst.selectedDay = date.getDate();
            inst.drawMonth = inst.selectedMonth = date.getMonth();
            inst.drawYear = inst.selectedYear = date.getFullYear();
            this._setDateDatepicker(target, date);
            this._selectDate(id, this._getDateDatepicker(target));
        }
        this._notifyChange(inst);
        this._adjustDate(target);
    }

    $.datepicker._selectDay = function (id, month, year, td) {
        var inst,
            target = $(id);

        if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {
            return;
        }

        inst = this._getInst(target[0]);
        inst.selectedDay = inst.currentDay = $("a", td).text(); // .html() --> .text() to prevent Google Translate from breaking the Day
        inst.selectedMonth = inst.currentMonth = month;
        inst.selectedYear = inst.currentYear = year;
        this._selectDate(id, this._formatDate(inst,
            inst.currentDay, inst.currentMonth, inst.currentYear));
    }
}

(function ($) {
    $.fn.goTo = function () {
        $('html, body').animate({
            scrollTop: $(this).offset().top + 'px'
        }, 'slow');
        return this;
    }
})(jQuery);

function dehtmlify(s) {
    // Returns text from given HTML.
    s = s.replace('\n', ' ')
        .replace(/<!--[\s\S]*?-->/g, '')
        .replace(/<style[\s\S]+?\/style>/g, '')
        .replace(/<\s*\/(?:p|blockquote|ul|ol)>/g, '\n')
        .replace(/<\s*br\s*[/]?>/g, '\n')
        .replace(/<\s*(?:p|div|img|br|blockquote|li)[\s\S]*?>/g, '\n')
        .replace(/<[^<]*?>/g, '');
    return $("<textarea/>").html(s).text().trim();
}

function escapeQuotes(string) {
    return string.replaceAll('"', '&quot;').replaceAll("'", "&apos;");
}

function unescapeQuotes(string) {
    return string.replaceAll('&quot;', '"').replaceAll("&apos;", "'");
}

function convertAlpacaValidators(alpacaForm) {
    function makeValidator(fields, checkFunc, message) {
        return function (cb) {
            var that = this;
            var values = _.map(fields, function (v) {
                return that.getParent().childrenByPropertyId[v].getValue()
            });
            if (checkFunc(values)) {
                cb({"status": true})
            } else {
                cb({
                    "status": false,
                    "message": message
                });
            }
        };
    }

    _.forEach(alpacaForm['options']['fields'] || {}, function (field, fieldName) {
        if (field.validator) {
            var command = field.validator.shift(),
                message = field.validator.shift(),
                args = _.clone(field.validator);
            switch (command) {
                case 'anyRequired':
                    field.validator = makeValidator(args, _.some, message);
                    break;
                case 'allRequired':
                    field.validator = makeValidator(args, _.every, message);
                    break;
            }
        }
        _.forEach(field.validator || [], function (validatorDescription) {
            }
        );
    });
    return alpacaForm;
}

var NewQRCode = (function () {
    var initDone = false;

    function init(callback) {
        $.getScript('/static/vendor/qrcode.min.js', function () {
            initDone = true;
            if (callback) {
                callback();
            }
        });
    }

    function renderQrCode(element, url, size, callback) {
        new QRCode(element, {
            text: url,
            width: size,
            height: size
        });

        if (callback) {
            setTimeout(function () {
                callback();
            }, 100);
        }
    }

    function render(element, url, size, callback) {
        if (!size) {
            size = 100;
        }

        if (initDone) {
            renderQrCode(element, url, size, callback);
        } else {
            init(function () {
                renderQrCode(element, url, size, callback);
            });
        }
    }

    return {
        render: render
    };
})();

var PhoneQRCode = (function () {
    var $phone = $('.qr-code-phone'),
        qrCodeText = $('#main_layout_attributes').data('qr_code_i18n'),
        renderingQrCode = false;

    function renderQrCode($this) {
        renderingQrCode = true;

        $this.addClass('has-info-box');

        $this.append('<span class="info-box">\
                ' + qrCodeText + '\
                <div class="qr-code"></div>\
            </span>');

        var element = $this.find('.qr-code')[0],
            phoneNumber = $this.attr('href');

        NewQRCode.render(element, phoneNumber, 100, function () {
            adjustBox($this.find('.info-box'));

            renderingQrCode = false;
        });
    }

    $phone.mouseover(function () {
        var $this = $(this),
            qrCodeExists = $this.find('.qr-code').length;

        if (!qrCodeExists && !renderingQrCode) {
            renderQrCode($this);
        }
    });
})();

var LoadingIndicator = (function () {
    var fadeDuration = 500;

    function setDuration($loader, duration) {
        $loader.css('-webkit-transition', 'opacity ' + fadeDuration + 'ms ease-in-out, -webkit-transform ' + duration + ' linear');
        $loader.css('transition', 'opacity ' + fadeDuration + 'ms ease-in-out, transform ' + duration + ' linear');
    }

    function setProgress($loader, progress, duration) {
        setDuration($loader, duration);
        $loader.css('-webkit-transform', 'translateX(' + progress + ')');
        $loader.css('transform', 'translateX(' + progress + ')');
    }

    function start($loader, progress, duration) {
        $loader.css('opacity', '0');
        setTimeout(function () {
            setProgress($loader, '-100%', '0s');
            setTimeout(function () {
                set($loader, progress, duration);
            }, 50); // Timeout (50ms) so that the "transform" resets even though it should reset instantly "0s"
        }, fadeDuration);
    }

    function reset($loader) {
        $loader.css('opacity', '0');
        setProgress($loader, '0%', fadeDuration / 2 + 'ms');
        setTimeout(function () {
            setProgress($loader, '-100%', '0s');
        }, fadeDuration);
    }

    function set($loader, progress, duration) {
        duration = ((progress === 1 || !duration) ? fadeDuration / 2 + 'ms' : duration);
        $loader.css('opacity', '1');
        setProgress($loader, (progress * 100 - 100) + '%', duration);
        if (progress === 1) {
            setTimeout(function () {
                reset($loader);
            }, duration);
        }
    }

    return {
        start: start,
        reset: reset,
        set: set
    }
})();

var Language = (function () {
    var langJson, currentLang, strings, alpaca_form;

    function getCurrentLang() {
        return currentLang || $('html').attr('lang');
    }

    function getString(key) {
        var text = "";
        if (strings) {
            text = strings[key];
        }
        return text;
    }

    function setLang(langId, params) {
        var $container = params.$container || $('html, body');

        $container.prop('lang', langId);
        currentLang = langId;
        strings = langJson[langId];

        $container.find('.ta-custom-string').each(function () {
            var $this = $(this),
                stringKey = $this.data('string'),
                stringHrefKey = $this.data('string_href'),
                string = strings[stringKey],
                stringHref = stringHrefKey ? strings[stringHrefKey] : '';

            if ($this.is(':input:not(button)')) {
                $this.val(string);
            } else {
                $this.html(string);
            }

            if (stringHref) {
                $this.prop('href', stringHref);
            }
        });

        if (params.$form) {
            var $form = params.$form,
                $applicantImage = $form.find('#applicant-image').appendTo('body').hide(),
                talent_image = $form.find('.talent-image-label').css('background-image'),
                $videoQuestions = $form.find('#video-questions').appendTo('body').hide(),
                $fileInputs = $form.find('input:file'),
                $hiddenFileInputContainers = $form.find('.alpaca-field.attachment_default_widget_class');

            var apiParams = _.merge({
                "language_id": langId,
                "filled_data": JSON.stringify($form.alpaca('get').getValue())
            }, params.apiParams);

            $.post(params.formLink, apiParams, function (data) {
                var form_json = $.parseJSON(data["form_json"]);
                var alpaca_form = new alpacaForm();
                alpaca_form.init(null, $form);
                alpaca_form.setLanguage(currentLang);
                alpaca_form.postRender = function () {
                    return function (control) {
                        alpaca_form.defaultPostRender(control);

                        $("<span class=\"info-button-icon icon-svg-question-circle\">" +
                            "<span class='info-box'>" + strings['talent_form_page_allow_filetype'] + "</span></span>").insertAfter(".attachment_header_field_class h2");
                        $(".alpaca-control.checkbox").each(function () {
                            $(this).find('input').attr('name', $(this).attr('name'));
                            $(this).find('input').attr('value', $(this).find('input').attr('data-checkbox-value'));
                        });
                        $(".slider_widget_with_labels_class input").parent().removeClass("col-sm-9").addClass("col-sm-12");
                        $('.alpaca-field-checkbox div:empty').remove();
                        $(".date_widget_class input").prop('readonly', true);
                        setDatepickerDefaults(currentLang);
                        if (talent_image && talent_image !== 'none') {
                            $(".talent-image-label").css("background-image", "url(" + talent_image + ")");
                            $(".talent-image-label").find("span").removeClass("show-span");
                            $(".talent-image-label").find("span").html(strings['talent_form_page_change_text']);
                            $('#lottie-player-camera-animation').remove();
                        }
                        $fileInputs.each(function (i, input) {
                            var $input = $(input),
                                id = $input.attr('id');

                            $form.find('#' + id).replaceWith($input);
                        });
                        $hiddenFileInputContainers.each(function (i, container) {
                            var $container = $(container),
                                containerId = $container.data('alpaca-field-id'),
                                $inputs = $container.find('input[type="hidden"]'),
                                $attachmentFile = $container.find('.attachmentFile'),
                                $newContainer = $form.find('.alpaca-field[data-alpaca-field-id="' + containerId + '"]');

                            $newContainer.find('.attachmentFile').replaceWith($attachmentFile);

                            if ($inputs.length) {
                                $inputs.each(function (i, input) {
                                    var $input = $(input),
                                        name = $input.attr('name');

                                    $newContainer.find('input[name="' + name + '"]').replaceWith($input);
                                });
                            } else {
                                $newContainer.find('input[type="hidden"]').remove();
                            }
                        });
                        if (params.postRender) params.postRender();
                    }
                };
                alpaca_form.updateJsonConfiguration(form_json);
            });
        }
    }

    function eventListeners(params) {
        $(document).on(params.langChanger.event, params.langChanger.elementSelector, function () {
            var langId = $(this).val() || $(this).data('language_id');

            setLang(langId, params);
        });
    }

    function init(json, lang, params) {
        langJson = json;
        currentLang = lang;
        strings = langJson[currentLang];
        if (!params) params = {};
        if (params.$container) params.$container.addClass('inner-lang-container');
        eventListeners(params);
    }

    return {
        init: init,
        string: getString,
        getCurrent: getCurrentLang
    };
})();

function getAllUrlParams(url) {
    var queryString = url ? url.split('?')[1] : window.location.search.slice(1);

    var obj = {};

    if (queryString) {

        queryString = queryString.split('#')[0];

        var arr = queryString.split('&');

        for (var i = 0; i < arr.length; i++) {
            var a = arr[i].split('=');

            var paramName = a[0];
            var paramValue = typeof (a[1]) === 'undefined' ? true : a[1];

            if (paramName.match(/\[(\d+)?\]$/)) {

                var key = paramName.replace(/\[(\d+)?\]/, '');
                if (!obj[key]) obj[key] = [];

                if (paramName.match(/\[\d+\]$/)) {
                    var index = /\[(\d+)\]/.exec(paramName)[1];
                    obj[key][index] = paramValue;
                } else {
                    obj[key].push(paramValue);
                }
            } else {
                if (!obj[paramName]) {
                    obj[paramName] = paramValue;
                } else if (obj[paramName] && typeof obj[paramName] === 'string') {
                    obj[paramName] = [obj[paramName]];
                    obj[paramName].push(paramValue);
                } else {
                    obj[paramName].push(paramValue);
                }
            }
        }
    }

    return obj;
}

function removeQueryParamsFromUrl(url) {
    return url.split('?')[0];
}

function createSearchUrl(searchObj) {
    var searchUrl = '';

    if (!$.isEmptyObject(searchObj)) {
        for (var param in searchObj) {
            searchUrl += '&' + param + '=' + searchObj[param];
        }

        searchUrl = searchUrl.replace('&', '?');
    }

    return searchUrl;
}

function initAlpacaTogglers() {
    $('.toggle-alpaca-items').each(function (index, toggler) {
        var $toggler = $(toggler),
            targetItemClass = $toggler.data('item_class');

        $toggler.removeClass('hidden');

        $('.alpaca-field.' + targetItemClass).parents('.alpaca-container-item').hide();
    });

    $('.toggle-alpaca-items').click(function () {
        var $toggler = $(this),
            targetItemClass = $toggler.data('item_class'),
            togglerText;

        $toggler.toggleClass('show-items');
        togglerText = $toggler.hasClass('show-items') ? $toggler.data('close_text') : $toggler.data('open_text');
        $toggler.text(togglerText);
        $('.alpaca-field.' + targetItemClass).parents('.alpaca-container-item').toggle();
    });
}

function logAppErrors(data) {
    $.ajax({
        url: '/errors',
        type: 'POST',
        contentType: 'application/json;charset=UTF-8',
        dataType: 'json',
        data: JSON.stringify(data),
        success: function (response) { },
        error: function (response, textStatus, errorThrown) { }
    });
}

function getBrowserInfo() {
    var nVer = navigator.appVersion;
    var nAgt = navigator.userAgent;
    var browserName = navigator.appName;
    var fullVersion = '' + parseFloat(navigator.appVersion);
    var majorVersion = parseInt(navigator.appVersion, 10);
    var nameOffset, verOffset, ix;

    // In Opera, the true version is after "Opera" or after "Version"
    if ((verOffset = nAgt.indexOf("Opera")) != -1) {
        browserName = "Opera";
        fullVersion = nAgt.substring(verOffset + 6);
        if ((verOffset = nAgt.indexOf("Version")) != -1)
            fullVersion = nAgt.substring(verOffset + 8);
    }
    // In MSIE, the true version is after "MSIE" in userAgent
    else if ((verOffset = nAgt.indexOf("MSIE")) != -1) {
        browserName = "Microsoft Internet Explorer";
        fullVersion = nAgt.substring(verOffset + 5);
    }
    // In Chrome, the true version is after "Chrome"
    else if ((verOffset = nAgt.indexOf("Chrome")) != -1) {
        browserName = "Chrome";
        fullVersion = nAgt.substring(verOffset + 7);
    }
    // In Safari, the true version is after "Safari" or after "Version"
    else if ((verOffset = nAgt.indexOf("Safari")) != -1) {
        browserName = "Safari";
        fullVersion = nAgt.substring(verOffset + 7);
        if ((verOffset = nAgt.indexOf("Version")) != -1)
            fullVersion = nAgt.substring(verOffset + 8);
    }
    // In Firefox, the true version is after "Firefox"
    else if ((verOffset = nAgt.indexOf("Firefox")) != -1) {
        browserName = "Firefox";
        fullVersion = nAgt.substring(verOffset + 8);
    }
    // In most other browsers, "name/version" is at the end of userAgent
    else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) <
        (verOffset = nAgt.lastIndexOf('/'))) {
        browserName = nAgt.substring(nameOffset, verOffset);
        fullVersion = nAgt.substring(verOffset + 1);
        if (browserName.toLowerCase() == browserName.toUpperCase()) {
            browserName = navigator.appName;
        }
    }
    // trim the fullVersion string at semicolon/space if present
    if ((ix = fullVersion.indexOf(";")) != -1)
        fullVersion = fullVersion.substring(0, ix);

    if ((ix = fullVersion.indexOf(" ")) != -1)
        fullVersion = fullVersion.substring(0, ix);

    majorVersion = parseInt('' + fullVersion, 10);

    if (isNaN(majorVersion)) {
        fullVersion = '' + parseFloat(navigator.appVersion);
        majorVersion = parseInt(navigator.appVersion, 10);
    }

    return {
        browserName: browserName,
        fullVersion: fullVersion,
        majorVersion: majorVersion,
        appName: navigator.appName,
        userAgent: navigator.userAgent
    }
}

function getAccordionHtml(id, title, body, isExpanded) {
    return `
        <div class="panel panel-default panel-ta-default">
            <div class="panel-heading pointer ${isExpanded ? '' : 'collapsed' }" role="tab" id="panel-heading-${id}" data-toggle="collapse" data-target="#panel-collapse-${id}">
                <h4 class="panel-title">
                    ${title}
                </h4>
                <span class="icon-svg-chevron-up toggle-icon"></span>
            </div>
            <div id="panel-collapse-${id}" class="panel-collapse collapse ${isExpanded ? 'in' : ''}" role="tabpanel" aria-labelledby="panel-heading-${id}">
                <div class="panel-body">
                    ${body}
                </div>
            </div>
        </div>
    `;
}

var CookieConsentPopup = (function() {
    var $cookieConsentContainer,
        $cookieConsentLink,
        $cookieConsentInputs,
        $langChanger,
        cookiePreferences,
        cookiePreferencesObj,
        allCookies,
        $publicAttributes,
        companyHash,
        cookieConsentLang,
        cookiesData,
        cookieConsentOptions,
        customCookiesData;

    function getDomainWithPrefix() {
        var hostname = location.hostname;
        if (hostname.includes('.')) {
            return hostname.substr(hostname.indexOf('.'));
        } else {
            return hostname;
        }
    }

    function removeUnacceptedCookies(preferences) {
        if (!preferences) preferences = {};
        cookiesData.forEach(function(cookie) {
            var cookieName = cookie.name;
            var cookieAttributes = cookie.attributes || {};
            var cookieType = cookie.cookie_type;

            if (!preferences[cookieType]) {
                Cookies.remove(cookieName, cookieAttributes);
            }
        });
    }

    function handleCookies(preferences) {
        removeUnacceptedCookies(preferences);

        $('.cookie-script').each(function() {
            var $this = $(this),
                cookieType = $this.data('cookie_type'),
                src = $this.data('src'),
                htmlTag = $this.data('htmlTag') || 'script',
                style = $this.attr('style'),
                innerHtml = $this.html();

            if (preferences[cookieType]) {
                $('<' + htmlTag +
                    (src ? ' src="' + src + '"' : '') +
                    (style ? ' style="' + style + '"' : '') + '>' + innerHtml + '</' + htmlTag + '>').insertAfter($this);
            }
        });
    }

    function eventListeners() {
        $cookieConsentContainer.on('click', '.actions a', function() {
            var $this = $(this),
                action = $this.data('action'),
                newCookiePreferences = {};

            if (action === 'edit') {
                $this.addClass('hidden');
                $cookieConsentContainer.find('.cookie-preferences').show();
                $cookieConsentContainer.find('.actions a[data-action="accept-selected"]').removeClass('hidden');
                return;
            } else if (action === 'accept-all') {
                $cookieConsentInputs.prop('checked', true);
            }

            $cookieConsentInputs.each(function(i, input) {
                var $input = $(input),
                    cookieType = $input.attr('name');

                newCookiePreferences[cookieType] = $input.is(':checked');
            });

            $cookieConsentContainer.hide();
            handleCookies(newCookiePreferences);
            Cookies.set('cookie_preferences', JSON.stringify(newCookiePreferences), { expires: 1 });
        });

        $cookieConsentLink.on('click', function() {
            $cookieConsentContainer.show();
            $cookieConsentContainer.removeClass('overlay-no-close');
        });
    }

    function init($container) {
        $cookieConsentContainer = $container;
        $cookieConsentLink = $cookieConsentContainer.find('.cookie-preferences-link');
        $cookieConsentInputs = $cookieConsentContainer.find('.cookie-preferences input');
        $langChanger = $cookieConsentContainer.find('.language-changer');
        cookiePreferences = Cookies.get('cookie_preferences');
        cookiePreferencesObj = cookiePreferences ? JSON.parse(cookiePreferences) : '';
        allCookies = Cookies.get();
        $publicAttributes = $('#public-view-attributes');
        companyHash = $publicAttributes.data('company_hash');
        cookieConsentLang = $cookieConsentContainer.attr('lang');
        cookiesData = [
            {
                name: '_ga',
                attributes: {
                    domain: getDomainWithPrefix()
                },
                cookie_type: 'service_development_cookies'
            },
            {
                name: '_gid',
                attributes: {
                    domain: getDomainWithPrefix()
                },
                cookie_type: 'service_development_cookies'
            },
            {
                name: '_gat_Tracker',
                attributes: {
                    domain: getDomainWithPrefix()
                },
                cookie_type: 'service_development_cookies'
            }
        ];
        cookieConsentOptions = $cookieConsentContainer.data('options') || {};
        customCookiesData = cookieConsentOptions.cookies_data || [];
        customCookiesData = customCookiesData.map(function (cookie) {
            if (cookie.attributes && cookie.attributes.domain && cookie.attributes.domain === 'getDomainWithPrefix()') {
                cookie.attributes.domain = getDomainWithPrefix();
            }
            return cookie;
        });
        cookiesData = cookiesData.concat(customCookiesData);

        eventListeners();

        $.get('/api/companies/' + companyHash + '/languages').done(function(data) {
            var langOptionsHtml = '';
            data.language_selection_options.forEach(function(lang) {
                langOptionsHtml += '<option value="' + lang.id + '"' + (lang.id === cookieConsentLang ? ' selected' : '') + '>' + lang.name + '</option>';
            });
            $langChanger.html(langOptionsHtml);

            Language.init(data.custom_strings_in_all_languages, cookieConsentLang, {
                $container: $cookieConsentContainer,
                langChanger: {
                    elementSelector: '#cookie-consent-overlay .language-changer',
                    event: 'change'
                }
            });
        });

        if (cookiePreferences) {
            handleCookies(cookiePreferencesObj);
            $cookieConsentInputs.each(function(i, input) {
                var $input = $(input),
                    isAccepted = cookiePreferencesObj[$input.attr('name')];

                $input.prop('checked', isAccepted);
            });
        } else {
            _.forIn(allCookies, function(value, key) {
                Cookies.remove(key);
            });
            removeUnacceptedCookies();

            $cookieConsentContainer.show();
        }

        $cookieConsentLink.appendTo('.public-view-footer-top-bar');
    }

    return {
        init: init
    }
})();

function formatAttachments(attachments) {
    return attachments ? [attachments] : [];
}

function addAttachmentFile(fileName, target, id) {
    $('<span class="icon-svg-paperclip"></span> ' + sanitizeHtml(fileName) + ' <span class="remove-filter" ' + (id ? 'id="' + id + '"' : '') + '></span>').appendTo(target);
}

function setHeightFromPostMessage(event) {
    $('.postmessage-height-container iframe').each(function(i, iframe) {
        if (event.source === iframe.contentWindow) {
            const postMessageHeight = event.data;
            if (!Number.isInteger(postMessageHeight)) {
                return;
            }
            const $container = $(iframe).closest('.postmessage-height-container');
            let postmessageHeightFix = $container.data('postmessage_height_fix') || 0;
            $container.height(postMessageHeight + postmessageHeightFix + 1); // +1 for subpixel issues
        }
    });
}
window.addEventListener("message", setHeightFromPostMessage, false);

const select2SimpleResultTemplate = (state) => {
    const { info, divider = false, class: classes = '' } = $(state.element).data() || {};
    if (divider) return $(`<div class="option-divider"></div>`);
    if (!state.id && !state.text) return null;
    let infoMessage = info
        ? `<span class="info-button-icon icon-svg-question-circle"><span class="info-box">${info}</span></span>`
        : '';
    return $(`<div class="select-custom-option ${classes}">${state.text} ${infoMessage}</div>`);
}

function getSliderValue($slider) {
    return $slider.slider('option', 'value');
}

function handleSelect2HasValue(select2Container) {
    if (!select2Container) {
        return;
    }
    const hasValue = select2Container.data().length > 0;
    select2Container.$selection.toggleClass('ta-select2-has-value', hasValue);
}

function setTabsCount() {
    $('.tabs a[data-tab_text][data-text][data-count]').each(function () {
        setTabCount(this);
    });
}

function setTabCount(tab) {
    const $tab = $(tab);

    if (!$tab.length) return;

    const text = $tab.data('text') || $tab.text();
    const count = parseInt($tab.data('count'));
    const addCount = window.innerWidth <= 1400 && count >= 0 && $tab.data('text');
    $tab.attr('data-tab_text', addCount ? `${text} (${count})` : text);
    $tab.html(addCount ? `${text} <span class="count">(${count})</span>` : text);
}

function getScoreHtml(dataObj) {
    const scoreMapping = {
        jobilla: {
            10: {
                text: "A+",
                className: "a",
            },
            20: {
                text: "A",
                className: "a",
            },
            30: {
                text: "B",
                className: "b",
            },
            40: {
                text: "C",
                className: "c",
            },
            50: {
                text: "?",
                className: "unknown",
            },
        },
    };
    const { data, type } = dataObj || {};
    if (!data || !type) {
        return '';
    }
    const scoreObj = scoreMapping[type];
    const { text, className } = scoreObj[data];
    return `<span class="box-label ${type}-score ${type}-score-${className}">${text}</span>`;
}

$(document).ready(function () {
    const browserInfo = getBrowserInfo();
    const browserName = browserInfo.browserName;
    const fullVersion = browserInfo.fullVersion;
    const userAgent = browserInfo.userAgent;
    const $html = $('html');
    const $body = $('body');
    const timeZone = new Date().getTimezoneOffset();
    const lang = $body.attr('lang');
    const user = $body.data('user-id');
    const is_ios = /iP(ad|od|hone)/i.test(userAgent);
    const is_safari = !!userAgent.match(/Version\/[\d\.]+.*Safari/);
    
    const select2ResultTemplates = {
        "simple": select2SimpleResultTemplate
    }
    
    if (is_ios) {
        $html.addClass('is-ios');
    }
    if (is_safari) {
        $html.addClass('is-safari');
    }
    if (is_ios && is_safari) {
        $html.addClass('is-ios-safari');
    }

    window.onerror = function (message, url, line, colno) {
        const error_log = {
            browser: browserName,
            colno: colno,
            lang: lang,
            line: line,
            message: message,
            page: window.location.href,
            time: new Date().toISOString(),
            tz: timeZone,
            url: url,
            user: user,
            userAgent: userAgent,
            version: fullV   ersion
        };

        logAppErrors(error_log);
    };

    // Ajax Error Logging
    $(document).ajaxError(function (event, jqxhr, settings, thrownError) {
        const error_log = {
            browser: browserName,
            data: settings.data,
            lang: lang,
            message: thrownError,
            page: window.location.href,
            time: new Date().toISOString(),
            type: settings.type,
            tz: timeZone,
            url: settings.url,
            user: user,
            userAgent: userAgent,
            version: fullVersion
        };
        settings.url !== '/errors' && logAppErrors(error_log);
    });

    // Some IE compatibility Javascript
    function isIE() {
        return $('html').hasClass('ie');
    }

    if (isIE()) {
        $.ajaxSetup({ cache: false });
    }

    $("#system-notifications").on("click", ".close-notification", function (e) {
        e.preventDefault();

        var $notification = $(this).parents(".system-notification");

        if ($(this).find('.cancel-mark').length) {
            $notification.animate({marginTop: '-500px'}, 500).fadeOut(function () {
                $(this).remove();
            });
        } else {
            $notification.fadeOut(function () {
                $(this).remove();
            });
        }

        notificationMouseout($notification);
    });

    $("#system-notifications").on("mouseover", ".system-notification", function () {
        $(".time-indicator").addClass("paused");

        for (var i = 0; i < notificationTimeouts.length; i++) {
            clearTimeout(notificationTimeouts[i]);
        }
    });

    $("#system-notifications").on("mouseout", ".system-notification", function () {
        notificationMouseout($(this));
    });

    $(document).keyup(function (e) {
        var $overlay = $('.overlay-background:visible').last();

        if ($overlay.hasClass('overlay-background-react')) {
            return;
        }

        if (e.keyCode == 27 && !$overlay.hasClass('overlay-no-close')) { // esc
            closeOverlay($overlay);
        }
    });

    $(document).on('click', '.overlay-cancel', function () {
        var $overlay = $(this).closest('.overlay-background');

        if ($overlay.hasClass('overlay-background-react')) {
            return;
        }

        closeOverlay($overlay);
    });

    $(".copy-link-container").click(function () {
        var $link = $(this).find(".copy-link-value"),
            $info = $(this).find(".copy-link-info");

        $link.select();
        document.execCommand("copy");
        $link.blur();

        $info.text($info.data("link-saved-text"));
    });

    tooltipSelectors.forEach((tooltipSelector) => {
        $(document).on('mouseenter taphold', tooltipSelector.parent, function () {
            const $parent = $(this);
            const $tooltip = $parent.find(tooltipSelector.tooltip);
            if ($parent.hasClass('no-adjust')) {
                return;
            }
            if (!$tooltip.hasClass('tooltip-small')) {
                adjustBox($tooltip, $parent);
                $tooltip.css('margin', '0');
            }

            let tooltipWidth = $tooltip.outerWidth();
            let tooltipHeight = $tooltip.outerHeight();
            let parentWidth = $parent.outerWidth();
            let parentHeight = $parent.outerHeight();
            let parentLocationY = $parent.offset().top;
            let parentLocationX = $parent.offset().left;
            let tooltipTopFix = tooltipSelector.tooltip === '.tooltip-small' ? 10 : 15;

            $tooltip.appendTo('body');
            $tooltip.show();
            $tooltip.offset({ top: parentLocationY - tooltipHeight - tooltipTopFix, left: parentLocationX + parentWidth / 2 - tooltipWidth / 2 });
            $tooltip.css('bottom', 'auto');
            $tooltip.css('right', 'auto');
            $parent.addClass('tooltip-state-hover');

            $parent.on('mouseleave', function () {
                if ($tooltip.hasClass('tooltip-always-visible')) {
                    return;
                }
                $tooltip.hide();
                $tooltip.appendTo($parent);
                $parent.removeClass('tooltip-state-hover');
            });

            $tooltip.on('mouseenter', function () {
                $tooltip.show();
                $tooltip.appendTo('body');
                $parent.addClass('tooltip-state-hover');
            });

            $tooltip.on('mouseleave', function (e) {
                if ($tooltip.hasClass('tooltip-always-visible')) {
                    return;
                }
                $tooltip.hide();
                $tooltip.appendTo($parent);
                $parent.removeClass('tooltip-state-hover');
            });

            if (!$tooltip.hasClass('tooltip-small')) {
                adjustBox($tooltip, $parent);
                if ($tooltip.hasClass('fix-overflow-top')) {
                    $tooltip.offset({ top: parentLocationY + parentHeight + tooltipTopFix });
                }
            }
        });
    });

    $(document).on('click', 'li.dropdown-submenu > a', function (e) {
        e.stopPropagation();
        e.preventDefault();
        $('.dropdown-backdrop').remove();
        $dropdown = $(this).parent('.dropdown-submenu');
        $dropdownMenu = $(this).next('.dropdown-menu');
        
        let dropdownLocationY = $dropdown.offset().top;
        let dropdownHeight = $dropdown.outerHeight();        
        let dropdownMenuHeight = $dropdownMenu.outerHeight();

        $dropdown.toggleClass('dropup',window.innerHeight < dropdownLocationY + dropdownMenuHeight + dropdownHeight);
        $dropdown.toggleClass('open', $dropdown.hasClass('open'));
    });

    $(document).on('show.bs.dropdown', '.dropdown', function () {
        const $dropdown = $(this);
        const $dropdownMenu = $dropdown.find('.dropdown-menu').first();

        $('.dropdown-backdrop').remove();

        function hideDropdown() {
            $dropdownMenu.appendTo($dropdown);
            $dropdownMenu.removeClass('dropdown-visible');
            $dropdownMenu.removeAttr('style');
            $dropdownMenu.find('.dropdown-menu').removeAttr('style');
        }

        if ($dropdownMenu.hasClass('dropdown-menu-header')) {
            return;
        }

        let dropdownLocationY = $dropdown.offset().top;
        let dropdownLocationX = $dropdown.offset().left;
        let dropdownWidth = $dropdown.outerWidth();
        let dropdownHeight = $dropdown.outerHeight();

        $dropdownMenu.css('min-width', dropdownWidth);

        let dropdownMenuWidth = $dropdownMenu.outerWidth();
        let dropdownMenuHeight = $dropdownMenu.outerHeight();
        
        let top = (window.innerHeight > dropdownLocationY + dropdownMenuHeight + dropdownHeight)
            ? dropdownLocationY + dropdownHeight
            : dropdownLocationY - dropdownMenuHeight;
        
        if (top - window.scrollY < 0) {
            top = dropdownLocationY + dropdownHeight
        }

        $dropdownMenu.appendTo('body');
        $dropdownMenu.addClass('dropdown-visible');
        $dropdownMenu.css('position', 'absolute');
        $dropdownMenu.css('display', 'block');
        $dropdownMenu.css('top', top);
        $dropdownMenu.css('right', 'auto');
        $dropdownMenu.css('z-index', '9999');

        if ($dropdownMenu.hasClass('dropdown-menu-right')) {
            $dropdownMenu.css('left', dropdownLocationX + dropdownWidth - dropdownMenuWidth);
        } else {
            $dropdownMenu.css('left', dropdownLocationX);
        }
        
        // prevent to clip from left side of screen
        if($dropdownMenu[0] && $dropdownMenu[0].getBoundingClientRect().x < 0) {
            $dropdownMenu.css('left', 0);
        }

        $dropdown.on('hidden.bs.dropdown', function () {
            hideDropdown();
        });

        $(document).on('click', function (e) {
            const target = e.target;
            if (target !== $dropdownMenu[0]) {
                hideDropdown();
            }
        });
    });

    $(document).on('mouseenter', '[data-overflow-title]', function () {
        var $this = $(this);
        if (this.offsetWidth < this.scrollWidth) {
            !$this.attr('title') && $this.attr('title', $this.data('overflow-title'));
        } else {
            $this.removeAttr('title');
        }
    });

    $(document).on('mouseenter', '[data-overflow-tooltip]', function () {
        var $this = $(this);
        if (this.offsetWidth < this.scrollWidth) {
            if (!$this.hasClass('has-tooltip-small')) {
                $this.addClass('has-tooltip-small');
                $this.append(`<span class="tooltip-small">${sanitizeTheHtml($this.data('overflow-tooltip'))}</span>`);
                $this.trigger('mouseenter')
            }
        } else {
            $this.removeClass('has-tooltip-small');
            $this.find('.tooltip-small').remove();
        }
    });

    waitElements({
        selector: '.overlay-background .overlay .overlay-header',
        parent: document.body,
        recursive: true,
        done: function (overlayHeader) {
            const $overlayHeader = $(overlayHeader);
            if ($overlayHeader.find('.overlay-cancel-mark').length || $overlayHeader.data('hide-close') === true) {
                return;
            }
            $('<div class="overlay-cancel-mark overlay-cancel"></div>').prependTo($overlayHeader);
        },
    });

    waitElements({
        selector: '.init-navbar-portrait',
        parent: document.body,
        recursive: true,
        done: function (navbarPortrait) {
            const $navbarPortrait = $(navbarPortrait);
            let userphoto = $navbarPortrait.data('userphoto');
            let firstName = $navbarPortrait.data('first_name');
            let lastName = $navbarPortrait.data('last_name');
            let options = $navbarPortrait.data('options');

            userphoto = userphoto && userphoto !== 'None' ? userphoto : '';

            $navbarPortrait.replaceWith(getPortraitHtml(userphoto, firstName, lastName, options));
        },
    });

    waitElements({
        selector: '.init-get-score-html',
        parent: document.body,
        recursive: true,
        done: function (element) {
            const $element = $(element);
            const data = $element.data('score');
            $element.replaceWith(getScoreHtml(data));
        },
    });

    waitElements({
        selector: '.navbar-portrait .img[data-src]:not([data-src=""])',
        parent: document.body,
        recursive: true,
        done: function (navbarPortrait) {
            if (_.isEmpty($(navbarPortrait).data('src'))) return;
            visibleToViewport({
                element: navbarPortrait,
                callback: (element) => {
                    const $navbarPortrait = $(element);
                    const url = $navbarPortrait.data('src');
                    if (!url) {
                        $navbarPortrait.removeClass('skeleton-box');
                        return
                    };
                    window.cachedImages.add(url);
                    $('<img/>')
                        .attr('src', url)
                        .on('load', function () {
                            $navbarPortrait.addClass('fadeIn');
                            $navbarPortrait.css('background-image', `url(${url})`);
                            $navbarPortrait.removeAttr('data-src');
                            $navbarPortrait.removeClass('skeleton-box');
                            $(this).remove();
                            setTimeout(() => $navbarPortrait.removeClass('fadeIn'), 800);
                        });
                },
            });
        },
    });

    waitElements({
        selector: '.info-box, .tooltip, .tooltip-small',
        parent: document.body,
        recursive: true,
        done: function (infobox) {
            onChildChange({
                parent: infobox,
                done: function (infobox) {
                    adjustBox($(infobox));
                }
            });
        }
    });

    waitElements({
        selector: '.tabs a',
        parent: document.body,
        recursive: true,
        done: function (tab) {
            setTabCount(tab);
        },
    });

    waitElements({
        selector: '.init-datetimepicker',
        parent: document.body,
        recursive: true,
        done: function (input) {
            const $input = $(input);
            const customOptions = $input.data('datepicker_options');

            if (!$input.hasClass('hasDatepicker')) {
                let datetimepickerOptions = {
                    dateFormat: "yy-mm-dd",
                    timeFormat: "HH:mm",
                    controlType: 'select',
                    oneLine: true
                };

                if (customOptions) {
                    datetimepickerOptions = _.merge(datetimepickerOptions, customOptions);
                }

                $input.datetimepicker(datetimepickerOptions);
            }
        }
    });

    waitElements({
        selector: '.overlay-background',
        parent: document.body,
        recursive: true,
        done: function (overlay) {
            const $overlay = $(overlay);
            if (!$overlay.hasClass('Modal') && !$overlay.hasClass('overlay-background-react')) {
                $overlay.appendTo('body');
            }
        }
    });

    let overlayIdSuffix = 1;
    waitElements({
        selector: '[data-popup]',
        parent: document.body,
        recursive: true,
        done: function (link) {
            // This function makes sure that the overlays have a unique ID which is difficult to achieve especially in Alpaca forms.
            const $link = $(link);
            const overlayId = $link.data('popup');
            const newOverlayId = `${overlayId}-${overlayIdSuffix}`;
            overlayIdSuffix++;
            $link.data('popup', newOverlayId);
            $link.attr('data-popup', newOverlayId);
            $(`.overlay-background#${overlayId}`).attr('id', newOverlayId);
        }
    });

    waitElements({
        selector: '.hide-overflow',
        parent: document.body,
        recursive: true,
        done: function (element) {
            const $element = $(element);
            let text = $element.text().trim();
            $element.attr('title', text);
        }
    });

    waitElements({
        selector: '.icon-custom-sparkles',
        parent: document.body,
        recursive: true,
        done: function (icon) {
            const $icon = $(icon);
            $icon.html(`
                <svg viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6.657 1.247C6.767 0.917 7.233 0.917 7.343 1.247L7.988 3.184C8.12997 3.6098 8.36917 3.99668 8.68664 4.31398C9.00411 4.63127 9.39112 4.87026 9.817 5.012L11.753 5.657C12.083 5.767 12.083 6.233 11.753 6.343L9.816 6.988C9.3902 7.12997 9.00332 7.36917 8.68602 7.68664C8.36873 8.00411 8.12974 8.39112 7.988 8.817L7.343 10.753C7.31929 10.8253 7.27335 10.8882 7.21176 10.9328C7.15016 10.9774 7.07605 11.0014 7 11.0014C6.92395 11.0014 6.84984 10.9774 6.78824 10.9328C6.72665 10.8882 6.68072 10.8253 6.657 10.753L6.012 8.816C5.87013 8.39031 5.63108 8.00349 5.31379 7.68621C4.99651 7.36892 4.60969 7.12987 4.184 6.988L2.247 6.343C2.17474 6.31928 2.11181 6.27335 2.0672 6.21176C2.02259 6.15016 1.99857 6.07605 1.99857 6C1.99857 5.92395 2.02259 5.84983 2.0672 5.78824C2.11181 5.72665 2.17474 5.68072 2.247 5.657L4.184 5.012C4.60969 4.87013 4.99651 4.63108 5.31379 4.31379C5.63108 3.99651 5.87013 3.60969 6.012 3.184L6.657 1.247Z" fill="currentColor" style="transform: none; transform-origin: 6.99954px 6.00045px;" transform-origin="6.999535083770752px 6.000449895858765px"></path>
                    <path d="M2.39415 8.03423C2.36334 8.05648 2.34032 8.08788 2.32838 8.12396L2.00596 9.09204C1.93505 9.30488 1.81554 9.49828 1.65691 9.65691C1.49828 9.81554 1.30488 9.93505 1.09204 10.006L0.123957 10.3284C0.0878781 10.3403 0.0564822 10.3633 0.0342297 10.3941C0.0119772 10.425 0 10.462 0 10.5C0 10.538 0.0119772 10.575 0.0342297 10.6059C0.0564822 10.6367 0.0878781 10.6597 0.123957 10.6716L1.09204 10.994C1.30488 11.0649 1.49828 11.1845 1.65691 11.3431C1.81554 11.5017 1.93505 11.6951 2.00596 11.908L2.32838 12.876C2.34032 12.9121 2.36334 12.9435 2.39415 12.9658C2.42496 12.988 2.46199 13 2.5 13C2.538 13 2.57504 12.988 2.60585 12.9658C2.63666 12.9435 2.65967 12.9121 2.67162 12.876L2.99404 11.908C3.06495 11.6951 3.18446 11.5017 3.34309 11.3431C3.50172 11.1845 3.69512 11.0649 3.90796 10.994L4.87604 10.6716C4.91212 10.6597 4.94352 10.6367 4.96577 10.6059C4.98802 10.575 5 10.538 5 10.5C5 10.462 4.98802 10.425 4.96577 10.3941C4.94352 10.3633 4.91212 10.3403 4.87604 10.3284L3.90796 10.006C3.47641 9.86183 3.13817 9.52359 2.99404 9.09204L2.67162 8.12396C2.65967 8.08788 2.63666 8.05648 2.60585 8.03423C2.57504 8.01198 2.538 8 2.5 8C2.46199 8 2.42496 8.01198 2.39415 8.03423Z" fill="currentColor" style="transform: none; transform-origin: 2.5px 10.5px;" transform-origin="2.5px 10.5px"></path>
                    <path d="M2.4365 0.0201631C2.41807 0.0332787 2.40418 0.0518105 2.39677 0.0731818L2.20383 0.654117C2.11749 0.913811 1.91404 1.11721 1.65428 1.20353L1.0732 1.39717C1.05182 1.40458 1.03329 1.41847 1.02017 1.4369C1.00705 1.45532 1 1.47738 1 1.5C1 1.52262 1.00705 1.54468 1.02017 1.5631C1.03329 1.58153 1.05182 1.59542 1.0732 1.60283L1.65353 1.79647C1.78154 1.83905 1.89786 1.91087 1.99326 2.00624C2.08865 2.10161 2.16049 2.2179 2.20308 2.34588L2.39677 2.92682C2.40418 2.94819 2.41807 2.96672 2.4365 2.97984C2.45494 2.99295 2.477 3 2.49962 3C2.52225 3 2.54431 2.99295 2.56275 2.97984C2.58118 2.96672 2.59507 2.94819 2.60248 2.92682L2.79617 2.34588C2.83876 2.2179 2.9106 2.10161 3.00599 2.00624C3.10139 1.91087 3.21771 1.83905 3.34572 1.79647L3.9268 1.60283C3.94818 1.59542 3.96671 1.58153 3.97983 1.5631C3.99295 1.54468 4 1.52262 4 1.5C4 1.47738 3.99295 1.45532 3.97983 1.4369C3.96671 1.41847 3.94818 1.40458 3.9268 1.39717L3.34572 1.20353C3.08596 1.11721 2.88251 0.913811 2.79617 0.654117L2.60248 0.0731818C2.59507 0.0518105 2.58118 0.0332787 2.56275 0.0201631C2.54431 0.00704757 2.52225 0 2.49962 0C2.477 0 2.45494 0.00704757 2.4365 0.0201631Z" fill="currentColor" style="transform: none; transform-origin: 2.5px 1.5px;" transform-origin="2.5px 1.5px"></path>
                </svg>
            `);
        }
    });

    function initAttachmentPopup($popup) {
        if ($popup.data('init-attachment-popup')) {
            return;
        }
        $popup.data('init-attachment-popup', true);
        const $attachmentViewPopup = $popup.find('.render-attachment-view-popup');
        let link = $attachmentViewPopup.data('link');
        let popup_view = getFilePopupView(link);
        $attachmentViewPopup.html(popup_view);
    }

    $(document).on('click', '.attachment-popup', function () {
        const $this = $(this);
        const popupId = $this.data('popup');
        const $popup = $(`#${popupId}`).show();
        initAttachmentPopup($popup);
    });

    $(document).on('click', '.overlay-navigation-link', function () {
        var $overlay = $(this).closest('.attachment-overlay'),
            currentIndex = $overlay.data('overlay_index'),
            navigationDirection = $(this).data('navigation_direction'),
            newIndex = currentIndex + navigationDirection;
        const $targetOverlay = $('.attachment-overlay[data-overlay_index="' + newIndex + '"]');
        $overlay.hide();
        $targetOverlay.show();
        initAttachmentPopup($targetOverlay);
    });

    waitElements({
        selector: '.toggle-sidebar-container',
        parent: document.body,
        recursive: true,
        done: () => {
            initCollapsibleSideBar();
            toggleSideBar();
        }
    });

    waitElements({
        selector: '.settings-photo-box-container',
        parent: document.body,
        recursive: true,
        done: function (settingsPhotoBoxContainer) {
            const $settingsPhotoBoxContainer = $(settingsPhotoBoxContainer);
            const $settingsPhotoBox = $settingsPhotoBoxContainer.find('.settings-photo-box');

            function settingsPhotoBoxHasPhoto() {
                return $settingsPhotoBox.css('background-image')
                    && $settingsPhotoBox.css('background-image') !== 'none'
                    && $settingsPhotoBox.css('background-image') !== 'url("")';
            }

            $settingsPhotoBox.toggleClass('settings-photo-box-has-photo', settingsPhotoBoxHasPhoto());

            onStyleChange({
                element: $settingsPhotoBox[0],
                done: function () {
                    $settingsPhotoBox.toggleClass('settings-photo-box-has-photo', settingsPhotoBoxHasPhoto());
                }
            });
        }
    });

    waitElements({
        selector: '.alert',
        parent: document.body,
        recursive: true,
        done: function (el) {
            const $alert = $(el);
            let alertHeadingText;
            let alertIconClass;

            if ($alert.hasClass('alert-success')) {
                alertHeadingText = global_i18n('success');
                alertIconClass = 'icon-svg-check-circle';
            } else if ($alert.hasClass('alert-info')) {
                alertHeadingText = global_i18n('info');
                alertIconClass = 'icon-svg-info-circle';
            } else if ($alert.hasClass('alert-warning')) {
                alertHeadingText = global_i18n('warning');
                alertIconClass = 'icon-svg-alert-circle';
            } else if ($alert.hasClass('alert-danger')) {
                alertHeadingText = global_i18n('error');
                alertIconClass = 'icon-svg-x-circle';
            }

            if (!$alert.find('h4').length) {
                $alert.prepend(`<h4 class="alert-heading">${alertHeadingText}</h4>`);
            }

            if (!$alert.find('.alert-icon').length) {
                $alert.prepend(`<span class="alert-icon ${alertIconClass} no-spacing"></span>`);
            }
        }
    });

    waitElements({
        selector: '.welcome-banner',
        parent: document.body,
        recursive: true,
        done: function (welcomeBanner) {
            const $welcomeBanner = $(welcomeBanner);
            const welcomeBannerId = $welcomeBanner.data('welcome_banner_id');
            let welcomeBannerState = JSON.parse(localStorage.getItem('welcome-banner-closed')) || {};
            if (!welcomeBannerState[welcomeBannerId]) {
                $welcomeBanner.addClass('welcome-banner-show');
            }
        }
    });

    // Lazy load iframe
    waitElements({
        selector: 'iframe[data-src]:not([data-src=""])',
        parent: document.body,
        recursive: true,
        done: function (iframeElement) {
            if (_.isEmpty($(iframeElement).data('src'))) return;
            visibleToViewport({
                element: iframeElement,
                callback: (element) => {
                    const $iframe = $(element);
                    const url = $iframe.data('src');
                    const maxTries = 2;
                    let loaded = false;
                    let tries = 0;

                    if (!url) return;

                    const updateSrc = () => {
                        !loaded && $iframe.attr('src', url).removeAttr('data-src');
                    };

                    updateSrc();

                    const interval = setInterval(() => {
                        // refetch the document if not loaded  (issue with google docs preview API)
                        if (tries >= maxTries && interval) {
                            clearInterval(interval);
                        } else {
                            updateSrc();
                            tries++;
                        }
                    }, 4000);

                    $iframe.on('load', function () {
                        loaded = true;
                        clearInterval(interval);
                    });

                    $iframe.on('error', function () {
                        clearInterval(interval);
                    });
                },
            });
        },
    });

    $(document).on('click', 'a.close-icon', function (e) {
        e.preventDefault();
        $(this).closest('.settings-photo-box').css('background-image', 'none');
    });

    $(document).on('click', '.welcome-banner-close', function () {
        const $this = $(this);
        const $welcomeBanner = $this.closest('.welcome-banner');
        const welcomeBannerId = $welcomeBanner.data('welcome_banner_id');
        let welcomeBannerState = JSON.parse(localStorage.getItem('welcome-banner-closed')) || {};
        $welcomeBanner.removeClass('welcome-banner-show');
        welcomeBannerState[welcomeBannerId] = true;
        localStorage.setItem('welcome-banner-closed', JSON.stringify(welcomeBannerState));
    });

    $(document).on('dragover', '[data-drag_and_drop="true"]', function() {
        $(this).addClass('dragging-over');
    })
    $(document).on('dragend drop dragexit dragleave', '[data-drag_and_drop="true"]', function() {
        $(this).removeClass('dragging-over');
    });

    waitElements({
        selector: '.ui-slider',
        parent: document.body,
        recursive: true,
        done: (uiSlider) => {
            const $slider = $(uiSlider);
            const $sliderHandle = $slider.find('.ui-slider-handle');
            let fillWidth = $sliderHandle.prop('style').left;
            const $sliderFill = $(`<div class="ui-slider-fill job-custom-bg-color" style="width: ${fillWidth};"></div>`).prependTo($slider);
            const $sliderBadge = $(`<span class="badge ui-slider-badge">${getSliderValue($slider)}</span>`).prependTo($sliderHandle);

            onStyleChange({
                element: $sliderHandle[0],
                done: function (sliderHandle) {
                    const $slider = $(sliderHandle).closest('.ui-slider');
                    let fillWidth = $(sliderHandle).prop('style').left;
                    $sliderBadge.text(getSliderValue($slider));
                    $sliderFill.css('width', fillWidth);
                }
            });
        }
    });

    waitElements({
        selector: '.select2-hidden-accessible',
        parent: document.body,
        recursive: true,
        excludeDoneClass: true,
        done: function (select) {
            const select2Container = $(select).data('select2');
            handleSelect2HasValue(select2Container);
        }
    });

    $(document).on('change.select2', function (e) {
        const select2Container = $(e.target).data('select2');
        handleSelect2HasValue(select2Container);
    });

    $("form").each(function (index, value) {
        if (!$(this).find("input[name='csrf_token']").length && !$(this).hasClass("no-csrf")) {
            $(this).append("<input name=csrf_token type=hidden value=\"" + csrf_token + "\">");
        }
    });

    $('.ta-qr-code').each(function (index, container) {
        var url = $(container).data('url'),
            size = $(container).data('size') || 100;

        NewQRCode.render(container, url, size);
    });

    $('.select2-init').each(function (index, select) {
        var $select = $(select),
            placeholder = $select.attr('placeholder'),
            allowClear = $select.data('select2-allow-clear'),
            template = $select.data('template');
        const config = {
            width: '100%',
            placeholder: placeholder,
            allowClear: allowClear
        }
        if(select2ResultTemplates[template]) {
            config['templateResult'] = select2ResultTemplates[template]
        }
        $select.select2(config);
    });
    
    $(document).on('click', '.select2-button-container > a', function () {
        if ($(this).next('select').select2) {
            $(this).next('select').select2('open');
        }
    });

    $('.alpaca-form-render').each(function (index, form) {
        var $form = $(form),
            json = $form.data('json');
        var alpaca_form = new alpacaForm();
        alpaca_form.init(null, $form);
        alpaca_form.updateJsonConfiguration(json);
    });

    $(document).on("change", "input.alpaca-control:file:not(.crop-image-input)", function () {
        const defaultFileOptions = {
            maxFileSize: 10485760
        };
        const $fieldContainer = $(this).closest('.alpaca-container-item');
        let alpacaOptions = $fieldContainer.length ? $fieldContainer.alpaca('get').options : {};
        let maxFileSize = alpacaOptions.maxFileSize || defaultFileOptions.maxFileSize;
        var target = $(this).next(".attachmentFile");
        $(target).empty();

        if (this.files.length) {
            if (this.files[0].size <= maxFileSize) {
                var extension = this.files[0].name.split('.').pop().toLowerCase();
                var isTrue = check_file_extension(extension, attachment_extensions);
                var $outerDiv = $(this).parent().parent();
                if (isTrue) {
                    addAttachmentFile(this.files[0].name, target);
                    if ($outerDiv.hasClass("alpaca-required")) {
                        $outerDiv.removeClass("has-error alpaca-invalid");
                        $outerDiv.find(".alpaca-message").remove();
                    }
                } else {
                    notification(global_i18n("file_not_allowed_try_instead_message"), 'none');
                    this.value = "";
                }
            } else {
                notification(global_i18n("file_too_large_message").replace('10', `${maxFileSize / (1024 * 1024)}`), 'none');
                this.value = "";
            }
        }
    });

    $(document).on("change", "input.crop-image-input:file", function () {
        const target = $(this).next(".attachmentFile");
        $(target).empty();
        const name = $(this).attr('name');
        const validator = attachmentValidatorFactory(name);
        if (this.files.length) {
           validator.validate(this.files[0], target, this);
        }
    });


    $(document).on("click", ".attachmentFile .remove-filter", function () {
        var deleteHiddenInputs = $(this).attr("id");
        $("." + deleteHiddenInputs).remove();
        $(this).parent().prev("input.alpaca-control:file").val("");
        $(this).parent().empty();
    });

    $(document).on('keydown', '.prevent-enter-submit input:not([type="submit"]), .prevent-enter-submit select', function (e) {
        if (e.key === 'Enter') {
            e.preventDefault();
        }
    });

    $(document).on('click', '#ui_lang', function (e) {
        $(this).toggleClass("ui_lang-hover", !$(this).hasClass("ui_lang-hover") && !$(e.target).hasClass('language-selection'));
    });

    $(document).on('select2:open', function(e) {
        // Overwrites Select2's "feature" when it prevents scrolling on the page when Select2 overlay is shown.
        const evt = 'scroll.select2';
        $(e.target).parents().off(evt);
        $(window).off(evt);
    });

    onVisible({
        id: 0,
        selector: '.select2-hidden-accessible',
        done: function (el) {
            var $el = $(el);
            var options = $el.data('select2').options.options;
            $el.select2(options);
        }
    });

    onVisible({
        id: 1,
        selector: 'label[for="talent_image"] .show-span, label[for="applicant_image"] .show-span',
        done: function (el) {
            placeAnimation({
                animation_name: 'camera-animation',
                anchor: 'label[for="talent_image"], label[for="applicant_image"]',
                id: "camera-animation",
                size: 70,
                offset: ['0', '70px']
            });
        },
        onInvisible: function (el) {
            const $el = $(el);
            if (!$el.hasClass('show-span') ||
                !$el.closest('label').is(':visible')) {
                $('#lottie-player-camera-animation').remove();
            }
        }
    })

    onVisible({
        id: 2,
        selector: '.dataTables_wrapper table',
        done: function (table) {
            $(table).DataTable().responsive.recalc();
        }
    })

    var $cookieConsentContainer = $('#cookie-consent-overlay');
    if ($cookieConsentContainer.length) {
        CookieConsentPopup.init($cookieConsentContainer);
    }

    if (getAllUrlParams().show) {
        $('#' + getAllUrlParams().show).show();
    }

    $(document).on('mouseenter', '.panel-heading .btn', function () {
        // This makes it so that clicking on a button inside the panel heading doesn't collapse the panel unintentionally
        $(this).closest('.panel-heading').attr('data-toggle', '');
    }).on('mouseleave', '.panel-heading .btn', function () {
        $(this).closest('.panel-heading').attr('data-toggle', 'collapse');
    });

    $('.applicant-name, .applicant-email, .applicant-phone').each(function() {
        var $container = $(this);
        var html = $container.html();
        var newHtml = html.replace(/(+)/g, '<span class="a-dots">$1</span>');
        $container.html(newHtml);
    });
    adjustHeader();
    stickyElements();
    setOverlayInitialStateListener();
    setDatepickerDefaults(lang);

});

$(window).scroll(function () {
    stickyElements();
    $('.info-box, .tooltip').each(function (i, infobox) {
        var $infobox = $(infobox);
        if ($infobox.is(':visible')) {
            adjustBox($(infobox));
        }
    })
});

$(window).resize(function () {
    adjustHeader();
    stickyElements();
    listingPageBodyScroll();
    setTabsCount();
});

$(window).on('load', function () {
    $('body').addClass('window-loaded');
    adjustHeader();
    listingPageBodyScroll();
    $('.listing-page__body').on('scroll', function(e) {
        $(this).find('table.table-sticky-header').toggleClass('table-header-shadow', $(this)[0].scrollTop > 100);
    })
});

window.onbeforeunload = function () {
    var $unsavedContent = $('.unsaved-content'),
        unsavedContent = $unsavedContent.length > 0,
        warningMessage = $unsavedContent.data('unsaved-warning-message');

    if (unsavedContent) {
        if (warningMessage) {
            return warningMessage;
        } else {
            return true;
        }
    }
};

(function () {
    var $savingIndicator = $('#global-saving-indicator');
    var $savingIndicatorMessage = $savingIndicator.find('.saving-indicator-message');
    var savesInProgress = 0;
    var hideTimeout = null;

    // Shows a saving indicator
    // Returns a function, that when called, should hide
    // the indicator if there's no more saves in progress
    window.showSavingIndicator = function () {
        clearTimeout(hideTimeout);
        $savingIndicator.addClass('visible').removeClass('saved');
        savesInProgress++;

        return function () {
            savesInProgress = Math.max(0, savesInProgress - 1);
            if (savesInProgress < 1) {
                $savingIndicator.addClass('saved');
                hideTimeout = setTimeout(function () {
                    $savingIndicator.removeClass('visible')
                }, 2000)
            }
        }
    }

    window.hideSavingIndicator = function () {
        if (savesInProgress) {
            $savingIndicator.removeClass('visible');
            savesInProgress--;
        }
    }
})();

function getUser(callback) {
    $.ajax({
        url: '/api/users-dev/me',
        type: 'GET',
        headers: {'Accept': 'application/vnd.talentadore.v2+json'},
        dataType: 'json',
    }).done(function (data) {
        let user = {
            first_name: data.first_name ? data.first_name.toLowerCase() : '',
            last_name: data.last_name ? data.last_name.toLowerCase() : ''
        }
        callback(user);
    })
}

function getValidatedPasswordPair(password, passwordConfirm) {
    let matched = password === passwordConfirm;
    if (matched && password.length >= 12) {
        return {"password": password, "confirm": passwordConfirm}
    }
    return {"matched": matched}
}

function pwStrengthOptions($passInput, $confirmInput, $button) {
    let firstName, lastName,
        $bothInputs = $passInput.add($confirmInput),
        badPasswords = [9081961707115,
            70749688034794,
            11149980691919,
            22842987119764,
            74898544888388,
            10912611028632,
            77906422832350,
            25953086908438,
            77514086242607,
            16754068037679];

    $button.prop('disabled', true);

    function hash(string) {
        const H = 38,
            mx = 90071992547409;
        let total = 0;
        for (var i = 0; i < string.length; i++) {
            total = (H * total % mx + string.charCodeAt(i)) % mx;
        }
        return total
    }

    function wordInPassword(word, password) {
        return (word && word.length > 4) ? password.toLowerCase().search(word) !== -1 : false
    }

    function addPasswordError($whereAfter, errorMsg) {
        $whereAfter.after(`<span class="password-error password-verdict">${errorMsg}</span>`);
    }

    function clearPasswordErrors() {
        $(".password-error").remove();
    }

    $bothInputs.on('input', function () {
        let password = $passInput.val(),
            passwordConfirm = $confirmInput.val(),
            passwordPair = getValidatedPasswordPair(password, passwordConfirm),
            namesInPassword = wordInPassword(lastName, password) || wordInPassword(firstName, password),
            inBad = badPasswords.indexOf(hash(password.toLowerCase())) !== -1,
            passwordMatchOk = passwordPair["password"];
        clearPasswordErrors();
        if (passwordMatchOk && !namesInPassword && !inBad) {
            $button.prop('disabled', false);
            return
        }
        $button.prop('disabled', true);
        if (namesInPassword) {
            addPasswordError($(".error-list"), global_i18n('user_name_password_i18n'));
        } else if (inBad) {
            addPasswordError($(".error-list"), global_i18n('forbidden_password_i18n'));
        }
        if (!passwordMatchOk && !passwordPair["matched"] && passwordConfirm.length >= 1) {
            addPasswordError($confirmInput, global_i18n('password_and_confirm_no_match_i18n'));
        }
    });

    getUser(function (user) {
        firstName = user.first_name;
        lastName = user.last_name;
    });

    let options = {
        common: {
            minChar: 12,
            maxChar: 128,
        },
        rules: {
            activated: {
                wordNotEmail: false,
                wordMinLength: true,
                wordMaxLength: true,
                wordInvalidChar: false,
                wordSimilarToUsername: true,
                wordSequences: true,
                wordTwoCharacterClasses: false,
                wordRepetitions: true,
                wordLowercase: false,
                wordUppercase: false,
                wordOneNumber: false,
                wordThreeNumbers: false,
                wordOneSpecialChar: false,
                wordTwoSpecialChar: false,
                wordUpperLowerCombo: false,
                wordLetterNumberCombo: false,
                wordLetterNumberCharCombo: false,
                wordIsACommonPassword: false
            }
        },
        ui: {
            bootstrap3: true,
            showErrors: true,
            progressBarMinWidth: 20,
            spanError: function (options, key) {
                var text = options.i18n.t(key);
                if (!text) {
                    return '';
                }
                return '<span style="color: #2f2f2f">' + text + '</span>';
            },
        }
    };
    options.i18n = {
        t: function (key) {
            var result = global_i18n(key);
            return result === key ? '' : result;
        }
    };
    return options;
}

var CropImage = (function() {
    let img2crop, cropper, $imageCropOverlay, config;

    const aspectRatios = {
        1: 3 / 1,   // Classic
        4: 16 / 9,  // Elegant
        5: 16 / 9,  // Simple
        6: 3 / 1,   // Light
        7: 3 / 1,   // Dark
        8: 3 / 1,   // Chic
    };
    const aspectRatiosText = {
        1: '3:1',   // Classic
        4: '16:9',  // Elegant
        5: '16:9',  // Simple
        6: '3:1',   // Light
        7: '3:1',   // Dark
        8: '3:1',   // Chic
    };

    const baseConfig = {
                minCropBoxWidth: 200,
                autoCropArea: 1,
                preview: $(".crop-preview"),
                viewMode: 2,
                aspectRatio: getAspectRatio()
    }

    const croppedCanvasConfig = {
                minWidth: 640,
                minHeight: 480,
                maxWidth: 4096,
                maxHeight: 4096,
                fillColor: "#fff",
                imageSmoothingEnabled: true,
                imageSmoothingQuality: "high"
    }
    function getSelectedTemplate() {
        let $template = $('[name="new_job-template"]:checked');
        return $template.val();
    }

    function getAspectRatio() {
        return aspectRatios[getSelectedTemplate()];
    }

    function init(callback) {
        $imageCropOverlay = $('#image-crop-overlay');

        $imageCropOverlay.on('click', ".button-rotate-image", function () {
            cropper.rotate(90);
        });
        $imageCropOverlay.on('click', ".button-zoom-in", function () {
            cropper.zoom(0.1);
        });
        $imageCropOverlay.on('click', ".button-zoom-out", function () {
            cropper.zoom(-0.1);
        });
        $imageCropOverlay.on('click', ".button-aspect-ratio-default", function () {
            cropper.setAspectRatio(getAspectRatio());
        });
        $imageCropOverlay.on('click', ".button-aspect-ratio-free", function () {
            cropper.setAspectRatio(NaN);
        });

        $imageCropOverlay.on('click', ".submit-cropped-image", function () {
            cropper.getCroppedCanvas(config.croppedCanvas || croppedCanvasConfig).toBlob(function (blob) {
                if (callback) callback(blob, {
                    fieldName: cropper.fieldname,
                    fileName: img2crop.name
                });
            },"image/jpeg", 0.8);

            $imageCropOverlay.hide();
        });
    }

    function showCropper(that) {
        const image = $("#crop-image")[0];
        config = attachmentValidatorFactory($(that).attr('name')).getCropperConfig()

        img2crop = that.files[0];
        const baseOptions = config.cropper || baseConfig;
        $(that).val('');
        image.src = URL.createObjectURL(img2crop);
        if (cropper) cropper.destroy();
        cropper = new Cropper(image, baseOptions);
        cropper.fieldname = $(this).attr('name')
        const $buttonAspectRatioDefault = $imageCropOverlay.find('.button-aspect-ratio-default');
        let buttonAspectRatioDefaultText = $buttonAspectRatioDefault.data('text').replace('{}', aspectRatiosText[getSelectedTemplate()]);
        $buttonAspectRatioDefault.text(buttonAspectRatioDefaultText);

        $imageCropOverlay.show();
    }

    return {
        init: init,
        showCropper: showCropper
    };
})();


var CropOikotieImage = (function() {
    let img2crop, cropper, $imageCropOverlay, config;

    function init(callback) {
        $imageCropOverlay = $('#oikotie-image-crop-overlay');

        $imageCropOverlay.on('click', ".submit-cropped-image", function () {
            cropper.getCroppedCanvas(config.croppedCanvas).toBlob(function (blob) {
                if (callback) callback(blob, {
                    fieldName: cropper.fieldname,
                    fileName: img2crop.name
                });
            },"image/jpeg", 0.8);

            $imageCropOverlay.hide();
        });

        $imageCropOverlay.on('click', ".overlay-cancel", function () {
            const target = $(`#${cropper.fieldname}`).next('.attachmentFile');
            target.empty();
        });
    }

    function showCropper (that) {
            let image = $("#crop-oikotie-image")[0];
            config = attachmentValidatorFactory($(that).attr('name')).getCropperConfig();
            img2crop = that.files[0];

            const baseOptions = config.cropper;
            $(that).val('');
            image.src = URL.createObjectURL(img2crop);
            if (cropper) cropper.destroy();
            cropper = new Cropper(image, baseOptions);
            cropper.fieldname = $(that).attr('name')
            $imageCropOverlay.show();
    }

    return {
        init: init,
        showCropper: showCropper
    };
})();


class AttachmentValidator {

    constructor(name) {
        this.name = name;
    }

    validate(file, target, that) {
        const allowedExtensions = this.allowedExtensions();
        const allowedFileSize = this.allowedFileSize();
        const cropper = this.getCropper();

        if (file.size < allowedFileSize) {
            let img2crop = file;
            const image = new Image();
            image.src = URL.createObjectURL(img2crop);
            const extension = img2crop.name.split('.').pop().toLowerCase();
            const isValid = check_file_extension(extension, allowedExtensions);
            const $outerDiv = $(that).parent().parent();
            if (isValid) {
                addAttachmentFile(img2crop.name, target);
                if ($outerDiv.hasClass("alpaca-required")) {
                    $outerDiv.removeClass("has-error alpaca-invalid");
                    $outerDiv.find(".alpaca-message").remove();
                }
                if (cropper.showCropper && typeof CropOikotieImage.showCropper === 'function') {
                    cropper.showCropper(that);
                }
            } else {
                notification(global_i18n("image_not_allowed_try_instead_message").replace('{imagetypes}', allowedExtensions.join(', ')));
                that.value = "";
            }
        } else {
            const formatter = getNumberFormatter({ style: 'unit', unit: 'megabyte' })
            notification(global_i18n("image_too_large_message").replace('{size}', `${formatter.format(allowedFileSize / (1024 * 1024))}`), 'none');
            that.value = "";
        }
    }

    allowedExtensions() {
        return attachment_extensions
    }

    allowedFileSize() {
        return 10 * 1024 * 1024; // in bytes (10MB)
    }

    getCropperConfig() { return {} }

    getCropper() {
        return CropImage;
    }
}

class OikotieImageHeaderValidator extends AttachmentValidator {
    constructor(name) {
        super();
        this.name = name;
        this.dimensions = {
            width: 810, // in pixels,
            height: 540. // in pixels
        }
    }

    validator(validationObject) {
        const errors = [];
        const { extension, allowedExtensions, imgWidth, imgHeight, dimensions } = validationObject;
        if(!check_file_extension(extension, allowedExtensions)) {
            errors.push(
                global_i18n("image_not_allowed_try_instead_message").replace('{imagetypes}', allowedExtensions.join(', '))
            )
        }

        if(imgWidth < dimensions.width || imgHeight < dimensions.height) {
            errors.push(
                global_i18n("image_dimensions_incorrect").replace('{dimensions}', `${dimensions.width} x ${dimensions.height}`)
            )
        }

        return errors;
    }

    validate(file, target, that) {
        const allowedExtensions = this.allowedExtensions();
        const allowedFileSize = this.allowedFileSize();
        const dimensions = this.dimensions;
        const cropper = this.getCropper();
        const validator = this.validator;

        if (file.size < this.allowedFileSize()) {
            let img2crop = file;
            const image = new Image();
            image.src = URL.createObjectURL(img2crop);
            image.onload = function () {
                const imgWidth = this.naturalWidth;
                const imgHeight = this.naturalHeight;
                const extension = img2crop.name.split('.').pop().toLowerCase();
                const errors = validator({
                    extension,
                    allowedExtensions,
                    imgWidth,
                    imgHeight,
                    dimensions
                })

                if (!errors.length) {
                    const $outerDiv = $(that).parent().parent();
                    addAttachmentFile(img2crop.name, target);
                    if ($outerDiv.hasClass("alpaca-required")) {
                        $outerDiv.removeClass("has-error alpaca-invalid");
                        $outerDiv.find(".alpaca-message").remove();
                    }
                    if (CropOikotieImage.showCropper && typeof CropOikotieImage.showCropper === 'function') {
                        cropper.showCropper(that);
                    }
                } else {
                    notification(errors.join('<br>'));
                    that.value = "";
                }
            }

        } else {
            const formatter = getNumberFormatter({ style: 'unit', unit: 'megabyte' })
            notification(global_i18n("image_too_large_message").replace('{size}', `${formatter.format(allowedFileSize / (1024 * 1024))}`), 'none');
            that.value = "";
        }
    }

    allowedExtensions() {
        return ['jpeg', 'jpg', 'png'];
    }

    allowedFileSize() {
        return 2 * 1024 * 1024; // in bytes (2MB)
    }

    setBlob(blob, options) {
        const { fileName } = options
        const inputElement = document.getElementById(this.name);

        if(!inputElement) return;

        const file = new File([blob], fileName);

        const dataTransfer = new DataTransfer();
        dataTransfer.items.add(file);

        inputElement.files = dataTransfer.files;
        inputElement.dispatchEvent(new Event('input'));
    }

    getCropper() {
        return CropOikotieImage;
    }

     getCropperConfig() {
        const { width, height } = this.dimensions;

        return {
            'cropper': {
                minCropBoxWidth: width,
                autoCropArea: 1,
                preview: $(".crop-preview"),
                viewMode: 1,
                aspectRatio: width / height,
                responsive: true,
                zoomable: false,
                zoomOnTouch: false,
                zoomOnWheel: false,
                scalable: false,
                rotatable: true,
            },
            'croppedCanvas': {
                minWidth: width,
                maxWidth: width,
                maxHeight: height,
                imageSmoothingEnabled: true,
                imageSmoothingQuality: "high"
            }
        }
    }
}

function attachmentValidatorFactory(name)  {
    if (name === "oikotie_header_image") {
        return new OikotieImageHeaderValidator(name);
    }
    return new AttachmentValidator(name);
}

function nextStep(currentStep) {
    let $activeStep = $('.content-wrapper[data-step="' + currentStep + '"]');
    let $nextStep = $('.content-wrapper[data-step="' + (currentStep + 1) + '"]');
    $activeStep.removeClass("animate-out-right animate-in-right animate-in-left").addClass("animate-out-left");

    setTimeout(function () {
        $activeStep.removeClass("active");
        $nextStep.addClass("active animate-in-right");
    }, 600);
}

function prevStep(currentStep) {
    let $activeStep = $('.content-wrapper[data-step="' + currentStep + '"]');
    let $prevStep = $('.content-wrapper[data-step="' + (currentStep + -1) + '"]')
    $activeStep.removeClass("animate-out-left animate-in-right animate-in-left").addClass("animate-out-right");

    setTimeout(function () {
        $activeStep.removeClass("active")
        $prevStep.addClass("active animate-in-left");
    }, 600);
}

function goToStep(step) {
    $('.content-wrapper').removeClass().addClass("panel content-wrapper");
    $('.content-wrapper[data-step="'+ step +'"]').addClass("active");
}

function goToLink(url) {
    window.location.href = url;
}

function getLabelsForSelect2Values(url, value, $field) {
    if (url && value && value.length > 0) {
        $.get(url, {"values[]": value}, function (result) {
            if (result["results"]) {
                $field.val(null);
                result["results"].forEach(function (item) {
                    var option = new Option(item.text, item.id, true, true);
                    $field.append(option).trigger('change');
                    $field.trigger({
                        type: 'select2:select'
                    });
                });
            }
        })
    }
}

function placeAnimation (animation) {
    if (animation.id) {
        $("#lottie-player-" + animation.id).remove();
    }
    const size = animation.size ? animation.size : 150;
    const sizeWidth = animation.position === 'static' ? 'auto' : `${size}px`;
    const player =  `<lottie-player
                        ${animation.id ? `id="lottie-player-${animation.id}"` : ''}
                        class="lottie-player-${animation.position}"
                        src="/static/animations/${animation.animation_name}.json"
                        background="transparent"
                        speed="1"
                        style="width:${sizeWidth}; height:${size}px;"
                        ${animation.loop ? "loop" : ""}
                        ${animation.autoplay || animation.autoplay === undefined ? "autoplay" : ""}>
                    </lottie-player>`;
    const $anchor = $(animation.anchor);

    if (animation.position === 'static') {
        $(player).appendTo($anchor);
    } else {
        const $player = $(player).appendTo(document.body);

        function positionAnimation() {
            const anchorOffset = $anchor.offset();
            $player.css('transform', 'none');
            $player.offset({ top: anchorOffset.top - size / 2, left: anchorOffset.left + $anchor.outerWidth(true) / 2 - size / 2 });
            animation.offset ? $player.css('transform', `translate(${animation.offset[0]}, ${animation.offset[1]})`) : null;
        }

        positionAnimation();
        const resizeObserver = new ResizeObserver(() => positionAnimation());
        resizeObserver.observe(document.body);
    }
}

function getFilterIds(plan, filters = []) {
    const recursiveFind = (plan) => {
        if (plan.items) {
            return plan.items.map(recursiveFind).flat();
        }
        if (filters.indexOf(plan.filter) !== -1) return plan.id;
    };
    const ids = recursiveFind(plan);
    if (ids) return ids.filter((id) => id);
    return [];
}

function excludeFiltersFromPlan(searchPlan, filters = []) {
    const excludeIds = window.getFilterIds(searchPlan.plan, filters);
    const updatedValues = _.pickBy(
        searchPlan.values,
        (value, id) => excludeIds.indexOf(+id) === -1,
    );
    return {
        ...searchPlan,
        values: {
            ...updatedValues,
        },
    };
}

)                $main_layout_attributes          #main_layout_attributes    x
      csrf_token     6(      data   F
      attachment_extensions      ')      attachment_extension   1$      global_i18n_object     |p      backToShoppingCartButton         back_to_shopping_cart_button	   4S      googleMapsApiKey
   b+      google_maps_api_key    +~,      lang   h;      body   A      attr   M      loadedScripts      2      window     8o      cachedImages   g`      CURRENT_USER_ID    =      user-id    ^      no_data_found_i18n     t_      confirm_close_heading_i18n     ZW(H      confirm_close_description_i18n     J{      confirm_close_submit_i18n      =      cancel_i18n           yes_i18n         file_has_changed   2s      file_has_changed_i18n      O      profile_image_has_changed       48      profile_image_has_changed_i18n     {v}      cloud_storage_issue          cloud_storage_issue_i18n   Bs      forbidden_password_i18n     b"      password_and_confirm_no_match_i18n!     @5D      wordIsACommonPassword"      7$      user_name_password_i18n#          wordMinLength$      B      word_min_length_i18n%   H7	      errorList&            error_list_i18n'    ii7      veryWeak(   {      very_weak_i18n)     l'      weak*   `	      weak_i18n+      4.      normal,     -      normal_i18n-    G      medium.     n      medium_i18n/    o	      strong0     W      strong_i18n1    
      veryStrong2     V;8      very_strong_i18n3   r      svgIconsCache4      ns      tooltipSelectors5   /}8      tooltip6    a^      .tooltip7   2      parent8     GG      .has-tooltip9         .tooltip-small:     47X      .has-tooltip-small;     ~G	      .info-box<            .has-info-box=      d      .info-button-icon>      }{d	      ajaxSetup?      
      beforeSend@     1      xhrA    K      settingsB    l      ^(GET|HEAD|OPTIONS|TRACE)$C     a)      crossDomainD    f      setRequestHeaderE   (=      X-CSRFTokenF    m      notificationIdG     [N      notificationTimeoutsH   ;M2      getNumberFormatterI      :y      optionsJ    "      jqEscapeK   61      strL    $      [#;&,\.\+\*~':"!\^\$\[\]\(\)=>|\/\\]M   {S8      \$&N    #D      notificationO   3      textP   
7      durationQ   zA;      isEmptyR    Q1      consoleS    M      warnT   W-      notification text can't be undefined or null.U      %]      timeV   5      fastW   b{su      slowX   ,      noneY   _]      .notification-text:contains(Z   v=      parents[    2&      .system-notification\   *N      remove]     kN9      <div class="system-notification" id="system-notification-^      9*      " data-time="_      K7      ">        <div class="system-notification-inner">
            <span class="notification-text">
                <span class="notification-text-value">`      tQ7e      </span>
            </span>
            <a class="close-notification">x</a>
        </div>
    </div>a      V      appendTob   \      #system-notificationsc      v}      hided   U"      fadeIne     u2      pushf   3At
      setTimeoutg     Q      #system-notification-h      cH:      fadeOuti    g      info_notificationj      9	      durationsk      @      $notificationl      #R      <div class="system-notification info-system-notification" id="system-notification-m     |y     " style="margin-top: -500px">        <div class="system-notification-inner">            <span class="notification-text">                <div class="info-icon-wrapper">                    <div class="info-icon">                        <img src="static/images/info-icon.svg" />                    </div>                </div>                <span class="notification-text-value">n      s      </span>            </span>            <a class="close-notification"><div class="cancel-mark"></div></a>            o    L1      <span class="time-indicator p   +(X	      "></span>q      a              </div>    </div>r   q1      animates    	      marginTopt      N      -500pxu     d      infoBoxv    F      info_messagey         </span>z          sanitizeTheHtml{    c9	      DOMPurify|      Jx&      sanitize}   c	      btoaUTF16~            sString    h      aUTF16CodeUnits    Lg      idx    c      arr    (=S:
      charCodeAt     >      fromCharCode   Y      btoa   B6B      [/]          [+]    ia2      escapeRegEx    v      [.*+?^${}()|[\]\\]     7x	      deepClone      5      parse      n	      stringify      j5B      notificationMouseout   K      $this      8w      .time-indicator    +      removeClass    V      paused     `
      timePassed     J      width      T>      percentageLeft     /      remainingTime      J      global_i18n    B;      key          No i18n value found for key    $      expandDropdown      "      #profile-dropdown .dropdown-toggle     tId      aria-expanded      K'      #profile-dropdown      B|      addClass   x5      open   =@<      waitElementsIndex            waitElements   &<      params      [m      waitElementsId     O      document   ]Q(      MutationObserver   _T      elements   #      querySelectorAll    _l$      selector         $el    7z      hasClass   JD      waitElements-      ]T      -done            excludeDoneClass   d      observe    3>      subtree    TB>	      recursive      F	      childList      ^AE      fetchSvgIcon   <0      svgRequests          svgCacheKey    fb      maxIcons   .      svgCache   "p      sessionStorage           getItem    (s	      isExpired      P      expiryDuration     *      now    Q
      pruneCache     }      sort   FC"      itemsToRemove      `3      svgFileName    +      setItem          callback   %,	      cachedSvg      4W      content    .q      svgFile          /static/icons/svg/     l      .svg   $      XMLHttpRequest     
      GET    ".H      responseType   &F      blob   {p      onload     O      response   R
d      reader     DvA
      FileReader     IIP      event      }
      readAsText           Failed to fetch SVG:       s      onerror    ,      send   k      [class*="icon-svg-"]   VXJ      icon         svgFileNamePrefix      Y	      icon-svg-       z	      classList      ]K	      iconClass      JX?
      startsWith     1:      querySelector      (MI      svg, .svg-placeholder      ^]      dataset    O      cssProp    DC      createElement            div    6CY>	      className            svg-placeholder    IJ      url(/static/icons/svg/     mc      .svg)      B-      append     y"O:
      svgContent     Q:	      innerHTML      f      visibleToViewport      q]b      intersectionObserver         IntersectionObserver   Uyh      observer   M>      entry            isIntersecting     m2	      unobserve      /      onChildChange      ">	      mutations      t      mutation   I0	      onVisible      ]a[k      visibleClass   Ej      ta-onVisible-visible         invisibleClass     |      ta-onVisible-invisible     /]      checkVisibility    t      offsetParent         onInvisible    $      onVisible-id         mutationsList      n      attributeName      5
      attributes     R      onStyleChange      5w      objectToQueryString    N#9      obj    y^      URLSearchParams    1O      stickyElements    i
      $container          .sticky-element-container           $element  YT      .sticky-element   G	      scrollTop     >eY      containerTop  $      top   Ey.      headerHeight	        #header
         height    >      css   zS      auto  8
      getInitial    s      toUpperCase   v      charAt    j&      generateColorGradient     L       char1     k      char2     Z
      secondChar    _	/      colorHue  
      colorStart    uC      hsl(  h      , 50%, 40%)   IX      colorEnd  n K      , 50%, 65%)   :Y
      linear-gradient(45deg,    ^v      ,     Z}      getInitialsHtml   	      firstName      [9      lastName  tZ      extraImgAttributes     2k      firstNameInitial!  	      lastNameInitial"   }      colorGradient#     A$      <div class="img" style="background: $  w6      ;" %   ^      </div>&    ]      getPortraitHtml'   p      photourl(  <E      tooltipClass)  e-      tooltip-small*     8Vzt      extraClasses+        extraAttributes,   X      html-  z      <div class="navbar-portrait .  d|      has-/  `'      " 0    +.      <div class="img" style="background-image: url(1    ]      )" 2   B      ></div>3   1eT(      <div class="img skeleton-box" data-src="4  n      >
            </div>5  Z      tooltipRegex6  P})      class=.7   [~B=      <span class="8     +      ">9    Y
      chopString:    Y	      substring;           last<        lastIndexOf=   ^Nz      ...>   m	      makeTitle?     M      slug@  &      wordsA           wordB         sliceC     to      downloadFileFromAPID   G
      apiOptionsE    )      fileCbF       [      noFileCbG  l(      requestH   .      apiDataI   pwm      methodJ    l      Content-TypeK  u0      application/x-www-form-urlencoded; charset=UTF-8L  p      getResponseHeaderM     	xV      content-dispositionN   )	      filename=O     I      linkP  "      contentTypeHeaderQ     V      downloadUrlR   Z1H      URLS   K      createObjectURLT   Ai      BlobU        downloadV  0+QA      locationW  `X      hrefX  $~      appendChildY   X      clickZ     K      removeChild[   
	      adjustBox\     8\      $box]  &      $boxContainer^     g      marginFixes_         $window`         maxBoxWidtha   x      oppositeb  @~      bottomc    ]      leftd   .      righte     /      closestf   vB      .has-info-box, .has-tooltip, .has-tooltip-small, .info-button-icong    _-U      checkOverflowParenth   9      mapi   P      tooltipSelectorj   ?Iq      visiblek   \]      overflowParentl    0U      innerHeightm   U
      innerWidthn    |cr
      scrollLefto    A=
      margin-topp    \M~      margin-rightq  ,9      margin-bottomr     (:      margin-lefts   U       mint   p      info-box-fixed fix-overflow-topu   ba      fix-overflow-topv        adjustWidthw   dMC      cssTextx   ,t      width: y   7      px !importantz     ~ 9      side{  7P	      marginFix|     W5      fixOverflow}   d      oldFix~     o      margin-   7      info-box-fixed    rW      fixOverflows   C      adjustHeader  z      .navbar-link-title    (I      toggleClass   =c#      navbar-link-tooltip reverse-tooltip   54s      listingPageBodyScroll     
      .listing-page__body   ~L	      no-scroll           .table-buttons-bar    F      toggleSideBar     9      setIsCollapsed    %+      $toggleSidebarContainer   x'      .toggle-sidebar-container           $toggleSidebarBtn     0W<4      #toggle-sidebar-btn   t      localStoragePrefix    |P      local_storage_prefix  Oa      toggleTimeout     5      recalculateDataTable  YY      $tables   8I      table.dataTable   Q8u      clearTimeout  d      table     E      $table    +5	      DataTable     ;G
      responsive    #Ei      recalc    f      setSidebarState   vZ      isCollapsed   @;      localStorage  n       search_sidebar_collapsed  Px      active    t	      collapsed     a      init-toggle-sidebar         renderRecruitmentFlow     ND      steps     #{      handleFirstAndLastActiveSteps     X      $stepsContainer   4      .filter-items     U~      $selectedStep     ;      .active   S      first-active        :first-child  	`82      last-active         :last-child   SH
      changeStep          stepId    1iV      stepChangeCallback    
      selectStep    YF&      .applicant-status-bar a[data-step_id="          "]           getSelectedStep         .applicant-status-bar a.active    cn      getAttributes     6nn      step  uw      classes   .      selected  SL       active   TW      step_id   zw      disabled  	       disabled     ,s      data-status="           " data-step_id="  A	      " class="     R      labelTextElement  ?O	      labelText     @$      <small>   6S_      </small>  g'e      mapSteps  ^      <a          ><span class="name">  X	      step_name     *B      </span></a>   /f      flow  D7      <div class="applicant-status-bar status-bar-no-spacing           status-bar-with-label    b`      ">
                    <div class="applicant-status-bar-group-wrapper">
                                
                        <div class="applicant-status-bar-filter applicant-status-bar-progress">
                            <div class="recruitment-filter">
                                <div class="filter-items">
                                         ~      
                                </div>
                            </div>
                        </div>
                    </div>
                </div>   s      siblings  =
      postRender    !-Y      selectedStep  	z      get selectedStep  J      ajaxFailNotification  .      responseJSON  	-=      ajax_fail_notification    3(      updateApplicationFormTemplate           currentTemplate   M       .job-ad-wrapper [class*=job-ad-]  s      template  [#      .application-form     a
Z      application-form-     r      overlayInitialState         closeOverlay  J]      $overlay        animateOverlayClosing     >{      overlay-closing   EC]      .overlay-background:visible   JZD      overlayIsExcluded     i      overlay-close-no-confirmation     =      currentState  x      overlayState  ?&<      noChangesMade     I      isEqual   J      $inputs   EA      input:not([type="submit"]):not([type="hidden"]), select, textarea      	      hasInputs     tIib      :not([readonly])  SZK#      :visible  .      show_confirmation_overlay     	      confirm-close-overlay     	      action    .      overlay-changes-made  !      field            $field    &      val   '      #ckeditor-attributes  (e      CKEDITOR  El\	      instances     *	      ckeditor-           getData   
      setInitial    7\      setOverlayInitialStateListener    0}      overlayObserverCallback   e}      display   ~\      .overlay-background   L      overlay         setDatepickerDefaults      M      old_fn    JL
      datepicker    "U      _updateDatepicker     9J
      clear_i18n    I{      datepickerDefaults    v      showButtonPanel   \      firstDay  !      setDefaults         regional	  '
      timepicker
    q9      inst  e      $buttonPane         widget    O      .ui-datepicker-buttonpane     :)      $clearButton   F      .datepicker-clear     Bhx      <button type="button" class="ui-datepicker-clean ui-state-default ui-priority-secondary ui-corner-all datepicker-clear">  sb"      Language  /}      clear     C	      </button>     ts
      _clearDate    Hz      _hideDatepicker   %      blur  j
      _gotoToday    Ac
      _getInst  
a      _get  _9      tp_inst   hgYQ      tzoffset  b      timezoneOffsetNumber  i      timezone  mK<
      setMinutes    *?
      getMinutes     ud{#      getTimezoneOffset!     {p      _setTime"  k      _setDate#  G0M      _onSelectHandler$        gotoCurrent%   J
      currentDay&    p      selectedDay'   i;	      drawMonth(     p      selectedMonth)     `x      currentMonth*  A<      drawYear+  !l      selectedYear,  JO1      currentYear-         getDate.   "      getMonth/  %k5      getFullYear0   g      _setDateDatepicker1    k,y      _selectDate2         _getDateDatepicker3    w      _notifyChange4     }      _adjustDate5   ]3
      _selectDay6          _unselectableClass7          _isDisabledDatepicker8     Jt      _formatDate9   d~I      goTo:  Y
      html, body;    >/      jQuery<    Y4	      dehtmlify=     C      <!--[\s\S]*?-->>         <style[\s\S]+?\/style>?    HqG      <\s*\/(?:p|blockquote|ul|ol)>@      s      <\s*br\s*[/]?>A    c+      <\s*(?:p|div|img|br|blockquote|li)[\s\S]*?>B   \^D      <[^<]*?>C        <textarea/>D   b      trimE  Rt      escapeQuotesF  
      replaceAllG    ~      &quot;H    8      &apos;I     o      unescapeQuotesJ    Vo      convertAlpacaValidatorsK   yW
      alpacaFormL    cw      makeValidatorM     e	      checkFuncN     hy      thatO  7i	      getParentP     t(      childrenByPropertyIdQ        getValueR  W	      fieldNameS     	      validatorT           commandU   =O      shiftV           argsW  4      cloneX     b      anyRequiredY   $g      someZ  	       allRequired[   c      every\           validatorDescription]  rRJ	      NewQRCode^     \Y-      initDone_  u`      init`  I	      getScripta     ix      /static/vendor/qrcode.min.jsb  P3      renderQrCodec        QRCoded          rendere    cF      PhoneQRCodef   J=      $phoneg    .      .qr-code-phoneh    SC
      qrCodeTexti    5      qr_code_i18nj  x      renderingQrCodek   <      has-info-boxl  '      <span class="info-box">                m   >                      <div class="qr-code"></div>            </span>n          .qr-codeo        phoneNumberp   y	      mouseoverq     
      qrCodeExistsr  X      LoadingIndicators  \-2      fadeDurationt        setDurationu         $loaderv   ;1!      -webkit-transitionw    P*      opacity x  :5Q"      ms ease-in-out, -webkit-transform y    u\       linearz   
      transition{    E;       ms ease-in-out, transform |          setProgress}   P      progress~  ^F      -webkit-transform     nU      translateX(   R|	      transform     ue      opacity   n.      -100%     W      reset           0%    	o      langJson  b      currentLang   RK      alpaca_form   l      getCurrentLang    H`	      getString     X2      setLang   \	      langId    P      prop  =3q      .ta-custom-string     -~	      stringKey     *      stringHrefKey     @      string_href   `
      stringHref          :input:not(button)    l      $form     g9'      $applicantImage   ow      #applicant-image  z*      talent_image  ;      .talent-image-label   S      background-image        $videoQuestions   4`n      #video-questions  4      $fileInputs   5
      input:file    b      $hiddenFileInputContainers    j-      .alpaca-field.attachment_default_widget_class     `c-	      apiParams     q      merge     P)B      language_id         filled_data   
xg      alpaca    b+      post  KSF      formLink  5	      form_json     Fb6	      parseJSON     n      setLanguage         control         defaultPostRender     =d      talent_form_page_allow_filetype   U7      </span></span>    (      insertAfter   Jy!      .attachment_header_field_class h2     1/`      .alpaca-control.checkbox  N{      data-checkbox-value   ?&      .slider_widget_with_labels_class input    JH      col-sm-9  O[`	      col-sm-12     38       .alpaca-field-checkbox div:empty  &^      .date_widget_class input  
      readonly  &4      url(  4PB      span  LJL	      show-span     "      talent_form_page_change_text  eM      #lottie-player-camera-animation   x      $input    S      replaceWith   -
	      container     I      containerId   <W      alpaca-field-id   
      input[type="hidden"]  @      $attachmentFile   .&
      .attachmentFile   T      $newContainer     Z5$      .alpaca-field[data-alpaca-field-id="  ?      input[name="  ^      updateJsonConfiguration         eventListeners    D      langChanger   @1      elementSelector   Q      inner-lang-container  
      getCurrent    %M      getAllUrlParams   <      queryString   d	      paramName     m?f"
      paramValue           \[(\d+)?\]$   o
      \[(\d+)?\]    pc      \[\d+\]$  g	      \[(\d+)\]     !      removeQueryParamsFromUrl  Fu
      createSearchUrl   		      searchObj     e9	      searchUrl     [E}      isEmptyObject     U      param     e      initAlpacaTogglers    h      .toggle-alpaca-items  d$      toggler   }      $toggler  n      targetItemClass   -=x
      item_class    W      hidden    oV      .alpaca-field.    D      .alpaca-container-item    0g      togglerText   ew
      show-items    dM#
      close_text    Z	      open_text     Og      toggle    .l      logAppErrors  d      ajax  gF      /errors   :      POST  Y      contentType   g      application/json;charset=UTF-8    Dow      dataType  \9      success   tuW      error     pH
      textStatus    %k@      errorThrown   >      getBrowserInfo    1      nVer  +	      navigator     B'
      appVersion    5       nAgt  	      userAgent     ti      browserName   P      appName   V      fullVersion   ]3      majorVersion  OrUa
      nameOffset     	      verOffset     E      indexOf   ,      Opera           Version   V\"      MSIE  F`      Microsoft Internet Explorer   {R      Chrome    i      Safari    eK      Firefox	   RDo      toLowerCase
   5I!      getAccordionHtml  E      title     CZ
      isExpanded    Lj      
        <div class="panel panel-default panel-ta-default">
            <div class="panel-heading pointer     FD      " role="tab" id="panel-heading-   <6      " data-toggle="collapse" data-target="#panel-collapse-    9Zs6@      ">
                <h4 class="panel-title">
                      B      
                </h4>
                <span class="icon-svg-chevron-up toggle-icon"></span>
            </div>
            <div id="panel-collapse-  .4!      " class="panel-collapse collapse      1      " role="tabpanel" aria-labelledby="panel-heading-     u@      ">
                <div class="panel-body">
                      taC>      
                </div>
            </div>
        </div>
        }}      CookieConsentPopup    	0      $cookieConsentContainer         $cookieConsentLink    ,      $cookieConsentInputs        $langChanger        cookiePreferences     &      cookiePreferencesObj  z5
      allCookies    J      $publicAttributes           companyHash    6VC      cookieConsentLang!           cookiesData"   zY|      cookieConsentOptions#  n&      customCookiesData$     p1      getDomainWithPrefix%   (~      hostname&  6f      substr'    >"l      removeUnacceptedCookies(   o;      preferences)   _YNx      cookie*    j
      cookieName+    +ES      cookieAttributes,  ;D
      cookieType-    (~8      cookie_type.   !      Cookies/   rh      handleCookies0     |~      .cookie-script1          src2   "8      htmlTag3   	      innerHtml4     G       src="5    &9       style="6        </7    
      .actions a8    #K3      newCookiePreferences9  \      edit:  8+      .cookie-preferences;   HK      show<  =G)      .actions a[data-action="accept-selected"]=     <&
      accept-all>    :0      checked?   z      :checked@  rm      cookie_preferencesA    R      expiresB   KB{      overlay-no-closeC        .cookie-preferences-linkD  U>      .cookie-preferences inputE     	%      .language-changerF           #public-view-attributesG   P;      company_hashH  $      _gaI   w      domainJ    qV      service_development_cookiesK   '      _gidL  !      _gat_TrackerM  7u      cookies_dataN  v      getDomainWithPrefix()O           concatP          /api/companies/Q   $
      /languagesR    {      langOptionsHtmlS   A,      language_selection_optionsT    P      <option value="U   	       selectedV     	      </option>W     Z!      custom_strings_in_all_languagesX   U^_)      #cookie-consent-overlay .language-changerY           changeZ    
      isAccepted[    
      forIn\     ; I      .public-view-footer-top-bar]   x      formatAttachments^           attachments_   "m      addAttachmentFile`     Fu)      <span class="icon-svg-paperclip"></span> a     F      sanitizeHtmlb  "V       <span class="remove-filter" c     +`      id="d  
L	      ></span>e     }W      setHeightFromPostMessagef  qi$      .postmessage-height-container iframeg  7      iframeh    6      contentWindowi     CA      postMessageHeightj     	      isIntegerk     a      .postmessage-height-containerl     8      postmessageHeightFixm        postmessage_height_fixn     rO      addEventListenero  7      select2SimpleResultTemplatep         infoq  	      dividerr   IB"      <div class="option-divider"></div>s    ;F      infoMessaget   INO      <span class="info-button-icon icon-svg-question-circle"><span class="info-box">u   q!      <div class="select-custom-option v     ZRI      getSliderValuew    Ux      $sliderx   K      slidery    |`      optionz    D~      handleSelect2HasValue{     y      select2Container|  S9      hasValue}  |
      $selection~          ta-select2-has-value        setTabsCount  F-      .tabs a[data-tab_text][data-text][data-count]     Pvk      setTabCount   !      tab         $tab  =      addCount  W      data-tab_text     $       (    9       <span class="count">(          )</span>  }      getScoreHtml  YH`6      dataObj   T      scoreMapping  D       jobilla   #?      A+    1      scoreObj        <span class="box-label    i      -score    \FQ      -score-   
      ready     i      browserInfo   `[      $html     1R      $body           user  8      is_ios    Q      iP(ad|od|hone)    Aq]	      is_safari     +%      Version\/[\d\.]+.*Safari  y      select2ResultTemplates    H      simple    
!P      is-ios    p	      is-safari     |      is-ios-safari     D_      colno     	      error_log     f      browser         page  _      version   "{	      ajaxError     ,>      jqxhr     su      thrownError   R.      isIE  
,      cache           .close-notification   B9      preventDefault    CS      .cancel-mark  c      mouseout  KH`      keyup           overlay-background-react  5      keyCode         .overlay-cancel   'K      .copy-link-container  	2      $link     JW      .copy-link-value  <      $info     m6      .copy-link-info   1<      select    <b      execCommand         copy  #LZ      link-saved-text   h      mouseenter taphold    L.1      $parent   =      $tooltip  X	      no-adjust     d9      margin    &v      tooltipWidth  Q=i
      outerWidth    !      tooltipHeight     k]2      outerHeight   U;      parentWidth   ~C!      parentHeight  ZUb      parentLocationY         parentLocationX   /      tooltipTopFix     ,h      tooltip-state-hover   fN
      mouseleave    F      tooltip-always-visible    F
      mouseenter    2      li.dropdown-submenu > a   /F/      stopPropagation   fi@      .dropdown-backdrop    n"	      $dropdown     {|      .dropdown-submenu     c      $dropdownMenu     fU      .dropdown-menu    
_      dropdownLocationY     `c      dropdownHeight    E      dropdownMenuHeight          dropup    V      show.bs.dropdown  z	      .dropdown     `~      first           hideDropdown  Y      dropdown-visible  
      removeAttr          dropdown-menu-header  GA      dropdownLocationX     gw&      dropdownWidth     	      min-width     O&      dropdownMenuWidth     m5      scrollY         position  H<*      absolute        block     /      z-index   r      9999        dropdown-menu-right   -      getBoundingClientRect           hidden.bs.dropdown    n}      [data-overflow-title]     Z      offsetWidth   F)      scrollWidth   +]      overflow-title    2      [data-overflow-tooltip]   =      has-tooltip-small     N55      <span class="tooltip-small">  u[      overflow-tooltip  !p      trigger   a,      .overlay-background .overlay .overlay-header  -      overlayHeader     :      $overlayHeader    W      .overlay-cancel-mark  ]#
      hide-close    N6      <div class="overlay-cancel-mark overlay-cancel"></div>    8GR	      prependTo     _      .init-navbar-portrait     l      navbarPortrait    `      $navbarPortrait   {e	      userphoto      ~@f
      first_name    	      last_name     b      None  \H      .init-get-score-html  5U      score     h2      .navbar-portrait .img[data-src]:not([data-src=""])          skeleton-box        <img/>    2U)      load	        data-src
  R#      .info-box, .tooltip, .tooltip-small         infobox         .tabs a   6      .init-datetimepicker  :N      customOptions     x	      datepicker_options    k@      hasDatepicker     !      datetimepickerOptions     D~1
      dateFormat    ;K      yy-mm-dd  
      timeFormat    ugw      HH:mm     Vg$      controlType   E      oneLine   @      datetimepicker    6T      Modal     -6      overlayIdSuffix         [data-popup]  TJ"	      overlayId     "wO      popup     ZD      newOverlayId  1:
      data-popup     p(      .overlay-background#!  l]-      .hide-overflow"    9
      .icon-custom-sparkles#     ]      $icon$     
     
                <svg viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6.657 1.247C6.767 0.917 7.233 0.917 7.343 1.247L7.988 3.184C8.12997 3.6098 8.36917 3.99668 8.68664 4.31398C9.00411 4.63127 9.39112 4.87026 9.817 5.012L11.753 5.657C12.083 5.767 12.083 6.233 11.753 6.343L9.816 6.988C9.3902 7.12997 9.00332 7.36917 8.68602 7.68664C8.36873 8.00411 8.12974 8.39112 7.988 8.817L7.343 10.753C7.31929 10.8253 7.27335 10.8882 7.21176 10.9328C7.15016 10.9774 7.07605 11.0014 7 11.0014C6.92395 11.0014 6.84984 10.9774 6.78824 10.9328C6.72665 10.8882 6.68072 10.8253 6.657 10.753L6.012 8.816C5.87013 8.39031 5.63108 8.00349 5.31379 7.68621C4.99651 7.36892 4.60969 7.12987 4.184 6.988L2.247 6.343C2.17474 6.31928 2.11181 6.27335 2.0672 6.21176C2.02259 6.15016 1.99857 6.07605 1.99857 6C1.99857 5.92395 2.02259 5.84983 2.0672 5.78824C2.11181 5.72665 2.17474 5.68072 2.247 5.657L4.184 5.012C4.60969 4.87013 4.99651 4.63108 5.31379 4.31379C5.63108 3.99651 5.87013 3.60969 6.012 3.184L6.657 1.247Z" fill="currentColor" style="transform: none; transform-origin: 6.99954px 6.00045px;" transform-origin="6.999535083770752px 6.000449895858765px"></path>
                    <path d="M2.39415 8.03423C2.36334 8.05648 2.34032 8.08788 2.32838 8.12396L2.00596 9.09204C1.93505 9.30488 1.81554 9.49828 1.65691 9.65691C1.49828 9.81554 1.30488 9.93505 1.09204 10.006L0.123957 10.3284C0.0878781 10.3403 0.0564822 10.3633 0.0342297 10.3941C0.0119772 10.425 0 10.462 0 10.5C0 10.538 0.0119772 10.575 0.0342297 10.6059C0.0564822 10.6367 0.0878781 10.6597 0.123957 10.6716L1.09204 10.994C1.30488 11.0649 1.49828 11.1845 1.65691 11.3431C1.81554 11.5017 1.93505 11.6951 2.00596 11.908L2.32838 12.876C2.34032 12.9121 2.36334 12.9435 2.39415 12.9658C2.42496 12.988 2.46199 13 2.5 13C2.538 13 2.57504 12.988 2.60585 12.9658C2.63666 12.9435 2.65967 12.9121 2.67162 12.876L2.99404 11.908C3.06495 11.6951 3.18446 11.5017 3.34309 11.3431C3.50172 11.1845 3.69512 11.0649 3.90796 10.994L4.87604 10.6716C4.91212 10.6597 4.94352 10.6367 4.96577 10.6059C4.98802 10.575 5 10.538 5 10.5C5 10.462 4.98802 10.425 4.96577 10.3941C4.94352 10.3633 4.91212 10.3403 4.87604 10.3284L3.90796 10.006C3.47641 9.86183 3.13817 9.52359 2.99404 9.09204L2.67162 8.12396C2.65967 8.08788 2.63666 8.05648 2.60585 8.03423C2.57504 8.01198 2.538 8 2.5 8C2.46199 8 2.42496 8.01198 2.39415 8.03423Z" fill="currentColor" style="transform: none; transform-origin: 2.5px 10.5px;" transform-origin="2.5px 10.5px"></path>
                    <path d="M2.4365 0.0201631C2.41807 0.0332787 2.40418 0.0518105 2.39677 0.0731818L2.20383 0.654117C2.11749 0.913811 1.91404 1.11721 1.65428 1.20353L1.0732 1.39717C1.05182 1.40458 1.03329 1.41847 1.02017 1.4369C1.00705 1.45532 1 1.47738 1 1.5C1 1.52262 1.00705 1.54468 1.02017 1.5631C1.03329 1.58153 1.05182 1.59542 1.0732 1.60283L1.65353 1.79647C1.78154 1.83905 1.89786 1.91087 1.99326 2.00624C2.08865 2.10161 2.16049 2.2179 2.20308 2.34588L2.39677 2.92682C2.40418 2.94819 2.41807 2.96672 2.4365 2.97984C2.45494 2.99295 2.477 3 2.49962 3C2.52225 3 2.54431 2.99295 2.56275 2.97984C2.58118 2.96672 2.59507 2.94819 2.60248 2.92682L2.79617 2.34588C2.83876 2.2179 2.9106 2.10161 3.00599 2.00624C3.10139 1.91087 3.21771 1.83905 3.34572 1.79647L3.9268 1.60283C3.94818 1.59542 3.96671 1.58153 3.97983 1.5631C3.99295 1.54468 4 1.52262 4 1.5C4 1.47738 3.99295 1.45532 3.97983 1.4369C3.96671 1.41847 3.94818 1.40458 3.9268 1.39717L3.34572 1.20353C3.08596 1.11721 2.88251 0.913811 2.79617 0.654117L2.60248 0.0731818C2.59507 0.0518105 2.58118 0.0332787 2.56275 0.0201631C2.54431 0.00704757 2.52225 0 2.49962 0C2.477 0 2.45494 0.00704757 2.4365 0.0201631Z" fill="currentColor" style="transform: none; transform-origin: 2.5px 1.5px;" transform-origin="2.5px 1.5px"></path>
                </svg>
            %     ZY      initAttachmentPopup&   "X      $popup'          init-attachment-popup(     "+      $attachmentViewPopup)  9/      .render-attachment-view-popup*     EO}
      popup_view+    q5?      getFilePopupView,  +^      .attachment-popup-     Zo      popupId.   rB      .overlay-navigation-link/        .attachment-overlay0   3z      currentIndex1  <^+      overlay_index2           navigationDirection3   _4      navigation_direction4  *6      newIndex5        $targetOverlay6    &6V(      .attachment-overlay[data-overlay_index="7  l      initCollapsibleSideBar8    (	      .settings-photo-box-container9     JmE      settingsPhotoBoxContainer:     Z      $settingsPhotoBoxContainer;    +w      $settingsPhotoBox<     ~      .settings-photo-box=   '      settingsPhotoBoxHasPhoto>  s      url("")?   m$      settings-photo-box-has-photo@  P      .alertA    o	K<      $alertB    pI      alertHeadingTextC  f      alertIconClassD    .'      alert-successE           icon-svg-check-circleF     Eb[
      alert-infoG    @G      icon-svg-info-circleH  y_z      alert-warningI     K       warningJ   j      icon-svg-alert-circleK     7f      alert-dangerL  u3      icon-svg-x-circleM     $      prependN   7>      <h4 class="alert-heading">O    GAI      </h4>P     GO      .alert-iconQ   c2      <span class="alert-icon R  PW       no-spacing"></span>S  N=F      .welcome-bannerT   R      welcomeBannerU     \]u      $welcomeBannerV          welcomeBannerIdW   *vC      welcome_banner_idX     f_Z1      welcomeBannerStateY    '      welcome-banner-closedZ     /      welcome-banner-show[   hB#      iframe[data-src]:not([data-src=""])\   )G3      iframeElement]           $iframe^   J}x      maxTries_  M      loaded`    u      triesa     }	      updateSrcb     sz      intervalc         setIntervald   bPk      clearIntervale     Y``      a.close-iconf  I      .welcome-banner-closeg     NW      dragoverh  m}      [data-drag_and_drop="true"]i   hL-      dragging-overj     =      dragend drop dragexit dragleavek   n-

      .ui-sliderl    PS      uiSliderm  ~      $sliderHandlen           .ui-slider-handleo     .y
	      fillWidthp     {;      $sliderFillq   >      <div class="ui-slider-fill job-custom-bg-color" style="width: r    xg	      ;"></div>s     a      $sliderBadget  18^$      <span class="badge ui-slider-badge">u  H      sliderHandlev  .x      .select2-hidden-accessiblew    .      select2x   -t      change.select2y    *g      formz  S7      input[name='csrf_token']{  9      no-csrf|   q*      <input name=csrf_token type=hidden value="}    1|      .ta-qr-code~   (&8Q      .select2-init     +4      $select   :      placeholder   `&
      allowClear    R      select2-allow-clear   ~4      config    ?y      100%   x      templateResult    sky      .select2-button-container > a     iC      .alpaca-form-render   ^;0      input.alpaca-control:file:not(.crop-image-input)  y      defaultFileOptions          maxFileSize         $fieldContainer   ?      alpacaOptions           empty     P      files     0Gi	      extension     i4      pop   	)~      isTrue    #      check_file_extension  ~	      $outerDiv     j      alpaca-required         has-error alpaca-invalid  	      .alpaca-message   N4a$      file_not_allowed_try_instead_message        file_too_large_message    80      input.crop-image-input:file   }      attachmentValidatorFactory    S      validate        .attachmentFile .remove-filter          deleteHiddenInputs    >"      prev        input.alpaca-control:file           keydown   1N      .prevent-enter-submit input:not([type="submit"]), .prevent-enter-submit select    ~o^      Enter     lK      #ui_lang        ui_lang-hover     +      language-selection    
      select2:open  g      evt   +\2      scroll.select2          off   .lqM      label[for="talent_image"] .show-span, label[for="applicant_image"] .show-span     R@k       placeAnimation    0      animation_name    I
^      camera-animation  r      anchor    0J7      label[for="talent_image"], label[for="applicant_image"]         70px  I      .dataTables_wrapper table     vY      #cookie-consent-overlay   G      .panel-heading .btn   @fw      .panel-heading    O)      data-toggle   #      collapse  e3      .applicant-name, .applicant-email, .applicant-phone         newHtml   b      ( " + )   [{      <span class="a-dots">$1</span>    \z      scroll    oi      .info-box, .tooltip   VK      $infobox  i      window-loaded     |s4      table.table-sticky-header            table-header-shadow   B      onbeforeunload    R      $unsavedContent         .unsaved-content        unsavedContent    $      warningMessage    i      unsaved-warning-message   L      $savingIndicator  5      #global-saving-indicator  ,f9      $savingIndicatorMessage   O[      .saving-indicator-message      o      savesInProgress         hideTimeout   .$      showSavingIndicator   V]      saved     Kk.      max   >BC      hideSavingIndicator   4U      getUser   iw      /api/users-dev/me     y      headers   fMW      Accept    #L%#      application/vnd.talentadore.v2+json   ]      getValidatedPasswordPair        password  (      passwordConfirm   G      matched   :}@      confirm   i      pwStrengthOptions     V
      $passInput    &/      $confirmInput     MRQ      $button   z      $bothInputs   sA?      badPasswords  yn      hash  TW      total           wordInPassword    ,      addPasswordError        $whereAfter   %N      errorMsg  T      after     a.      <span class="password-error password-verdict">    "@      clearPasswordErrors   $      .password-error   +%      passwordPair  7      namesInPassword         inBad     	m      passwordMatchOk   *      .error-list   "V      common          minChar   jH      maxChar   :      rules     
	      activated     [      wordNotEmail  bV      wordMaxLength     _      wordInvalidChar   o      wordSimilarToUsername           wordSequences     )	:      wordTwoCharacterClasses   ~      wordRepetitions         wordLowercase     0      wordUppercase           wordOneNumber     i)e      wordThreeNumbers   5      wordOneSpecialChar    a9       wordTwoSpecialChar    }i      wordUpperLowerCombo   ~y      wordLetterNumberCombo     RP      wordLetterNumberCharCombo     . )
      bootstrap3    
      showErrors    {y*      progressBarMinWidth   tDK	      spanError	     p      i18n
  uH      <span style="color: #2f2f2f">     	      CropImage     o      img2crop  u      cropper   R      $imageCropOverlay     ui      aspectRatios  c      aspectRatiosText  0      3:1   Ay/      16:9  g
      baseConfig          minCropBoxWidth         autoCropArea  7      preview   7       .crop-preview     K      viewMode  v      aspectRatio         getAspectRatio    VBy      croppedCanvasConfig   ;
      minWidth  *|	      minHeight     ;x      maxWidth  	      maxHeight      H	      fillColor!           #fff"  Qr      imageSmoothingEnabled#     @      imageSmoothingQuality$           high%  i      getSelectedTemplate&   2	      $template'     "9r!      [name="new_job-template"]:checked(     Yd      #image-crop-overlay)   f      .button-rotate-image*        rotate+    y      .button-zoom-in,   {       zoom-  bh9      .button-zoom-out.        .button-aspect-ratio-default/  r      setAspectRatio0    0}      .button-aspect-ratio-free1     8,T      .submit-cropped-image2           getCroppedCanvas3  ;      croppedCanvas4     :P      toBlob5    IzaT	      fieldname6     q@
      image/jpeg7    /      showCropper8         image9     2l      #crop-image:   j      getCropperConfig;  (      baseOptions<         destroy=         Cropper>   ;=      $buttonAspectRatioDefault?     =<      buttonAspectRatioDefaultText@  eb      {}A    *2      CropOikotieImageB  YY      #oikotie-image-crop-overlayC   cP      #crop-oikotie-imageD   EXf      AttachmentValidatorE   =      fileF  L9      allowedExtensionsG     )u      allowedFileSizeH   V
      getCropperI          ImageJ           isValidK   %      image_not_allowed_try_instead_messageL     )      {imagetypes}M  w|p	      formatterN     PkG      megabyteO  ,i(      image_too_large_messageP   12      {size}Q    M      OikotieImageHeaderValidatorR   (
      dimensionsS    =      validationObjectT  Hd      imgWidthU  pW	      imgHeightV           image_dimensions_incorrectW    H
b      {dimensions}X  1*       x Y         naturalWidthZ  -      naturalHeight[     y      <br>\        jpeg]  t      jpg^   $=      png_   >      setBlob`   f      inputElementa  t      getElementByIdb          Filec  z      dataTransferd  (      DataTransfere  #`      itemsf     a'      dispatchEventg     t3       Eventh     php      zoomablei  9      zoomOnTouchj   H%m      zoomOnWheelk         scalablel  8:	      rotatablem     XE\      oikotie_header_imagen  M      nextStepo  	F      currentStepp   6      $activeStepq   3[      .content-wrapper[data-step="r  c	      $nextSteps     yc2      animate-out-right animate-in-right animate-in-leftt    L+      animate-out-leftu  f$      active animate-in-rightv   [      prevStepw  8+xn	      $prevStepx     1      animate-out-left animate-in-right animate-in-lefty     qH      animate-out-rightz     et%      active animate-in-left{    )      goToStep|  b]      .content-wrapper}  N6      panel content-wrapper~            goToLink  $(      getLabelsForSelect2Values     X      values[]        item  Sm       Option    &D      select2:select    k^	      animation     =m      #lottie-player-   E	      sizeWidth     w!      player    H'      <lottie-player
                           
      id="lottie-player-    0Z.      
                        class="lottie-player-    2      "
                        src="/static/animations/          .json"
                        background="transparent"
                        speed="1"
                        style="width:   M	      ; height:     5m      px;"
                             e`      loop  Z      
                             Iy      autoplay  x&      >
                    </lottie-player>    P>      $anchor    :      $player   )      positionAnimation           anchorOffset  B{z
      translate(          resizeObserver    '      ResizeObserver    7      getFilterIds  (dFc      plan  
      filters   Q      recursiveFind     >	      filter          ids   h9      excludeFiltersFromPlan    Qz T
      searchPlan    E^
      excludeIds          updatedValues     6      pickBy    _O      <span class="info-button-icon icon-svg-question-circle"><span class='info-box'>         notification/<    ]?^      notification/</<  P      info_notification/<   HiJ      info_notification/</<     Kj/      btoaUTF16/<   '-      notificationMouseout/<    4      notificationMouseout/</<        notificationMouseout/</</<          waitElements/<    gCz      waitElements/</<  $      fetchSvgIcon<     3      pruneCache/<  }&      fetchSvgIcon/svgRequests[svgFileName]<    W1      fetchSvgIcon/svgRequests[svgFileName]</xhr.onload     \o-?      fetchSvgIcon/svgRequests[svgFileName]</xhr.onload/reader.onload   ~UW$2      fetchSvgIcon/svgRequests[svgFileName]</xhr.onerror    w      done/<    '      visibleToViewport/intersectionObserver<   icL)      visibleToViewport/intersectionObserver</<     	      visibleToViewport/<         onChildChange/<   6      onChildChange/</<     ~<      onVisible/checkVisibility/<   ai      onVisible/<   j      onVisible/</<     J      onStyleChange/<   )      onStyleChange/</<     O7"      downloadFileFromAPI/request.onload    4#S      adjustBox/<   7@n1      toggleSideBar/recalculateDataTable/toggleTimeout<     R3      toggleSideBar/recalculateDataTable/toggleTimeout</<   P      toggleSideBar/<   +O      renderRecruitmentFlow/<   T
$      closeOverlay/animateOverlayClosing/<  WH      overlayState/<    8      setOverlayInitialStateListener/overlayObserverCallback/<  sN:      setOverlayInitialStateListener/overlayObserverCallback/</<    /       setOverlayInitialStateListener/<   p4      setDatepickerDefaults/$.datepicker._updateDatepicker  }O~6      setDatepickerDefaults/$.datepicker._updateDatepicker/<    -      setDatepickerDefaults/$.datepicker._gotoToday     -      setDatepickerDefaults/$.datepicker._selectDay     >	      $.fn.goTo     A^'      convertAlpacaValidators/makeValidator/<   gS/      convertAlpacaValidators/makeValidator/</values<   	H      convertAlpacaValidators/<     T)r      convertAlpacaValidators/</<   7%Q
      NewQRCode<    M      init/<    Y2      renderQrCode/<    :      render/<  hT      PhoneQRCode<  {      LoadingIndicator<           start/<   Q	      start/</<     /["      reset/<   G";      set/<     	      Language<     +	      setLang/<            setLang/</alpaca_form.postRender  sJ"      setLang/</alpaca_form.postRender/<    |$      setLang/</alpaca_form.postRender/</<  q&      setLang/</alpaca_form.postRender/</</<    WC      eventListeners/<  }s      initAlpacaTogglers/<   sk      CookieConsentPopup<   S1      removeUnacceptedCookies/<     ^q      handleCookies/<   Q      eventListeners/</<          init/customCookiesData<   Fu      init/</<  :$      setHeightFromPostMessage/<    LJ      setTabsCount/<    ~      window.onerror
    y1      done/callback/<   g?.      done/callback/</<     &l      done/callback/interval<   l8v      window.onbeforeunload            window.showSavingIndicator    >`      window.showSavingIndicator/<  >,~5)      window.showSavingIndicator/</hideTimeout<     X      window.hideSavingIndicator    	      getUser/<           pwStrengthOptions/<   RU
      CropImage<          CropOikotieImage<           validate/image.onload      %z
      nextStep/<!    CM
      prevStep/<"    {      getLabelsForSelect2Values/<#   M      getLabelsForSelect2Values/</<%           placeAnimation/resizeObserver<'          getFilterIds/<(    C_%      excludeFiltersFromPlan/updatedValues<     a  b    a            %,                                                                                                                                                                        	                  
                                                                                                                                                                                                                                                                                    &                                '                 (                 )                 *                 +                  ,                 -      "                #           .      $           /      #           0      &           1                 2      (           3      )           4                  5                  6                  7                  8      .                             9      0                             :      2                3   
                         ;      5                             <      7                 8                9                           =      ;           >              	   ?      =           J      =           K      =           L      =           M      =           @      =           A      =           B      =           C      =           D      =           E      =           F      =           G      =           H      =           I                  N                  O                  P      N               O               P           U      P           Q      P           R      S                T           S      U           T      V                 P           V      X                            W      Z               [                \           X      ]                 \           Y      \           Z      \           [      a                 \           \      \           ]      \           ^      \           _                  `                  a                 b      i          c      j           d      i           e                 f      m           g                 h      o           i      p          j      q           k      o           l                 m      t          n      u           o      t           p      t           q                  t                  u                  v                 w      |          x      }          y      ~           z      |           {                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "                #                                  $                              	   %                                &                                '                (                )                *                                 +                ,                -                 O                 P                                Q                 R                                S                 T                 U                V                W                X                Y                                              Z                                 [                \                               ]                ^                 _                               `                                                                                                                                                                                                                                                                                           !                                  "                 #                                 $                                  %                 r                 s                 }                ~                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             	               
                	                                                                                                                                                                       
                                                                                                                                                                                                                                                                        &                '              (                (                (                                ,                              .              /                /                /                2                                                                6                                8                                :                                <                =               >                ?                                A                                                D                E                               G                                I                                K                                M                                O                               Q                                              T               U                U                                X                                Z                                \                ]      	         ^                ^                ^                ^                                                d                                                              h               i               j                               l                               n                                                             r                                        	               
     v                              x                                                                           }                                                                                                                                                                                                                                                                                                                   !                .          
                   /                               0              1               2               3               4               5               6               7               8               9                                :                            ;               <               =               >                               ?                                                 @               A                                                            B               C               D               E                                 F               G                              H                                           I                                                            J               K               L                              M               N                    Oc^   V   Y   9 [     H  <   >  I 	   v e  C v    n    &   A  J           e  G   i  z ] {    
           r E       ]    J    N       }  F    ~  u       _    z     Q D     3    o 4               I               K              O  P  `U                                               O  P  `U  k            j                                                v               O              ~  P  s                                 i               g                                   U    k  P                                                 B                                 P7  P             P                                             P          7    P                    P                                            P                                             P  P             P  P                                                                            P                                                                             r                                                          ! "            '   I     
      , ( 5  * +           5              O  @            ;              ?          @          i            A             <  D E PF PG PH             e       O P Q                \ P] P^ _ P` a Pg Pv  `| P                              z {             z {    }              {              i              i  7                                                                                                                                                                                           P P          P P P P                                                          P                             i                                                      PI  P       P P  P P                                                                                                                                                                                                             P  P P                   P  P                                               Pi              i                     P                              P                            i                      P P             
 P                                  X     
                     k  ]  M 
                   s               i               i               K L P               `M PT `             N PD                  v               R T T  V              \ 
   	         <       i  a                      <                                                                                                                                                                            ^                                   P             i  g          l i               w              {           |                                                           O  S                               "   O                   P                                                                P P P P P P P          P P  PI              i  i            H                A                                                                                          I    O                               r               o           p Pr P                             o           p Pw P                                           <               <  B   P                            y              P            `   P          P P                                                         P           P                                                     P              B               @  A                      P  P            P  P  P  P             	                                                                    a  b           i                                P  P              @  P              ` `                                                                                         P            P  P                                                        $ `                               ^ P_ Pb Pd                P                                <      P                               `< ` `  P                              f h Pj Pb P              P   o                                 q                  s Pt P| P   P `             u P               u } P               u P} PP  P                                             u P                             u P} P                  	               P P `    P P_                               O  
               P  P  P  P P                   i                      P                                                           i                  i        P            i     r                 P                               9                     P P P P P P P P P  P! P" P# P$ P' P/ P P_               %              ( P            ) * + ,              ( P                , 1 2   3                                     8 P               i     ,                                            )                R P                           i     Z              B                            s p q                 % P           P  P P P   `  P P   P                             &          O * (              T  <  B                              A                          e  k                                                     i                               e                                                     i P                 	                 P P                                             e              e                                P   	                 P P                                             e                                                                                                       I                                                                          P< `                                                                                                                                                      O                                       O                            #                              - &                0 2 4              5                              9 = P          : ; P                                                       B C A              T          X U V              \                           _ P` P] P< `^ Pa Pb P                                                                            e                               X   U V                                                l          o w m p Ps P             u          o w                         {              e            {                B                     <                                                                   y  9                            	                                       r  S                                e              e                  e                            I                                                                                                         ,                                 i                                                e                                     P  P P                                                                              % P P_ 7           P P P P P P P P                         &                                P                                                                                                                           N             ? 8 ; >               _ 7           P P P P               P                                                                        N          8 ;           D             r                 E   N              F G     	       8  J            M                                                                           Q             r                     S               F T U R             E  `N P             F PG R P PS P          P8                            T U                          M                                               I                  ` E c                                              
 0B     L                    =    >    ?    @    A    B                                     I$KE         W  V  X        s          s     
                    
                                           "          w          b c d    
      k           b c d           b c d                 ;     
     ;                      
                   
       T                     #      <  "                                       
    O       
    O       
    O       
    O       
    O                  <  "                 
           
                            
                Z      #                  !                      t                   "     
      c                          5  6  7  8         5  9  7  :         5  ;  7  <         5  ;  7  =         ?                     
     	           7    |                     O    
       d                 
                   _ i                                  A         r    -       I         r    -       I         r    -       I            
         
              _                       <         B  T   U  c <        <           T   U  "  c <                       s     
      c                   7    |              7    |              7    |              7    |      
                    7    |      
      7  |            7    |              7    |                           7    |              7    |              7    |              7    |              7    |              7    |      
         |            7    |              7    |                     7    |      
                           7    |      
         |            7      |                                        |            |                                |      
   R                                     #           " #    
   _ 7    
    R       
    _ 7    
      1             
     
         F T U R    
       1     
     3    7          h i j k l          " # &!!a  	     yEl	                        D   E   F    G   s E   H   E   JI   H   s H   J   E   JI   K   s J   L   E   JI   L   s       9M      L   N   E   JI   O   s N   P   E   JI   Q   s P   R   F    S   s JT   R   s R   U   h    U   V   W       LX   F    S   s JI   Z   s Y   L   E   JI   [   s L[   L   E   JI   \   s L\   L   E   JI   ]   s L]   L   E   JI   ^   s L^   L   E   JI   _   s L_   L   E   JI   `   s L`   L   E   JI   a   s Lb   L   E   JI   c   s Ld   L   E   JI   e   s Lf   L   E   JI   g   s Lg   L   E   JI   h   s Lh   L   E   JI   g   s Li   L   E   JI   j   s Lj   L   E   JI   k   s Ll   L   E   JI   m   s Ln   L   E   JI   o   s Lp   L   E   JI   q   s Lr   L   E   JI   s   s Lt   L   E   JI   u   s Lv   L   E   JI   w   s Lx   L   E   JI   y   s Lz   9|   {   h   :~   i    :   i   :   i   :   i   }   F   J   9   m   <   w          h          m    s         9      <      JS   <   <   m   <   w m       w    m    s        m    s        m    s        m    s        m    s     V   J         w m      F       s J   m   w F    V   s J   m   w F    V   s J   m   w F    V   s J      m   w V   m   L   m    w     m    s        m    s        8m   >   =   m   =   m   =   m   =   m   =   m   =               p      J         r	   ;q   >   =   m   =   m   =   m   =   m   =   m   =   m   =   m   =         
`P.` P.` P.` P  ` P.` P.`P	P.`+`PI
`P	PI` CP)` KP)` OP)` JP)` <P)` 9P)` AP)` JP)` DP)` HP)` SP)` FP)` HP)` >P)` :P)` 9P)` 5P)` 7P)` 7P)` 7P)` ;PI"`K$`%J)J-J107`%J7PD?e'eK  `G `F TP`%*/&J WP4 R@ `F PD EeF pP eF P eF P eF MPI eF P9 ` #P %`; `P
P4 
`P
P4 
`P
P4 
`PP4 
`@ 
`F 
PD TeF P eF P@ J    0 f@ %J 7J e  J | 0 P	       P      A        &&,   `                          l   J    J   s          J      "        J         w    &`$P `$PIPL   p	L                               J            `PQH   [hH                              J   l      s  `

P:Q  9x                  :          J     s !         J      w               	       	                X                @   3       	                        
             s &   &s E      
             s &   &s J      s J   w      
          1&   &   1&   &  1&   &s J      s J   s  J   w     ,   0      J       m      s w 5         0(    	`
P-	` P$	`14F`K	`-	`N	` 	` ` 	` ` 	` 	`K	`!	P
P-	`!	P
P*U*PI`<L 9KPJ%
U*
P*
PD)	` 	`,E/D+PC*PI3`P`   `   %                                    &s J   m   w  `P
'PDPT   cT                                     s J   w  &`P
P$P`  :P           	       5              9   '<   <   <        K                         	      s &
   &s     (        J      s J   w               &   &   &   &  &   &             &   &            &   &s J      s J   s  J   s  J   9      <   ^w    ,   +      J        m!      s w 0         0(    &`K`%	(	(	K
`-`@`!	P
PH	`.	` P
 PI`WK;J (@PJ!U
"P
P
PD#	` 	`E(D$#PPI+`P`              (VC   @                  	                  &s J   9      <   ds J   m   w  `P
'P
,PD	PT   T8T                                     s J   w  &`P
P$P<   <                                 &   & `%%:QD   b5D                               J     s  `PQ  f      	      	                         J            J   J   J      m   w    J	   J
         J      s         s J   l      s J   l      s I`(` PD	`  PP(`P

P

PQL   5UL                                 J    s N 	` P%PH   H                              J   l      s  `

PQ\   \   #                            J      J     s s  `PPQ|   ,|   =                                s J      w        s J   m   w  `PPD`P
P4P,  5&<i,                                  s J      s J   s        +'        s J      s       *        s      ,         J   	    m
     s w    &`PP
P(`.`PP(`*`PI` `ED'PPIPH   H                                J   m   w  `PDP<   8US<                                J   w   `P$P      D                             K      '         J        &w          `.	`.	`!P$	`3F`Qx   Fx   B                                 s J         w        s J      w  `P 'P$`PPP   (&      	                                  0(           J            	        m      J     9     J	   <
   <   w 		%` `+`@`	J%	 	  	FP5P            p   `G%p   3                           J     J   s       J   m   w  `
PH	`PDP                                    s       J            1&   &s W        J   +   	      J         1&   &w      J     w     `P(` P-` `PI`PI	Pt  wtT                              m     m     9            ,      J      J	      s s       9
   	         J      s J   m   w    w     J         J      s w m     `+`+`)`PP@`P
PD`*`PPD!`5OTt                            p2d   -                           \&      J   s    '    & `*	`P%T          ,       *          l  u,                          $      J         s       J                    J   m   w    J      '      
       ,              KKR  0(         &`
P(`	 
&`P$#`	+`f/`@0`@	Pl  \               B   |          p   M             |   ;   @   x~^@                              KJ    KJ   ' 
`
l   =l   6                                    KJ   s            R    `
 P-`OP  E  E                                            K                  J   s    !            J   w           K)   
       KJ     w          1&   &               J   	     w    
   L          m      N   J   w   /` `	P `		P$`A-H` ` P$`A-H` ` 	` P$	`@	` '	PE,	`P%P        -      }                        h   =Eh   8                                     m   L     m   L    `@`@	P   i@d                                J    \             J                m   L     J     w     	            1&w    &` *"`.$` `O`P `PIP         M   0  E                               J   J            9      <      J   s  <   N   w  	   J
          J     s w       R       w       w  &(` ` )PJ`*`
PP$` `P$`	P%P0            H   <xH                                      1&w  `P$P  Q  <  	                                       J   J   m   w                J      s )        J      s J   w       J	   J
   ~            J      s          L      J     J	   J
         1&   &N  J      w            m   w 	
%#`'	` PD`/`AH` P-` P
'PI` &` 	P(`/` ?/`P$`AJ	`PEP        -      L                t                                 $   L                           J         s /        J      s K             `

P-`
P@	P@   @                              J     &.L    ` 	PD  <84                                     9                   J                     m           J   #   
   h     J   i    "         J     J	   s        J
   m   w  /` "`	I`  *
P-`P5PD     -      P   ;P      	                           J   m   w )	`
PD	P   l   a                  
         J   S         J     J   w     J   "        J     J   w 
    ` `P$` `PI	PL   RL                                  J     w  	` P$P   Y,   B   	                             m      J      J   9   <   <   w )`	J
%	&	FP4PD   GD                              J   m   w  	`
PDPl   Zl   8                           J      $         J      J   w     ` `
PI	P   R&n      	                            m                       J     J   s w    m	      J
      9   <   <   <   w 		@`+`K`
PPD`	J&
%	&	&	F&P5+P         ~   D   ,}D                              J   m   w  	`
PDP  C  5                             s      J   q         J         s         J     w 	      J         s J      w          J         s         J              J     w       J         s J         w       J   	     J
   w  `P(` `
P-`PI`
P
%P `
P `PI`
P
#
PI` 
P$	PD   o+D                              J   m   w  	`
PDPD  qMqD                            J   J     J   s       J   6            J   s J      s   J      !      h     J   i            J	   
   -        J	               J                  w     `!
PH` PP `@` `PI
	Px   x   <   	                             m      J      J   9   <   w )`	J
%	FP4
PD   oD                              J   m   w  	`
PDPl   Zl   8                           J      $         J      J   w     ` `
PI	PP   yP                                    J   s   `P
PQh   ph            
                      s       J            J      s          s J   s       J   s  J	         
   s J   s        &  1        J   	       '  &w #        J   	      w     `PH	` ` P(`P
	P(`P-`P
PH	`/` P ` 	P9Pl   l   6                           ,            s J   s  J   s     ` P
PPQ  hT                                            J                       J         	       	     	        J   s    J   s &!*       1&   &       2'1&   &       1&   &  1&	   &  	` 	`1	H` `PP,` ` `!T                =                        d  D                                                  s                     s                    	      
         
            s        1&   & 1&   &     &1&	   & *.` P(` P(	` 	`O`P(`.+	Td                            0j                 :                                  9                  	    J                   J                   J      	      	       J                   J	               	  
     1&   &             1&            1&   &  1&   &              J   J      s 7              1&   &	  1&   &&.  2               1&   &	  1&   &&.  %   *   %             	  s &.  (        )   
          1&   
  
  J     s '   /           s &.  ;   2          1&   &      s 1&   &&.  9   9         &.     . ` ` ` `  ` `   	`N
` P-`	9 `	30 	`

PO	`	&`

(`P-`
P `	P@` `T     J        6                      ,  QO                                            J                 J    s     J      s      J      s        & &	`-	`3H	`.	`3H`P'`P(`P'`T,                              9                        l  U            	             $     J      s                J   b             K         J   s J   s    J	   s &N  0(        J
      s  &`P(
`f &`.	` P

PPG'`@` PTl  \                            G   H                           )   v   (  |
(                                                J   s       J    J     w    J         w    J   	   
   w       L      m   L      J      w  ` `P(`P$` (P$` P$` `@`PPD  /D                 0           J    i       J         J      s J      s KJ      s K     J	   
   s      J      s      J   J      h      i    9     <      s       L     J   #         J     L   Y           L      J   J     w   J   w     J   J     w +       w  +   ,     J       /       w  0   &` `.` P)P P*` 	P(%` P(` 		PP(`.` ` `.` P$`P$` PI` ` `OP  u*"                 @                m     m      m      m            s      9      <	   	   <   
   <      <
            	      J      s             J      J   m   s J      s s )         J   s  J   m   w    9   9   m   <	   m   <   m   <   m   <
   <   9   m   <	   m    <   m!   <   m"   <
   <         J#   $   %   s J#   &   %   s J#   '   %   s J#   (   %   s J#   )   *   J+        J)   s  s ,   &w    J-   .   w    J/   0   w    J/   1   w    w        <         J   w >         J   w  `P)`(`


 ` P.`G	`	P0PP-	`P
PI`%	%JJJO!	%J%J(J+@1` P*
Z*
Z*
Z* 	PP	P$` P$` P$` PDc`)	`/	`	PIg`	PP0   az0   	                           J    `   x   U                  	            s J      s J      s %           s       	    `P
PP-`P)`'`A	V\   QSH\   +                             J   s  J      J   s  J   ' `PP)Q      K                             J   s  J      J   s  &   J   s  J      J   s  &' `PPPP%Q\   kiZ\   +                             J   s  J      J   s  J   ' `PP)Q   ,   K                             J   s  J      J   s  &   J   s  J      J   s  &' `PPPP%Qh   h   /                  	               s J   s     J   s  J   ' `	P

PP)Q   _   X                                 s J   s         s J   s  &   J   s  J      J   s  &' `	P

PP

PPP%Qh   //h   /                  	               s J   s     J   s  J   ' `	P

PP)Q   [qa   X                                 s J   s         s J   s  &   J   s  J      J   s  &' `	P

PP

PPP%Q      d                             J   s     J   s  ?         J   9         J   s  &   &<   w     `P
P.`	PPIP   V                                                        Ks     F              
                    Ks      	` =P JP*Qd  Yd                  )              s         Ks            J        &s s *       &                               *         J        &      &w        s 6         J           K&   *   &w       J      w   	              J
      s #   F   $      J      w    J      w         w )   )    `	P-`	P(`	PP+`*` `@`	
P$`	P-`	
PI` PD`  P ` P$` P$`PI`AF	`!Q   &   g                                  s                w             s                w     	`P ,P)	`P ,P)Px    x   ;                  
               s J             s J   s  w  `PKP

PPP   |   Y                                 s J         J    w        s J         J    w  `P1P$`P-PP                                    s           s       J            m      m         m	              J
      s H   	     J
      w        s J         m   w                  w        %%`P)`PI	`   "`+`G	&`@` P-` PD!`P .PI'`/`P0+P              F             m%*   S                              J      s *        J      s 1   &             ` P" P "   /lJ   w                  	                 s       J                             w        m   s    %`P)` `A	H` `P)`5CPJ	P         q       0          L   SL                                   J   m   w  ` PDP   =3   V                               s       J      (         J   s  J   J   w      &$`P(` `PPJP          U      Q   w                            J   J          s  1   &  w     J        w     J        w        w   `  [
0P$` (P$` 1P$`/	P   8[   Y                              J      J   J          s  1   &s s              w  &%`  [
PP(`P%P          X     oSx          	       #                         h                         m      m      m     m      m              9          J	   %      
     J	   &   &   
      
     m          J	                        1&   &  1&   &   J     s J      s 1&   &    J     w     w    J      s J      m   w   J   .        J   8  <   m   B   w #    " 	`
`@*`   `*`;@.L2'
PP@9`PD;`J=` PPDF	` 	`!)JGP:LP     I      I            @                                    J      s       J      s      J        J      s w    J   	     J   
   s w  *!` P(` P(	` , PP$	` + PP%P             x   cx   ?                             w      J            J      w     	`*` `P)Pd   -sid   /                             J        &   &s J   w   	` +
P
?P$P   w1]p   7                               J      s       J   s   &` P(	`P#T          6       4            9L+                                 J   4           &.        J     J   w      J              &.  	        J   &	   &  J   &
   &  &   &       `J` ` `PI	` `@	`#@	`$Q`   YX`   *                                  s 1&   &  J   1&   & 
`P*     '                                   s       J      s          J      s 	   g   
      J      s J   s  J      w        J   	   s    J   
   s w    &`PH` P P ` P
PP$` P PPIP8   {8                                 s   `PQ   a   n                           J           J   J      &            J   J   w "   	              s w     	` 	`P 	`[P9P   lcT   F                 	               s J      s           s J         &w  `P%PH`P
PPT  	T                 )                m         (             s J   s           J      s           s      J	   
     s      J      s     J      s         J      s                                     #                w o                    s        s 9          s <   9          s <   m   <   w )   @	`/	`P
!PN` 	P(`P(`
P(` 	PH	` P "P 	`K	` 	`
P 	`%[#[#%	PH$%	P(J"P9-Pt   	hlt   9                                    J      w     m   xw  	` 	P$	`5BPD	P|   |   D                             J   w     J      w              w      `	P$` 	P$`/`O	Pd   Sd   *                                    w    J      w  `
P$` 	P$Pd  QfT                         9        J      s J   m   w        s J   q   	   	   J
   ^   _`N               	   J
      KJ   &	   J
      KJ   s  N   a                                   `K`	P
OPD	`P ` $`
 4PE	@	` 	` 	`5Vd        U   V      Ew   T                 
            s       J      s *                s J   s  N
    `PH` P-`P
	PJP   \   @                         m                         s J   m   w J`I`P
P4PD   oD                              J   m   w  	`
PDP   @r   f   	              
               J                   J   J   J                m   w 
   )` `A
	F` `5CPI
	P\   5x\   #                                     J   s    w  `
PP$P   2&   [                 	                s J      s     )         J      9   <   w 	    `(!`P
PH`.`%FPI	P  i.                  +          J   J             s J      s    9   <   <	         J   J
      J   J     Kw    J   J
      J   J     Kw    J   J
      w    J   J
      w    J   m   L      J   m   L      J   m   L    ` `PP)`%&K`  P$`  P$` P$` PD`@`@9`0HP|  @.|           	                       J        w       s J      s J      s          s J      s J      s     J   f          	   
   J      s            &   &s J      s J   m   w    /	`PD`PPP(`PPPH` `~ 	P xP
  P
PIP   '   S                             J   J      J   w    J   J   w         J   s J   w   ` 
P$` P$`
P
P$P  Ru                 E               s     J     Ks     J        s         J        s      J   J     J   s              J     J	   s    J
   s  &      
s &w   J       w   J       w   J   w  @  !     J        s    $     J   %   Z   &       J   L         J   L   L         J   L   L      .                  J   s  L          J   s  L   L          J   s  L   L     J        w   J       J     s w A     J     w   J     w  `P(`PH`
	P-`
	P(` "	P(` `PP	PP$`P$`P$`P.`
	P ` ` ` `
P(`P)` +P.` )P.`P$`PPI	`P$	`P$P  ?}l                                 s        s J     J   s         J     Ks                J     Ks                  s J   s  L   L	          L
   L          L   L     J       J         J      J
      J   s w  `PH`P
	P @P `AF	`P(	` ,P
P.	` 	` 	`$		I#PPDPH   =H      	                             J   m   L   )`0P   5   V                
                  s J   9          s J   s  J      &<      w    &	`P
%P
PEPD	`$Q4  J3DO4                             J         s J   l      s J   l      s J   l      s J   l      s J   l	      s J   l
      s          s J     s J   s  J   s  @` P*
P*
P*
P*
P*
P*
P'`P
P
P
PQ\   :ns\   -                           J         s J         s  ` P PQ\   :ns\   -                           J         s J         s  ` P PQ   C   G                         m         J     J   J         9      m   w   K`
 'PD$`QL    4+L   "                                      m    	`EQ                                       J     m   s          s "         9   <   w '         9   <     <   w    &`*`PH`
P-`P `%&JPI	PT   k@T   $                            J   s  J     KJ   s   `P $P#Q             	                J           J   J   s       J   J   s       J     J   s                   =      a                 J     s L   3                 J     s L            J	     J         h       m
   w  ` `P(`P(`P(` `	 
P)` `	 
	P)`J	`
 PDP$   &$                               h   4%h   7                         m      m      m         9      <    `G(`%	9+QX   GuX   $   	                             J      m   w )	` ,PDPT   uT   &                                         w      `'`/`O	P   Y.   ]   	              	                9    <    <    <                   m   dw 	   )	`	%((L	D`/`5
BPIP4   \,4                                 w   `*P   <      $                                               d        -                     w          m   w     `/`M`/`	P `PIPT   W1T                                            w  `	P$P   (   ]                         m             s           s J      s          J   m   w +`P(`PP)`G`P4!P   R]      	                              J      w    J        &   &w    J      s K      J   	   s   
   J        dm   w )	`G	` PD	`%LPD
` P*` PH	`	PDP`   h`   &                                 J      s w    `
 PPD`'	P   1   n                
                s       J      s J                      	          w 
   &`P(` PM`  `PIP      c                         m      m      m      m      m         9      <      <      <	    `I+`%	)	*	:0Q   %   ]                           J            &   & &   &w   J            &   & &   &w  	`"6
P$	`.
P$P   "5   U                  	              w   J          &   &w   J          &   &w  	`	P$	`!
P$	`
P$P   _#   J                                        J         w     m     w  	` P$	`EEPDPh   F$h   +                                      w     m   2w  `P$`5BPD	PP   jbP                                         w  `	
P$P   1;@   Z   	                             J         w            +   &w     m     w )	` P$	`
P$	`EEPDPL   ^!L                                         w  `P$	P  	     	                                             +   &              J         w        d*d'   & w            m    w    )	`  	` P$	`
P$`/`ECPI	P@   '?@                                   w  `P$P       V                         m     m     m      m      m     9     <     <     <	   @  `%	)	)	Qd   K5d   4                             (             s J      s     	` P
P(Qd   
(d   2                                            K          `*`/`@	`$Q  7    	             4              J                s          J        w         K     J      s J   m	   w    J
   [        J
         J      s J      s J   s       J      s J      s       J      s J      s J   s       J      s       J      s       J   9     <      J      J      s J   s  s <      J   s      J       J!     m"   w 4   )` PM	` P$	`)	`O	` P
PD` ` #` PP
P( ` PP)#` PP
P(` P).` PI!`%( P
PP(J!PH&`
PI_P|  =c|          
                       s       J      s      J      s       K              K   	      	        J      s "         J     w          J	     w      "         J
        w    &`P(` P(!` P(`/`@` P-`
P `PI`.` PI	P    7l                              J     J   s                 J     w    J     w    m   L      J	      w  !`P(#` `P$`P$`@6`$P$P0   ir0                              m    `E0Q  t                   A          J     w          J   &   &s J      w        s J	   m
   w        s J   s  J      s J      w        s J   w         s J      w       w               !      "          s J           &   &w        s J      s J      w        s J      s J      J!   w     "   s J   w  9     J	   m#   w   J	   m$   w   J%      ?     J%   w  A    `PD`%9@P*xU$`P
"PD	`P
+P	PP$`P
%P$`P P$`P$` `P0	P$`PPP$`PP

P$`P
$PI`PD` PD-` `P)P  }T(                                    s J      s J             s J      s w        s J      s J             s J      s J      s w &`PPPPP$`PPPPPP$P   "g5   R                 	            s       J      s     J        &s J      w  *`P(&` PH`P
P$Px  X<x                               s       J      s      J      s      J      s     J        &   &s       J      s J	     w   J
   #        J   m   w )         J      s J   w      .`P(/` P(+` P(3` P(1`)PI` P
$PD	!` !`P> !` P
PIP   hS   X                 
            s       J      s      J        &   &s J      w  2`P(0` PH%`P
/P$!P      F   	              	                   s J      J   J      J   J   m   w )	`P
$PDP   m   b                
                s J   s  '            s J      s 	               w &`P
P PPM`P$	P   d   {                  	                      K          9        J   "       J   J      w         w  	`)	`)	` `	`.` ` P)	`P$P  [3s        	          D        #        J      s K$         J   J   J   s 	      9        `        J      s K      J   	   s            J
   
         KJ      s     K    K                 K       J   l   s         J   l      s       K   #       h    N%     J   l   s <   (   l   J     s K      K    N"   -       KJ     w 0      0       K   2         N   3       K   5       K   8   D   9       h       Ki    N    KJ     w "   ?       KJ     w B     0(  D      ` 
P 'PM`J	`N	` PJ	` PH `f ` PH`+`@`PM`
P(` `@`P-!`P*` ` P0 ` ` `  ` ` P ` PI)`@)`Q              @   -@                              J      s K `PQ   Y                                   J     s q        ^   _`8                &   &    K&&.      a   J         s           `J	`P-` $`	@	L	` PM`Q         *   @      O   =                                 s J   m   w        s J   m   w  `P
PD
`P
P4P   L   k                             s       J      s      J      w          &s J      s J	   w   `P(` 	PH	` 	PD	`P%P
"P$PH  H                                  s       J      s      J      w    J      s "   	      J      s          J      s         J	     w     
     &s J      s J   w  &`P(` 	PH	` 	P$	` P "P P-	`P$	`P%P
"P$P   a   i                            J   9      <      <      <	   
   <      J     s <   m   <   m   <   w  `%	*	*	*	*	P(	*	JP4
P$   W:T$                               $   V$                               &  hI  _                y           J         J        J               J   s &         J   
s     J   	   s   v      	       J
     &s     J      s   $        J
     &s      :       J      s   3   !          J
     &s     $     J      s   3   (          J
     &s     +     J      s   v   /          J
     &s     J      s   $   6     J
     &s   9     9     J      s   3   =          J
     &s      @     J      s &    J      s   t   G     J
       s     J
     &s     J   s    J   s     R      J     T     J      s   "   X     J
     s   Z     J      s   "   ^     J
     s   `            &
s         s B   f             J   s &         J   
s   o   9     <     <     <      J   <      J   <    `/`/`/`
P)`	P@	
` P 	`*	`P(` P `P@` P 	`*	`P@` P 	`*	`P@` P 	`*	`P(` P `P@!` P 	`*	`P@&` P)
 P 	`P(	`P(`PP.`@/
` P 	`'PM2
` P 	`'PM5`PH7	`P-	`
P)	`PM<`%	)	)	)	/	?CQ   rJ
                                                     1&   &  1&   &  1&   & 1&   &  1&   &       	               1&
   &  1&   & 1&   & `E1 @;KK	'& JK;Qx   *)Bx   F                         m      m      m      m      m      9      <   @  `%	Q   ;J   c                 	           J         J      s 1         J      J      s s    	      	    `/` 	P-` 	PPC; `DVx   Ix   >   	                                   9           J   m   w )`` 	`PDP   $   n                 
         J        J         9          J          K"         J        w 
    `-$` `M` `PI	Px   x   7   	                                w        s J   m   w )	`PD	`P
PDP  o  ^               !                s       J      s      J      s      J      s    	      	        J      s      J	   s         K          
     &             &   &            &             &   &            &   &  &   &  &   &s J      w !   &`P(` P(` P(` P ` P(`PH` `%    K	PJsPI	Px   TNx   :                             J         m   w    J      m   w  	` 2PD	` PDP  &  J        	       "                s       J      s   9           h         J      w   J   	   s J
   w    J      s J      w  4                    J      w      J   m   w   J   w        w    J         J      s 9   <   w &`P(` P((`K` ` P$` P
P$` P2P$`A	K
` ` PI`PD`P$`P$` "P!P$	P      H                             s       J      s           J      s N `P("` PH` *P%PX   kX   &                             J   w     J      w  `P$` P$	P  (                   K               J      s       J      s       J      s       J      s       #   
      J	      s       
            J   s            s  	   	  J      s  
     J      s    h   9      <   9       s  <   <      <   i    9      <   9       s  <   <      <   i   9      <   9       s  <   <      <   i         J      s    /   9    0         J!      2   h    3         J"   m#   s       J$      s        w     J   %    
  &&   &s J'   m(   w    3   @          w    J)   m*   w >   C   +   J,      m-   w     w     J.   w  I      J/   0   w  	`)	` -P)	` /P)	` 'P)	` P)	` 6P 	`P)	`P)	`  P)	` ,P)	`%%*%PMO%*%PMO%*%PM@"	` /P 	` 	`*PI*	`!PI,	`J.	`P
9PD>`/`P$`P>F `PDJ`JL`PIO	` P$P      n                           J   6        J   J           J   J         !   	     J       s  L         ` `PN`#	Q                                       J   J   m   w   J      w    J     J     9	     <
   9      <      <   <   w  #`+`(PD`PD`&%*%*OPD	P   6I   i                                 J   &   &  J                          &   &  J   &   &&.    `
' . P   U   H                             s          J      s K     J        w  `P("` PI` P$PD   :M4MD                               J    w  `P$P\   \   0                                 h     i          h        ` Q   (   g                                      s &   &           &   &            &   &s J	    w  `.P
<  P
  PP\   \   (   	                                 s J   m   w )`P
.P4PT  w4                            J    J                   J        J     s    	    	        s J   	   s     J   
   s               J        &&w     `
 .'`/`P-`A
H `P	P((` P `PJ
PT               Z            ,1  ]                #                     J   s J   s        9      eJ     J               J          	                    
   s      J           J                             1&   &      	                  1&   &  J   1&   &   1&   &s   <`P
P 	`	`	P3H	`  `1H`.]/`	$ PT         \                                  Z         D   \D                              J         s  ` PQ   M   S                                        J   s  J        J   J         w  &	`-	`1H`
P/` @PP          R                 T   *T                                    s J   m   w  `P
7P4PD   @)mD                                     w &	`P$P    r         	       !                     s       J                J      s          J   s  	            J      s s      J	   x/                  J      s         J
        &        1   &  1&   &           w    J     &        1   &  1&   &             w   `PH	` `1
H` P P-`	 PP(` 0P-` 	 P$`
 PP         q      9          ,                     +                   9   9   
9      <      <   ?9	   
   <      <   ?9      <      <   ?(9      <      <   ?29      <      <   ?<              9      eJ     J                                   K      KeJ     J          1&   &  1&   &  1&   &  1&   & 
 `%	%'*K'*K'*K'*K'*@` 	` 	 	`5 H`.!` `!T,                                       T4|                                     m      m         s      J        J        J          	   s       
   s          J   s       J      s      J      s    l   J      s      J   l   s   9      <    	            J      w              J      w          !     !      "     J      w $      m   L          s J    m!   w     s  %   -      J"   9#   <$   w 2       %   s J&   '   (   m)   w     %   s J&   *   +   m,   w     %   s J&   -   +   m.   w        s J/   m0   w        s J&   '   1   m2   w     3   s J'   m4   w 5   J6   m7   w        s J&   '   8   m9   w        s J&   :   ;   m<   w        s J&   =   >   m?   w        s J&   =   @   mA   w B    9C   D   <E      J
   <F   <G   mH   <I   w B    9J   K   <E      J
   <F   <G   mL   <I   w B    9M   N   <E      J
   <F   <G   mO   <I   w B    9P   Q   <E      J
   <F   <G   mR   <I   w B    9S   T   <E      J
   <F   <G   mU   <I   w B    9V   W   <E      J
   <F   <G   mX   <I   w B    9Y   Z   <E      J
   <F   <G   m[   <I   w B    9\   ]   <E      J
   <F   <G   m^   <I   w    B    9_   `   <E      J
   <F   <G   ma   <I   w B    9b   c   <E      J
   <F   <G   md   <I   w B    9e   f   <E      J
   <F   <G   mg   <I   w        s J&   '   h   mi   w        s J&   '   j   mk   w B    9l   m   <E      J
   <F   <G   mn   <I   w B    9o   p   <E      J
   <F   <G   mq   <I   w B    9r   s   <E      J
   <F   <G   mt   <I   w B    9u   v   <E      J
   <F   <G   mw   <I   w B    9x   y   <E      J
   <F   <G   mz   <I   w        s J&   '   {   m|   w        s J&   '   }   m~   w        s J&         m   w        s J&         m   w B    9      <E      J
   <F   <G   m   <I   w B    9      <E      J
   <F   <G   <   m   <I   w        s J&      m   w        s J   m   w        s J   m   w        s J   m   w        s J&   '      m   w        s J   m   w        s J&         m   w        s J&         m   w        s J&   '      m   w        s J&         m   w        s J&   '      m   w        s J&      m   w     9   <      <E   m   <I   w     9   <      <E   m   <I   m   <   w     9   <      <E   m   <I   w        s     J      s     J     w v      s  J   2   z             s  J   &s J   w           s J&   =      m   s J&         m   w        s J   m   w     w      w      w         w   `.`/`/`/`P(`P(` P)` P)` P)`P(` PJ$`%	@	`.	` PI	`.	` PI	` 	` PI`@/`P
PDF	` 	`PIJ`P =PD\`P BPDd`P APDh`P
PDt`P *PD~`P
PD  `PD  `P 2PD  `P /PD `P 5PD `P 7PD -`%	*	/	&	J -PD :`%	*	/	&	J :PD K`%	*	/	&	J KPD V`%	*	/	&	J VPD u`%	*	/	&	J uPD `%	*	/	&	J PD `%	*	/	&	J PD `%	*	/	&	J PD `'`%	*	/	&	J PD `%	*	/	&	J PD `%	*	/	&	J PD `P ,PD `P 3PD `%	*	/	&	J PD `%	*	/	&	J PD `%	*	/	&	J PD >`%	*	/	&	J >PD M`%	*	/	&	J MPD {`P 'PD `P 0PD `P 9P `P PP `%	*	/	&	J PD `%	*	/	&	&	J PD `P PD `P
PD `P
PD `P
PD `P 8PD `P
PD `P LPD `P 7PD `P 9PD `P kPD `P #P `PPD &`
%	&	*	J &PD 0`
%	&	*	J <	J 0PD E`
%	'	*	J EPD M#`P(	` 	`P 	` 	`V	P
P `P 3P 0P `P
=PD c`*`*`*`PP          4  )i$                            9         <    <         <    <     <      J	   J
   <          J   s  <         <    <         <         <         <             w  &`%/(/(( 
P
P(/(//@	`P%P4            d  pT                            9         <    J   <         <    <      J   J	   <
          J   s  <    J   <         <    J   <         <         <         <       J                   w     &&`%/-/( 
P
P(-/-//@	` +P*Pd            L   DL                                    s J      s  	`P
P#Q<  v]<                             J   w        s J      s          s J      s J   ?         J   9	   
   <   s J   m   w          J   m   w           w &	`
PD`PPH`PP `P
,P>	 `PI	`P$PT   T8T                                     s J   w  &`P
P$PT   T8T                                     s J   w  &`P
P$P   YC   m                               s J      w             J   .                Kw    0(       	`PPD `f `
PD:`@P          $   C   X   o}X                                         s w &	`PP$P   @	                                  s J   s        J      s             J      
      J      s                 w     `P
 PH` 	P-`A
F`  
P `PI
P   z   Z                	                s J      s       J      s                  w &`PPH` 	P-`AF	`P$P  y                                  s J      s          s J      s      J   w     J      w    J	   w    J
     J      s w &`PP(`PPH	`P$	` 	P$	`PD	` PP$Pt   t   7   	                                 s J         J   m   w )	`P$
PD:PH  ?(                 I                                  s       J     J   s       J      s              J      s 8                w    J	   
      w       J   s       J   s       J   s       J   s       J   s  J        J   s  J       J             
                J      w    J   w     J   9       '  '<       +&  +'<   w    J	         w    J	         w    J      w    J      m   w    J      m   w    J      m    w    J      s d   >             w    J   !   s 2   C      J   9"       &  &<   w I    `P)`
P)` P-`A8	H` 
P-`

P$` 	PI `	P(!`	P(`P( `P(#`P-#`P-!`@` 	P$`	P$`
P$` 	P$` 	P$` PD` PD#` PD)` PD2` 
P-`

P$` 	P-`
PJ8	PH              |             [@r   j                  	              J      s              J   w     J         w    J      w  ` 	P-`AF`	P$`
P$` P$P   U   E                                J   w     J      w       J      w  ` 	P$` 	P$` P$P   9   j                  	             J      s              J   w     J         w    J      w  ` 	P-`AF`	P$`
P$` P$P  .Q  1        
       ,                 J   w    J   w         s J   w            s J   	   s    
          s J      s 
      J   s  J        J   s    
   J   s       J         J       &  &w    J         J      s w .	`
P$	`
P$	`P
P$	`PP)	`PPI!`
P-`
P("`PH	` 
P$	`  
PP%P        *    ]  d               S                           m            s       J      s J   s            s J   w     J	   
   s              J   s  J        J   s  J        J   s       J   s       J        w    J   s       J   s       J       &  &   #       &   $       '%          J   '   *       &  +      J      w    J      w    J         w    J         w    J        w    J         w    J          w    J	   !   s 2   <      J          &  'w #   @      J        w B      K#   D      KJ"   s  J#   I       J      J      w L      J$   %   m&   w     '   s J$   (   m)   w  `P)` 
P
PI	`P
PD` P-`A@H!`
P-!`
P-`
P(`
PH	` PD!`P("`PH`
 # #@` `O#	` P$	` P$	` P$	` P$	` P$	` P$	` PD+` P-` P ` PI2` %P ` PI6	` #PD:	`PPE@P        X                   FW   n                  
              J         w    J      w    J      w    J      s J      w  ` 
P$` P$` P$` PP$	P4   p\4                                w   `*	P   2N}x   ?                            J               K         w      &`-` `@	P          >      CK                                   s      J     J   Z         J      s 1   
      J         J      s w             J      w    &`P(`	 ` P % PP ` PIPt  	dVt           
                       s      J     J            J      s j   	      J      w    J      	       J
      s s 1&   &w    J      w    <         J      w    J      s J   w     &`P(`	 ` P-` P$` PPP$` P0 ` P$` P
PIP   P                                   s       J      s J             J      s 	      
    
          s J	      w  &$`P(` P 6P `A	H`P
EP%	P                 a          x  \jdh                                          s     J      s      J      s     J      s     J      s                                    	           J
                s w   %`P(` P(` P(` P(` PH`@	`
PP%	Px               (c|   Q                                  s       J      s      J         s w  
*`P(` 	P(`PP%	P          P      JHj   ]                            J         s J      s s               9     <   m	   <
   w  `
PPP(`A	F`%(JPD	PD  $                                   s       J      s       #         J      w        J   J	      w     
   s J         s J      m   w  %-`P)!` P)`/` P$`A8 ` P$`P*&
P*%
PEPD               X                                               J      w    J               1&   &w    J      w    J	   
   w        s J   w      m    w &` P$` ( P$` P$` P$`P
P$`P$PD   {)D                                   J      s  ` PT   b, T   "                             9     <   m   <   w  `%(JPD	PP   rvP                                      s w  `
PP$P@   WD@                                  w  `P$	P`  )'4n@                                    s       J      s      J      s         9   	   <
      <      <   <       &         J       s         J     w     *`P(#` PH` P&-`%***K`.` PM`PK	P`               P   w             t                                s       J      s          J      s 	      
      J      w     
&`P(` 
P 
P ` 	PJ	P          s   @  0                                      s       J      s     1   &      1&     0(      J        w    J        w          1&s J   	     w  N`P(` P("`  `-` P$` P$`P0P%	P@                  R                                  s     J   s  J   s       J         w  
*`P(`	P
P(` P%	P          Q      3pp   -                                s       J      w  &`P(`PE		P          ,      +                                   J      s             J      w   J      s     J      s           s     J     w  	.`P-`A	H	` P$&`P(` P(`P(	`P%P                 -             p(   q                
                       s     J      s            1&s J   s         w .`P(` P(`P
P(	`P%P         j   H  7Y|8           
                        s J      s       J      s         s J      s       &           &	   &s      J
   w    J   w       w &`PP(` 	P(#`PP(`* `-P(	`	P$	`P$	`P%PH           @   (@                                 w      w   `*`*	P   ?/                                m           s       J      s       J         s  w     9	      K<
   m   <   w   0`P('` PI
` >VPD`%,JPE	P                  j                  
              J      s J         J      s    %         J      s    
    ` P.*P *P.QX   
`hX   $                                J         s  w  ` >VP$P  ;hp                  &                   s            J      s ,             s                 J      s ,   
       	   s    
             J      s ,             s         D        J      s '             s              J      s J   *        J         1&   @&w      J      s J   *   "     J        1&   &w &    .`PF` P-`P(` ` P-`P(` ` P-`P(` ` P-`P(`O` P `PI` P `PJ	P             	                                       s     J      s      J      J   	   s s       9
              K        J      w     .$`P(%` P(&` PP ` ` PJ	P               z"   ]                            J         s J      s s               9     <   m	   <
   w  `
PPP'`A'	F`%(JPD'	P`  t!@                                   s       J      s                          m          w      m   s       J   	   m
   w    J      m   w  %%`P)!` P)&`("`'!`G``A!H	'`K`J&`5C1PI` PD` PE!P`               Y             m   O                                =            J            s J      w     ` 
PP)P   E   ~                                                      #                w +             w        0(      @`
	 `
P `/`@P\   \   '                                             w  ` `
P$PD   KnD                                       w  `
P$P   wF   F                            J   w         s J      s J         w &	`
P$	`PP P$Pd  
T                                           s     J      s     J      s      J   	   J
      s s       9          J      w     N	   J         J     s w  `P( ` P(!` P("` PP 	` P$	`+	` .PP%Pd           X   FlX   $                                  s J      w &	`PP$PX   FlX   $                                  s J      w &	`PP$P|  l            	                             s     J      s     J      s J                1&	   &s J
     s                 s 1&   &s J
     s        9     K<   m   <   w   `P(#` P(` P-!`AP
bP)"`'PP
TPI`%+JPE	P|                                                  s J      s         s J      s J            J   	      s w       J
         w  *%`PP(%`PP-` PP$` P%P               Oi|   6                                s J      s           w  	&&`P	P(`P%	P          5      5   ;                                J   s J      s           w  &"`PP(	`P%P          :      oC                                    s J      s J   (             s J      s    3             s J      	   &
   &w    &`PP +PP `P
0PIP   x   n                             s J      s         s J      s    	   d	        J         w  `PP(`PP@	`P$PD  44                                s       J      s      J      s      J      s   9   	   <
     <     <      	   	    K         	    KL         J     w  &`P(` P(` P(` P(`%*)N
` `@	`P%PD               ,I#   c                                  s J      s J   6             s J      s J      w    &`PP `PPPIP   
   c                 
            s       J      s              J      w   J     w  `P(` P(` 	`P$	`$P$P  D5y       	          M                9   	  <           s J      s     J   '        J   	   s J
         9          J           J              s J      s           s J   w    J   J          J   KJ     ?       J   KJ   J      s J   s  J   s             s         s J   s  J   s         2         J   KJ      w   J      s <   :     J      w   J      s J    w  @   6   @   !    "    #   s $   w   %   L&   E   O   E   !    "    '   s J(   )     	  +1s $   w   %   L&   M    $`%N!`PP(` )P ` `PP(	`P
	PD
` ` /!` P
P
P(`P(!`P
P
	P(`.` P$` 
P-` 
P$` 
P
P0 `[P$`0 `[4 
PP$`@P          D  Ex4           	                              s J      s         s J   w         s J      s         s      J	   J
   ,        J      J	   K     w    .`PP(	`P
	P$`PP(`P(` `PJPD             h_                                  s J      s              &s J   w        s J   s  J      s J	   
   w       s J   s  J   w  &"`PP(	`P
P$	`P
P	P"P$	`P
P
	P$P\   "M\   ,                           J              J   w      ` `
PIP   O   r                                 s J             s J      s ,   	         J   s J      s    w &	`P$PPPP	P$P   $r   Y                                      J   s J   s  J      w        s J      w  F`*	`P
P
P$	`P
P%P          X      <   G                              s       J      s J   J        J     w  `P(` P `P$	P   A1   S                  	           9      <      <      <   F<   h   	   i    
   i   <   w  `%***'@PD	P   >U                                   s       J      s .         J      s J      s    #          	   s J
   w      &`P(` P/ PP `P
$PJ	P             \   #\   '                               s J   s  J   J   w   `P
PP$	Pp   p   8                                  s J      s J         w F	`PP P$Pp   -ap   8                                  s J      s J         w &	`PP P$P      \                                s       J   s      J   l      s      J     w &`P(`P(`
P(	`P$P`   L`   )                              w         s J   m   w  `*`P
P4P   _   J                 	            s       J      s                 s w 	    `P(` 	P-`
PPIPX   b[;X   )                              w      w      w      w   `*`*`*`P   x   V                                 s J      w     w      w         s J   	   m
   w  `P	P$`*`*`P%P4P      J                                 s J      s J             s KJ   dw &	`PPEPP$P   g_a   n                                s       J        J      s     )                          `P(` ` PH	`.`.`4; `1V   S   \                                s       J      s             m   L      m   L	    `P)#` P(`'`G	`@`0P   b~   G                                 w    J      s J      w    0(   m    	`P$	` PP$	`M	`EQ   C
   `                  
           J      's       6         J      w     m   s    
    `P)` ` P$`5CPN	PD   h#,D                                J      w  ` P$Pl   {gl   7                             ,         J      w    0)       `/` P$`@P   Q   `   	                             J   9      <      <   9   	   <
   <      <   s J   m   w )`%	*	*	
/	JPJP4P   Ga                             9     J   !        J   J   s              <     J   !   	     J   J   s              <             w  &`% .P  +P@	`	P%P                'b   k                 
                          J       "      9     <    <      9      <    &`)	` 	`8H`T          j       R              h            q  >               -                           m     m     m     m               J     s    h
   
 3Bi    
z},Bi   
 FHBi   
 "Bi   
 bJBi   
 0Bi   
7'*Bi   
 Bi   
KBi   
 ^@yBi	        J      w    J	   
   m   w     m   w 9   9   <    <   <   9   9   <   <   <   <   <   <   <   <   <   <   <   <    <!   <"   <#   <$   <%   <&   <'   <(   9)   <*   <+   <,   m-   <.   </       90   m1   <2   L3      %.`P(`@` PD&` PD=`PDB`%	%'MG	%%&&&&&&&&&&&&&&&&&@]	%&&'@j`)	@p`T               ;         $  {Z                          $      &  
@GzB                J   D          *  ,  J      s &  ,     0(         	.`'`.`& `f `
PJ,`@	`$T$                                   /   W      m|*   W                  	                 J      ,       J   s  J     s    	   	    	` ,P
P QP   P                              J       1&   &w  	`
1P$PH   )!H                                    s J   w   	`P
P$P    (                1                      J   s       J   s             s               s "                  s 	           J         J   s  s s     J        w                        $        J      w       J      w   5         	    
   s        s w >         0   !      	    
   s        s w &     +   (     J      +     J    -   '   .               s w 1     `P(`P(`
P(`

P '
P-` 	PPP+`.	`*`  ` P$`AH	` P$`.`[[P.`.`[[PI`  `[PJP         '      2         `   `   3                           J              J             	` 	` P    t   E                          J   J    s                         &   & `P(`.`EF`)+Qt   GO9t   =                              s                               `P(` 	Q  X  ]                "          m     m     m      m                     9   ?
qq??
qq?????   9      ?	   ?	   ?   ?   ?   ?   9
    <   <          s <   <      s  <      9   <   <    <    <      <   <      <    	  9      <     <    @`%	$	,	,	%	%	K`%	'	(	(	(	(	N`%(&	P('PN!`%((((*&@_`%	)	9cT        W      Z            Kyd   ,                                  s       J   s   &`P(	`P#T          +       )          D   bD                                      s  K 	` P$Q`  SHY`     	                                 s         J         m   w   J         m   w   J      	   m
   w   J         m   w   J         m   w   J         m   w )	`P@	` 6PD	` 1PD		` 2PD	` >PD	` ;PD	` 7PDPD   DD                                 J   Zw  ` P$	PL   ["L                                 J   
?w  ` P$	PL   L                                 J   
w  ` P$	PP   P                                 J      s  w  ` VP$	PP   RP                                 J   
      w  ` 	P$	P   @N   q                              J       J         	  	     s J   m      
?w     J   w   `  P
E5NSPD` P$	P   ]   O                            D            9       J   <       J   <   w     `
`	% @'PIP  e;                 -                        s K            s J      s s J   s             J   K            J	                          s J
      w      J      s L                  J   w                            s J      s L         J      s     J      s J               s  Ks     J     w    J   w   `P*	`$PPP
1P@	` ` 	`PP$	`  P)` 	`P)	`P)	`PP)+` P(,` P PP(	`PD	`P%P             -   Q                           m      m                     9      <     <    @%`%	)	9)T         K       N                g   	                                 s         J         m   w   J         m   w )	`P@	` 7PD	` 1PDP      W                              J       J   s J   m      
?w     J   w   ` P
.5N<PD` P$	P   ]   O                            D            9       J   <       J   <   w     `
`	% @'PIP   .0   J                                      J   1&s J      s       J   w   &` PP(`P%	P          I     ;  C                "                  s K             s J      s s J   s             J   K            J	           s J
      w       J      s L                  J   w                            s J      s L         J   w   *`P*`$PPP
1P `@!`/`PP$`  P)` 	`P)`P)`PP)` P%P         B  <   G<                                 M   &	`-P  RHTz       	          L                  J   s       J   s       J   s      J       	                               J	     s M
     J   J      s J   s  J   s            s        s J   s  J   s                  J    w   J      s <   %     J      w   J      s J   w  +     J      -      J      1      2     J    w 4   R   4               s J!   "     J#   $   s s w  %   M&   =      =     (    9)   *   <+   ,   <*   s           -   s J!   .     J/     	  +s 1s 0   w  %   M&   L   .#`P(!`P(`PH` `(` `  P)` P
P
P(`P(`P
P
	P(`.`	P$` 
P-` 
P$` 
P
PI`  `P0 `[M PPP$`@&`

P(`[9 	PPP$`@P             d         '   B         0   d0                                 	`%Q0   0                              	   	`$Q0   50                             9    `
Q0   d0                                 	`%Q      V                         5                 M      9   *<   <   M      ,`P.	`.	`*(NV  P$  J                !                   h         eJ     J     J     J     J             s I   	      J   	    
   s J        J      s s w        J             J      Q         J   	       s J        J   1   &  J   1&s w !        `*S` `P-`+[M PPCPI	`   `+[B  PC
PI	`$T         I      G         P  h                  #                         J   s        J   s       J         J   s        J        J      J   s  c                	           
   J      s M     m   M               9      <      <   s              s J        J     	  +s 1s    w      M   #    +#`P)!`P(`/`P)`O`P+`)` `  P)`@'&`

P(`[9 	PPP$`@,PP        f        O                                       3                     J        J           J   J      s J   s  J   s         9	     <
       <     <     <       <   s     J                 s J   s  J   s           J     w   J      s <        J      w   J      s J   w  $      J      '      J      +   $   ,       J     w .   7   .         J       s w   !   M"   3    "`.#`.#` P
P
P( `
%)/))O)PH` &'`P
P
	P(`
P$` 
P-` 
P$` 
P
PI`   ` P0 ` PP$`@P                       P   WP   %                          h      i       i      i    	` Q0   9"	0                              	    	`$Qt  bT                                    eJ        J      J   s                  h     i                      J   J	     w     J
   M
     J            w  ` `	PH``AH`	H` 	` PD	` 	`_P%Pt               V          0   d0                                 	`%QT  g-4                                   J   eJ     J     9   9     <   <   	    
   s <   <       +<   <   <   <   <   <   <   <   9     <     <     <   <      <   <   *#`@	`%%)&	P(&*&&&&&K%)))&OTT                         |   a^|   ;                                                        	` 	`'P3F`PQ   )''   {                                    &   &s             &&   &s       J      s J      w 	    m
   Xw  %`!
P)`"P)` PBPD`5CP5	P         u   h   }-h   5                                J      w       J      w  	` P$	` 
P$P   M   |                                    &   &s             &&   &s       J      s J      w 	    m
   Xw  %`!
P)`"P)` PAPD`5CP5	P         v   h   }-h   5                                J      w       J      w  	` P$	` 
P$P   aP   Q                                s J   s  J      w          &   &s J      w  `P
PP$` 
P-PP<   YM<                               J     L    `P   i-   i   	              
             #              J      /         J     9    <   m   w 
   )	` 	`P9P|   ?
|   A                           J   3         J   w   J   J   m   w     ` `P$`PI	P   ZI!   g                             J     J            J      s J      w    J   9      <	   w  "`(`PP$`%JPDP  )|    	             B                    J   .               J   &s J   w       J      
     J                  J            	            1
   &          J   &           J   1&   &            1&   &  J   1&   &  J   1&   &  1&   &   1&   &  J      "         "      "   1&   &  J      &     J    (      )         )      )   1&   &        J   s      J      ,   1         s J      w    5        m            s J      J   s              w     m           J!      J   w B   	/	` 	`P
#PI` ` . `% $ 0 3@(-  -@`
PI	` 	`P
P. `P

P@	`* `	(	`
P;"P             =  }       x  k;h                                J   s           J         w    J   9      J       +'<      J     J	   s +&  +'<   w   J   P         J      
     J   K1&   &  J   K1&   &w           &"` P(` P$`	 
	PP$` ,  P 	Px           8   g8                                    s   `  N                                            h               m             s              J   m   s    h     +`K`P(	``P3
H	`T     ;   U                                  ^   v                           J   1        J   J         s J   s         J     J   s         J       ` `
P
PCF` P `(V(   I(                                `$  <     
      	                               h                 J      J     s       J      J   m   s   8   	    w 8  	    w <    +`	P)`,	)	EPH`!	 	!0T$     7   {                 L   	kyL                                  J    s  ` P3  `        `    PM    `$  \    `$  g  h    p  `_  Q  R  S  T  F  V  W  X  $  Y  J  )  Z  [  \  ]  ^  _  `  a  b  c  d  G  e  f    p	  `$  \    `$  g  r    @t  s  h  	  p  `  `F     @W  V  X  $  Y  J  )  Z  [  \  l  ^  m  n  o  p     q  a  b  c  d  r    @0  s  G  e  f    p
  `t    `{  |    `    `  @  r       4     px    
     )         P_    P-    `    PM    `t        `\    `h    p  `$           U  G  e  f    p  `$        [       p  `  R  S      `$                  `$            |     `         p  `  `  7        p    @        `          `   (  p  `    `  @  `7      '  p          )  p!  `"    |   7     `   ,  p  `  +  p  7    @    %  `$      |              $  `   /  p'  `      @  $           >   &  `   1  p"  `#  `.  p            0  p    @      *  `    |      )  `   4  p(  `  3  p       @  +  `    ,  `$   @            	 
   -  `x    .  `/  `@         )  0  `1  `    ?   # $ >  % 2  `  @3  `( ) 5     * +  -    . / >         0 1 2 3 4  4  `y  6   z  7 8 y  % 5  `6  `@  : <    = 7  `8  `  _  9  `@  :  `  B 5     <  `    L M   N ;      a  J   R S T 	  @"  U V W   X Y Z ;  `        I D  E    J K     >  p    >  `   
  @x y w ?  ` c b d @  `   ~ b d a       u A  ` b c d B  `5  C  `$        j D  `   E  `   l F  `  c G  `  c m H  `$        I  `$     
    l J  `$    n   c K  `$    n     c m =  `J  pK  pL  pM  p$      @b  d c e f  4  h @  p5  ,  Z     A  p  @  @B  pC  pD  pE  pk   @F  pG  pH  pI  p o 0  p q r   v  s a   j   t u L  `$         M  `$       m    Q  `         R  `   _     V  `W  `$   h    U  `   T  pS  `T  `$   @   f  S  pX  `Y  `t          N  `O  `$    @  P  `U  pQ  pR  p      Y V  p]  `^  `           _  ` `  `     Y a  `b  `      c  `             "  d  `    e  `$                f  `Z  `[  `\  `X  pY  pZ  p[  p\  p  @      ]  p    h 5   ,    a   Y ^  p  _  p g  ` N     h  `$          k  `c     j  `   f  d  pl  `   i  `c  p$   ;     _                     @  ;    @  e  p n  `$     m  `  @       g  p$   @     r     r  ` $     q  `       X  f  k  pp  `   j  ps  `$         @  o  `i  p  $      l  pv  `$        u  `4   $         @    i    a  Y o  pw  `$    	   u        ! " # $ % & ) ( ' , + * - . / 0 1 2 3 4 x  `$    6 7  a  O  % & ) ( , + 1 8 t  `$           @    	 n  pp  p q  p5 y  `  
       P     P  P  P	  P
  P$  C , O  D z  `F "  G '  H {  `F G "  H '    `O P Q ~  `_  h z  p  @    @T  }  `y  p  `  `S U _  W X Z Y [    |  p|  `x  p_     I       @{  p  `  ?    V   B   @#  &  @  =  f      P    P     P  P   e  i    `  ?    `   $   &  =    ?    `$         Z   c    `$           O   Z      `$        pY   p  `  `  `$     @ <   "    9   t        p   p   `             :       <    /  	  ;      @     `                `  `$  ` a b c "     d a    `  h   `  w  j $  e k m 
   `$  f      p  `x y B    `  `  @  }  ~   `   `$        p  `  `$  @    O    S     m     )  ,     `  `  @  @  @ O  a      @A    @B  b     @C  c  !  @?  3   "  @  "        8 y    `  `%  @  	       `$   #  @ <    "  $  @   9   |   # p  `  `@  &  @  '  @   `  `@      `@  	     `  y    `$   \    `  `   	    $     "     @       `     `	 t     
 y    `       `  `& p' p( p) p        * p + p(  @)  @   *  @+  @ #                  !    ,  @   , p  -  @- pt  	   `m Q D   `     u   `  `$  q    s   t f  Q p  `     z   `  `$  q    x   y f  S p  `$  |     } q     `  V W   ` O      Y /  @ "    `      X p  `@  $     .  @ W p  `  `    X  0  @ c    )    `  `  ` $   \        a   "                a    `Z p     [ p    `e h         `  `  `] p ^ p  `   `  `    _   D  ` pQ     `   P  "  C  D  E      `  `u      `	    `  `o     @    `    p  `  `	    `  `    :  @  u    	      t      `    `    !  p        `    `   p  "  p    `  `	                        p    `  `  p  p8  @3  t        9  @o  :       p      p  `      `    `  `       $  p    \        `                    %  p  `: r  <  @   a  W    ` s  p9   `  `$  ` a   p  `  `c =  @O    
 f    p  `  `  p  `~  p  p  p>  @d   `[    ;    `  k   l m    n   W ] d   p  `$     n @    `  p$  g     i p   p  ` v w x y z {   ` ~  )     `  `   f    p  `  0  f    p  `     `  0    f    p  `  `   1  %  f    p  `  p  p  p  p  p?  @       `$  ,       `     `$    i         ,  W   `$         r  B     `$        #     `$    r          `$             @       p\    ` $             p 7         \      X      )       ,     p  p   `  p  `$    K _    p    ` $  :             p  a    c        _   @  @ t        Q       p `$        `$           p `A  @      `  p  p  p  p  pB  @_ i    `V %    .  &   `r    D  @- . \   `C  @     p `$    - 1 2       , <  4 "     5 >  6   `$  0      p `$    r   ? 
 `$     E  @9       : ; <   =  >      pc  .   @ t    F  @A  `;   B 	 ` Y 7   p  p `  I N  `T  "  U    >  r  V  `   S      p,  _ W N  @ O  @X  Y     `$    r   >  `. \   `   C D E .    @ t       $  F   G     G  @H r  H  @I   J - I  @K J  @K  @L L  @I  M  @M h   pO P Q |     p     p_  [   p; a  \  `  p  p  p  p  pP  @_  ` `$       Q  @p q >      r  O  t  u 8    %  `$  ,     ` `  '    ) O + ,  ` `S  @    B  T    V W  u    U  c <       ` `T  @     T    V W  u    U  "  c <        `$  \    `$  \   ` $  Z  [      @  r  V  @t  s  h    p  p  ! `$        G  @   " `  $  # `$   ;     B  $ `$  e      % `$             O     ) `   c  a     * `; a       + `   c  a     ' `( `$     5     ) [   0       c 9  a    ; W  @b  d        p   p  pu X  @& `$      7    p, `- `  $   \   7    y           l     0 `a            1 `2 `3 `  . `/ `  p$        \        c       l  a           d      x      p  Y   p4 `$           5 `$            z     y         9  \  6 `7 `$      @       8 `9 `$        I       & : `; `$       @ `  d  ? `  d     )   	    $  \  f    p= `> `$    1                  p< `_  Q  $    1   ]  @     p  B `[ $  A `  _  @7    p|   C ` D `E `$        F `b  @       _    G `H `$      a    I `J `$     -        K `L `$  O  D    M `N `$  , $ O `P `$     #  ; Q `R `$  e /   1 3 6  c  ; S `7  V `  X  > W ` ? T `U `  p$     <  ?   i  @     p|   X `Y `$    D    E F p G H I J K  L    D @  M N O P Q R Z `[ `$    W t       Y l  @  Z _ `  1  	 ` `d a `d b `d ] `^ `$    1   pc   p    p   p\ `_  Q  $    1   n  @     p  c ` $  e <   X  d `e `$  e S   W t       Y o  @  Z     f `$    i g `$    i j `k `$  e k    c O  v    h `i `$     n    c q r  t v y    q  @    p|   l `m `$    w z n `o `$      w z p `$     z @    {   |   8 q `$    <    ] d r `s `$         s  @     w t `$  y   w   u `$    9  K _  v `w `t  @ $  e  @      I  u  @y       r    .   	    7  _           \  N     X     B     @  x `y `$  y      r    @   z `$     .  \  7         { `    | `$         } `~ ` $    Z      `$    w I   ` x  @       0      ` `$     e ;     \   `$      `$  e         `$  e       `$  ,     P  ` `  p  p    $  ,   u              P      PR  @o           p       p>  U  @ b   Y    pp [    p   p   p   p   p4       p   p    p    p   p  Y  @   7      p|   Z  @   p[  @   p\  @   p^  @
   p`  @   pa  @   pc  @   pd  @   pe  @!   pf  @"   p,   p.   pg  @   ph  @8   pj  @@   pk  @S   pm  @[   pe   pf   pg h   pj   pp  @k  pr  @v    px  py     p}  p~  p  p 	 pY  
 p  p  p   p  p  p  v  @  pw  @  p p  y  @  p @   _  ; #    p  p  p      `$    [  `  $       p `      `$          `$             p `$   @      `  j  `v      f    p `   j     p `  j  `$          p ! p  ` `$  '   ` `*  `,  `,  `/  `/  `z  @5 R r      `2 3 4 8 p6 c   `$  (  Y ) 2 p+ 3 p- 4 p. 5 p0 6 p1 7 p ` `$  9    r  :       R S 1 < = 5    .   O    @ ;  ` `/ p0 p1 p9 p{  @|  @  }  @  $      ~  @    !   " $ #   @_ 7  `  @5 R r      `2 3 4 = p6 c   ` `$  #  5 y     `$  B  Y 1 < p > p ` `$  C    r  :       R S 1 < = 5 ;  ` `; p? p  @_ 7  `r   ` `F G H    `I R S 1 r    .   	  $  7  _           \  7 A h  N    K   L 5      B   `H    @1    N O P    X   `   ` `  @ `  `r    @  
 R  ` ` F T U R  e    K   L 5     
 V W X  ` `Y Z r    .   	   @ F T U R @   `$  7  _           \  A 7 h  N  5  [    B   ` `F G R H S    `I R S 1 I p   `H    @1    N N    O   P    X     B   `\ ] ^  ` ` `     a r  b d e     f g    `A  ` `R   
   @  @  $       h i j k l    @   " $ # 3    `  p  p  p  p
  p  p  p  p  p  p  p  p  p&  p*  p-  p2  p5  p6  p7  p8  p9  p:  p;  p<  p=  p?  pN  pO  pP  pW  p`  pa  pb  pf  ph  pm  pt  pu  pv  pw  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p" p$ p% pO pP pR pT pU pV pY p\ p_ p   $              1  @    	  
                                                 !  "  $  #  &  %  (  '  *  )  ,  +  .  -  0  /  2  1  3  2  @4  3  @4  @5  @6  @>  7  @  p?  F  G        p  ;  @      7    #  p|   r  p; ] }  pe   pr   p   p   pn T  e o   p   p  p   p   p p  p . pA : p `@ p  N   A p B pF C pG D p: E pH D  `F pG pS H pJ pK pL p_ M pN pQ X                     ?               H              J              N                                  9   "   i        0   	          -             [      u        ^      z        c      }        a             v              z                                                      ~                              	                                                                              	                     !              !                        !   	                                       |       !
           !           !                          !            !                                                                                                                                                                           !             /            3  
          =  
          G  !   &       h     9       o     >            C       {              2   [                 !                              b            c            d                        b            c            d            v                         |                   %            ,  	          \            =          !
 L          !
 I          ! B          ! 5            T                        l            w            y            ~                                  !
                       $                                                            !                                                                          	                        o            .            '            ?             _            '                 	               <            E            I            J            L                                                       =            ,     _       +            2     b       1            ;     d       :            Y  	          G     b       C            T                 
          b     t       j     |       v             q            p                        |                                     9  
                                    #                        
                        &                                                          ,            '            4     _                                                         
                                                                       1     
                    C     $       Q     '       J            g     /       U                        r            l                          1   _                                 	                                  >     ]       ?  
   _       U     e       I                 o     !
 Z     v       ^     z       g            e            l            }            $                           ,               	            H               B               E               X               `               c  	             l               s                            !   #                                                                           *                                                       
	  	             	               &	  
   |         0	     |         <	     |         d	     |         U	           !
 F	     
       C	          ! r	     |         o	     |         x	     |         z	     |         	     |         	  
   |         	     |         	     |           	   %       	               	               	     |       !
 	     |         	     =       	     |         	     |         	     |         
     |         
           !
 	     a     !
 
          ! 
     
       
     
        
               (
               9
               =
               M
     |       !
 A
     |         `
     |         f
               m
               x
               
               
               
               
  *             
               
               
               
               
               
     |         
     |                            |                                                                                                                                 	            #  
                                                                                                    4                                                                                                   t        t            -     %       2            J     _       3            5            7            9            ;            C            =            [     7                     	   _                                                7            D     #   1        "       F     "        G     "       :     "       H     "       Q     #      S     "  B          "    #          `     F     "  d     G     "  e     _     "  s     H     "  u     :     "              $     n                    4     v       /     !       ?  	   {       H     ~       [            V     "       L  
   #       p  "          b            o     %     !                       !
      '     !   
               (     ! H      n     n                        9                 X     X  C               k    Z    G               y    y  I                G    G  t   !              7    7  u   B               {                             7            c    Z       b                                                                                  1    1     <              I    I                 ]    K                                                      -            n    e       ;                        0             0                              q!     q!                !  ?$  !  ?$                D"  #  ;"  #     #             "  #  "  #     #          `$  /  W$  /                  %  4&  %  4&               &  (  y&  (                 '  .'  '  .'                N(  (  N(  (    #          A)  /  8)  /  '            q+  /  q+  /  8  0          +  &/  +  &/  9  #             l,  |.  c,  |.  =  .            K/  /  B/  /  N  $           ^0  3  ^0  3  \              0  y1  0  y1  _               3  3  3  3  s  #           3  Y6  3  Y6  y            w4  5  w4  5  {  ;            4  5  4  5  |              6  U6  6  U6              q6  7  [6  7               6  X7  6  X7    #            6  P7  6  P7    $          7  =  7  =               8  +;  8  +;                8  #;  8  #;    #           ;  y=  ;  y=    #            ;  q=  ;  q=    (          =  ,?  =  ,?               &>  >  >  >    #            _>  >  V>  >    (            J?  ?  .?  ?                ?  A  ?  A                 A  A  A  A                B  C  A  C                C  E  C  E                 E  K  E  K                 K  %L  K  %L  !              9L  M  'L  M  .            1M  <R  M  <R  7             N  R  N  R  >            PR  9a  >R  9a  W              S  S  S  S  _  '            /T  U  'T  U  `  %            WU  U  NU  U  k               U  IV  U  IV  n               fV  V  ]V  V  q               V  YW  V  YW  t               W  W  W  W  y               X  X  W  X  |               X  X  X  X                 Y  Y  	Y  Y                 [  [  Z  [                 [  r\  [  r\                \  _  x\  _                _  `  _  `                Pa  a  ;a  a                 a  b  a  b                b  j  b  j                c  cd  c  cd    "            d  f  d  f    &            se  f  se  f    (             e  ~f  e  ~f                f  g  f  g    !            h  i  h  i    E           (j  t  
j  t                j  k  qj  k    +             k  |l  k  |l                l   m  l   m                m  m  m  m  
               m  Vo  m  Vo                o  "p  o  "p  "             ?s  Et  6s  Et  4  /             t  t  t  t  @               u  u  t  u  E              v  v  u  v  M  '           v  |  v  |  T            w  *x  v  *x  U  #            tw  x  tw  x  W               #|  |  |  |  z  $           |  j  |  j                }  ~  }  ~    f              l      (              8    8    %            0    0    $                      %                       ,                                \    \    /              J    J                  C  |  C    (           l    c      (                                                        E    E                \    G                                      =  !    !    !          f  D  P  D                 =    =  !                O    O  #  1               {    1  ?                    ?  3          =    4    F             n  1  a  1  I                )    )  J  >           L  ^  7  ^  R                G    G  Z  !           s    d    `              G    >    h               |    |  s                     x              .    %      >              x    x                 <    <    "                                   
                      t    t               X  ^  O  ^                           !             g  z  g                  Q  	  Q               y    m                            !           [    R                                          	                                                   <                     9                     3              {    {    %           ^  F  U  F    E                       3                    B            S  k  J  k  &  7                  8             t    k    9  _             
        @                      P                      |  "                                 1  *    *                 b  Z  Y  Z    -             &    &    .            A  m  ,  m                  "    "                <  c  3  c                    o                                       '          #               q    q    !             #  w  #    %                    !  %          ?    )    ,                     /  *                    ?             E  &  =  &  @  C               W    W  N  /            Y    Q    Z  0                    `              !          <            Z    Z    L            +    #      =                      /                      )              O    O                k  4  Q  4              W    6      "                      <                      %              %    %                E    '                 -                      w    n      F               H    H                _    J                  9   9                        3                    G  $            Z  M  Z                 b  L            9  9 h  P            x  o  l  ,             @  7  t  Q            L } C } |  P                                     9             	  	   .           
 b 
 b             }
 Z t
 Z   O              #  #   /             V  M    0               -  -   0                 A          = ) 4 )   >                                9 c 0 c "  5              !  ! &  *           p c  g c  .  D              "   " 7  F             N# $ E# $ I              3% /' *% /' V              ' k( ' k( g              ) - ) - r             ) {- ) {- v            + g- + g-   .             - F- - F-   (            <. / 3. /               . . . .                / / / /               U0 2 L0 2               `3 84 W3 84               4 6 4 6               r7 	8 i7 	8               8 G 8 G               G {I G {I   !           I bJ I bJ  	  ;            J sL J sL 	  B             L SM L SM 	             M KQ M KQ  	              N O N O $	  .             P 1Q P 1Q .	                Q 9V Q 9V 9	              V TX V TX Z	             Y ^ Y ^ i	             Y ~^ Y ~^ m	              Z l[ Z l[ v	  '             [ >] [ >] |	  2             x] ] o] ] 	  1             ^ j^ ^ j^ 	  2            ^ P_ ^ P_ 	  6           _ ra _ ra 	  ?            a a a a 	  G            Pb b Hb b 	  ^            c f c f 	              ;e if 2e if 	               ?g g 6g g 	               h zh g zh 	  /           h zi h zi 	              i Mj i Mj 	  $            vj }l mj }l 	  &           l Am l Am 	  G             pm On gm On 	  ,           n Xt n Xt 	  [            t u t u 
  F            v v v v &
  H             hw w _w w -
  z           w x w x 3
  2            x y x y 7
  ,            y z y z A
              .{ Z| %{ Z| K
              z| \} q| \} T
              } ~ } ~ `
             a ( X ( n
  B            [  R  q
  9                u
  K            W + N + 
                (  ( 
  ,            I  @  
                  
              ]  U  
  3             N  N 
  "           [  R  
                  
  +              }  
               X  O  
  3                 
  +            >  > 
              ^ ; U ; 
              a D @ D 
  "          ` = F = 
              4 % ' % 
              B  +  
               U  U                w  [    !                   &              l  l                w  w C  !                  M            X , P , U               d  H  z  !              )  )              <  /                      H             : g 1 g   C                   D             - q $ q   P                   M            C  :    I              a  a   c                            S  K    !            G  G              4  +    I              ; { ;   L             ?  ?   C             b h M h                 
                                , [  [                p  a                                                     
 [                      &              @  @ 8                 C  %             W  F  f                   j               z  z n                  }                                       $            K  K                B  B               ^ 
 M 
                                                                     D  D   #            ;  ;   2             !  !   4          ^  F                  |    #             X q X q   3                                                                    % l  l                      	          5uN2q      	g'g'Gg   s    O^partitionKey=%28https%2Ctalentadore.com%29,:https://ats.talentadore.com/static/layout_main.js?v=4.6.0hm26-2964e10 necko:classified 1 strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAAAAgAAAAAAAAAAAAAAAAAAAAEAOQFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAT5MIIE9TCCA92gAwIBAgISAwCGF2od8H+mtmWAeHlKnNdbMA0GCSqGSIb3DQEBCwUAMDMxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MQwwCgYDVQQDEwNSMTEwHhcNMjQxMjA5MjIyMDQ2WhcNMjUwMzA5MjIyMDQ1WjAeMRwwGgYDVQQDExNhdHMudGFsZW50YWRvcmUuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA4LG826+KWgDo4cv8L/a5CKbuKWFM4K593U0UZGtZC/7FM9v0R4tC2IGyJFi+C3Oh/5r0FRPjPw+HVerZuRIy2VUGWZQGBVC2/VaGFRt5JHe7y9+Ffnc/1lPzGyx09n2BxwKV7iPwwYbamj2zh2ZZerT23pAMG1AR1JT42Ymet+gV5V+M8AFI6K52c9pCOwL8afhWkzovGls6ilcdyvBsGhtE14bJms7RUxAVZYDo5yuTkHgs6jfrOdOdVeZO+gg1P2LCo4HiKfhPVqh6GpcS2wAAygas/0l7rZCRlylAGgX70Y1SUOqP9cjGJKiZCk8ca74X9rdk+dFnx4uszUJT7QIDAQABo4ICFjCCAhIwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBTLHfgSZJ6qE49NCH/TlTZ/5KknMjAfBgNVHSMEGDAWgBTFz0ak6vTDwHpslcQtsF6SLybjuTBXBggrBgEFBQcBAQRLMEkwIgYIKwYBBQUHMAGGFmh0dHA6Ly9yMTEuby5sZW5jci5vcmcwIwYIKwYBBQUHMAKGF2h0dHA6Ly9yMTEuaS5sZW5jci5vcmcvMB4GA1UdEQQXMBWCE2F0cy50YWxlbnRhZG9yZS5jb20wEwYDVR0gBAwwCjAIBgZngQwBAgEwggEDBgorBgEEAdZ5AgQCBIH0BIHxAO8AdQDM+w9qhXEJZf6Vm1PO6bJ8IumFXA2XjbapflTA/kwNsAAAAZOtuEnGAAAEAwBGMEQCICfTi11QOIpI0GbzTBx+y4tqdhffbe1HuXUewjoUOfhKAiB/mJaxRNRcuGE3tg3UNwdJ3eX9fL5Uovm5DmNHJHMzAwB2ABNK3xq1mEIJeAxv70x6kaQWtyNJzlhXat+u2qfCq+AiAAABk624SsMAAAQDAEcwRQIhAJF1nGiAhksgjwT9UZv7z15hYfZaV3N7C6pjNNm5MqY8AiBF+8TNhkpslCOaqFssbZ6vWI5lijKHY1KXPAWSmVx5XjANBgkqhkiG9w0BAQsFAAOCAQEAosEraQfPPjS9x3cedejLSn2Axtpf/0EBnqHR/0JqPcuxyNP8+EIeqjGqWCZrtZymS63mhxw1O1sieNvVxMVfZv3Jqw5rYVgOrBQ3UduDMIPD1uNuISFUqkGM6HlWw8YO4LkNlOgplA/Ixviz4Onm6I4o+VfjohlrO3I0lZnfkfAXkfs79MNYLcd4dypuTOs/jKy6FVhfP7p3jfcJ7zSMq97t+3Rc4EV7qo8j7O4Y1F/vYlMChD2afYj2HJY8t22i+dPWHQR404ZzV7MB5tzL8LIw+Ec2I3z8DiEA7dO15zTrShnp9ixdKzEeFy1z5E9isXUIQG6Qot4Jf3EtQSOwvxMCAAQAAAAAAAEBAAAAAAAABngyNTUxOQAAAA5SU0EtUFNTLVNIQTI1NgADZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAE+TCCBPUwggPdoAMCAQICEgMAhhdqHfB/prZlgHh5SpzXWzANBgkqhkiG9w0BAQsFADAzMQswCQYDVQQGEwJVUzEWMBQGA1UEChMNTGV0J3MgRW5jcnlwdDEMMAoGA1UEAxMDUjExMB4XDTI0MTIwOTIyMjA0NloXDTI1MDMwOTIyMjA0NVowHjEcMBoGA1UEAxMTYXRzLnRhbGVudGFkb3JlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAOCxvNuviloA6OHL/C/2uQim7ilhTOCufd1NFGRrWQv+xTPb9EeLQtiBsiRYvgtzof+a9BUT4z8Ph1Xq2bkSMtlVBlmUBgVQtv1WhhUbeSR3u8vfhX53P9ZT8xssdPZ9gccCle4j8MGG2po9s4dmWXq09t6QDBtQEdSU+NmJnrfoFeVfjPABSOiudnPaQjsC/Gn4VpM6LxpbOopXHcrwbBobRNeGyZrO0VMQFWWA6Ocrk5B4LOo36znTnVXmTvoINT9iwqOB4in4T1aoehqXEtsAAMoGrP9Je62QkZcpQBoF+9GNUlDqj/XIxiSomQpPHGu+F/a3ZPnRZ8eLrM1CU+0CAwEAAaOCAhYwggISMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDAYDVR0TAQH/BAIwADAdBgNVHQ4EFgQUyx34EmSeqhOPTQh/05U2f+SpJzIwHwYDVR0jBBgwFoAUxc9GpOr0w8B6bJXELbBeki8m47kwVwYIKwYBBQUHAQEESzBJMCIGCCsGAQUFBzABhhZodHRwOi8vcjExLm8ubGVuY3Iub3JnMCMGCCsGAQUFBzAChhdodHRwOi8vcjExLmkubGVuY3Iub3JnLzAeBgNVHREEFzAVghNhdHMudGFsZW50YWRvcmUuY29tMBMGA1UdIAQMMAowCAYGZ4EMAQIBMIIBAwYKKwYBBAHWeQIEAgSB9ASB8QDvAHUAzPsPaoVxCWX+lZtTzumyfCLphVwNl422qX5UwP5MDbAAAAGTrbhJxgAABAMARjBEAiAn04tdUDiKSNBm80wcfsuLanYX323tR7l1HsI6FDn4SgIgf5iWsUTUXLhhN7YN1DcHSd3l/Xy+VKL5uQ5jRyRzMwMAdgATSt8atZhCCXgMb+9MepGkFrcjSc5YV2rfrtqnwqvgIgAAAZOtuErDAAAEAwBHMEUCIQCRdZxogIZLII8E/VGb+89eYWH2WldzewuqYzTZuTKmPAIgRfvEzYZKbJQjmqhbLG2er1iOZYoyh2NSlzwFkplceV4wDQYJKoZIhvcNAQELBQADggEBAKLBK2kHzz40vcd3HnXoy0p9gMbaX/9BAZ6h0f9Caj3LscjT/PhCHqoxqlgma7Wcpkut5occNTtbInjb1cTFX2b9yasOa2FYDqwUN1HbgzCDw9bjbiEhVKpBjOh5VsPGDuC5DZToKZQPyMb4s+Dp5uiOKPlX46IZaztyNJWZ35HwF5H7O/TDWC3HeHcqbkzrP4ysuhVYXz+6d433Ce80jKve7ft0XOBFe6qPI+zuGNRf72JTAoQ9mn2I9hyWPLdtovnT1h0EeNOGc1ezAebcy/CyMPhHNiN8/A4hAO3Ttec060oZ6fYsXSsxHhctc+RPYrF1CEBukKLeCX9xLUEjsL9mCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAUKMIIFBjCCAu6gAwIBAgIRAIp9PhPWLzDvI4a9KQdrNPgwDQYJKoZIhvcNAQELBQAwTzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2VhcmNoIEdyb3VwMRUwEwYDVQQDEwxJU1JHIFJvb3QgWDEwHhcNMjQwMzEzMDAwMDAwWhcNMjcwMzEyMjM1OTU5WjAzMQswCQYDVQQGEwJVUzEWMBQGA1UEChMNTGV0J3MgRW5jcnlwdDEMMAoGA1UEAxMDUjExMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuoe8XBsAOcvKCs3UZxD5ATylTqVhyybKUvsVAbe5KPUoHu0nsyQYOWcJDAjs4DqwO3cOvfPlOVRBDE6uQdaZdN5R2+97/1i9qLcT9t4x1fJyyXJqC4N0lZxGAGQUmfOx2SLZzaiSqhwmej/+71gFewiVgdtxD4774zEJuwm+UE1fj5F2PVqdnoPy6cRms+EGZkNIGIBloDcYmpuEMpexsr3E+BUAnSeI++JjF5ZsmydnS8TbKF5pwnnwSVzgJFDhxLyhBax7QG0AtMJBP6dYuC/FXJuluwme8f7rsIU5/agK70XEeOtlKsLPXzze41xNG/cLJyuqC0J3U095ah2H2QIDAQABo4H4MIH1MA4GA1UdDwEB/wQEAwIBhjAdBgNVHSUEFjAUBggrBgEFBQcDAgYIKwYBBQUHAwEwEgYDVR0TAQH/BAgwBgEB/wIBADAdBgNVHQ4EFgQUxc9GpOr0w8B6bJXELbBeki8m47kwHwYDVR0jBBgwFoAUebRZ5nu25eQBc4AIiMgaWPbpm24wMgYIKwYBBQUHAQEEJjAkMCIGCCsGAQUFBzAChhZodHRwOi8veDEuaS5sZW5jci5vcmcvMBMGA1UdIAQMMAowCAYGZ4EMAQIBMCcGA1UdHwQgMB4wHKAaoBiGFmh0dHA6Ly94MS5jLmxlbmNyLm9yZy8wDQYJKoZIhvcNAQELBQADggIBAE7iiV0KAxyQOND1H/lxXPjDj7I3iHpvsCUf7b632IYGjukJhM1yv4Hz/MrPU0jtvfZpQtSlET41yBOykh0FX+ou1Nj4ScOt9ZmWnO8m2OG0JAtIIE3801S0qcYhyOE2G/93ZCkXufBL713qzXnQv5C/viOykNpKqUgxdKlEC+Hi9i2DcaR1e9KUwQUZRhy5j/PEdEglKg3l9dtD4tuTm7kZtB8v32oOjzHTYw+7KdzdZiw/sBtnUfhBPORNuay4pJxmY/WrhSMdzFO2q3Gu3MUBcdo27goYKjL9CTF8j/Zz55yctUoVaneCWs/ajUX+HypkBTA+c8LGDLnWO2NKq0YD/pnARkAnYGPfUDoHR9gVSp/qRx+ZWghiDLZsMwhN1zjtSC0uBWiugF3vTNzYIEFfaPG7Ws3jDrAMMYebQ95JQ+HIBD/RPBuHRTBpqKlyDnkSHDHYPiNX3adPoPAcgdF3H2/W0rmoswMWgTlLn1Wu0mrks7/qpdWfS6PJ1jty80r2VKsM/Dj3YIDfbjXKdaFU5C+8bhfJGqU3taKauuz0wHVGT3eo6FlWkWYtbt4pgdamlwVeZEW+LM7qZEJEsMNPrfC03APKmZsJgpWCDWOKZvkZcvjVuYkQ4omYCTX5ohy+knMjdOmdH9c7SpqEWBDC86fiNex+O0XOMEZSa8DAZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAFbzCCBWswggNToAMCAQICEQCCEM+w0kDjWURj4LtjgosAMA0GCSqGSIb3DQEBCwUAME8xCzAJBgNVBAYTAlVTMSkwJwYDVQQKEyBJbnRlcm5ldCBTZWN1cml0eSBSZXNlYXJjaCBHcm91cDEVMBMGA1UEAxMMSVNSRyBSb290IFgxMB4XDTE1MDYwNDExMDQzOFoXDTM1MDYwNDExMDQzOFowTzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2VhcmNoIEdyb3VwMRUwEwYDVQQDEwxJU1JHIFJvb3QgWDEwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQCt6CRz9BQ385ueK1coHIe+3LffOJCMbjzmV6B493XCov71am72AE8o295ohmxEk7axY/0UEmu/H9LqMZshftEzPLpI9d1537O4/xLxIZpLwYqGcWlKZmZsj348cL+tKSIG8+TA5oCu4kuPt5l+lAOf00eXfJlII1PoOK5PCm+DLtFJV4yAdLbaL9A4jXsDcCEbdfIwPPqPrt3aY6vrFk/CjhFLfs8L6P+1dy70sntK4EwSJQxwjQMpoOFTJOwT2e4ZvxCzSow/iaNhUd6shweU9GNx7C7ib1uYgeGJXDR5bHbvO5BieebbpJovJsXQEOEO3tkQjhb7t/eo98flAgeYjzYIlefiN5YNNnWe+w5ysR2bvAP5SQXYgd0FtCrWQemsAXaVCg/Y39W9Eh81LygXbNKYwagJZHduRze6zqxZXmidf3LWicUGQSk+WT7dJvUkyRGnWqNMQB9GoZm1pzpRboY7nn1ypxIFeFntPlF4FQsDj43QLwWyPntKHEtzBRL8xurgUBN8Q5N0s8p0544fAQjQMNRbcTa0B7rBMDBcSLeCO5imfWCKoqMpgsy6vYMEG6KDA0Gh1gXxG8K28Kh8hjtGqEgqiNx2mna/H2qlPRmP6zjzZN7IKw0KKP/32+IVQtQi0Cdd4Xn+GOdwiK1O5tmLOsbdJ1Fu/7xk9TNDTwIDAQABo0IwQDAOBgNVHQ8BAf8EBAMCAQYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUebRZ5nu25eQBc4AIiMgaWPbpm24wDQYJKoZIhvcNAQELBQADggIBAFUfWKm8sqhQ0Ayx2BppICcpCKxhdVyKbviC5Wkv1fZWS7m4cxBZ0yGXfudMcfuy0mCtOagL6hchVoXxUA5Z687gWem6yRXvhp2PhID25OmRkNwXm2IbRfBmldJ8b8LqO+8fz8vWrifxqbDIrv19fpr6IgTr/9l/6pErIrEXDo/yijRbWNj8AclUubgmzIqIM4lMLYQ8gt/ullcFuiy798S3x047gr4xyCJzc5LRwoCkOTkQMyOCTDyfhrJVmB2+KYaMIpue4ms7VzqCcE3cCceJywoHTWzoXY7J786rx7u1K05F1krQJszlcsoIaqWV4xWh96TtySxfpfv/rCgCLr7Xe7vjcXuQFtMHXkZTfDcHQozTxJac1Zm1KuCVGoBIrkw5B87MR6RSlSu6uPut0jNTfeUdTW3VobHHQm/mQCc1XKMotweN540zkOcjn/tQnHlsRtW0FbOWbn6bDJY6uFItP9Zb4fsIwoT+JKijidqsauEYKrGoQ2Fb0x/cO4128i3ojXXfFzNsPVP7e8tBX//cotBhOOGWuKxdizfXddUzwJkRrp1BwXJ1hL4CQUJfZyRIlNGbJ74HP7m4T4F0UeF6t+2dI+K+4NUoBBM8MQOe3Xpsj8YHGMZ/3keOPyieBAbPpVQ0d73siZvpF0PfW9tf/o4eV6LNQJ1+YiLa3hgnAAAAAQAAAAJoMgABAAAAAFV0bHNmbGFnczB4MDAwMDAwMDA6YXRzLnRhbGVudGFkb3JlLmNvbTo0NDNecGFydGl0aW9uS2V5PSUyOGh0dHBzJTJDdGFsZW50YWRvcmUuY29tJTI5AQA= request-method GET response-head HTTP/2 200 
date: Tue, 14 Jan 2025 16:36:11 GMT
content-type: application/javascript
content-length: 120686
last-modified: Mon, 13 Jan 2025 15:38:26 GMT
etag: "67853372-1d76e"
cache-control: public
strict-transport-security: max-age=15724800; includeSubDomains
accept-ranges: bytes
X-Firefox-Spdy: h2
 original-response-headers date: Tue, 14 Jan 2025 16:36:11 GMT
content-type: application/javascript
content-length: 120686
last-modified: Mon, 13 Jan 2025 15:38:26 GMT
etag: "67853372-1d76e"
cache-control: public
strict-transport-security: max-age=15724800; includeSubDomains
accept-ranges: bytes
X-Firefox-Spdy: h2
 ctid 2 uncompressed-len 0 net-response-time-onstart 205 net-response-time-onstop 353 alt-data 1;120686,javascript/moz-script-bytecode-20241209150345-8l alt-data-from-child 1  